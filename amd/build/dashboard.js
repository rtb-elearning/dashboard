define(["require","exports"],(function(X,He){"use strict";var Ue=document.createElement("style");Ue.textContent=`@layer properties{@supports ((-webkit-hyphens:none) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-translate-x:0;--tw-translate-y:0;--tw-translate-z:0;--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-space-y-reverse:0;--tw-border-style:solid;--tw-gradient-position:initial;--tw-gradient-from:#0000;--tw-gradient-via:#0000;--tw-gradient-to:#0000;--tw-gradient-stops:initial;--tw-gradient-via-stops:initial;--tw-gradient-from-position:0%;--tw-gradient-via-position:50%;--tw-gradient-to-position:100%;--tw-leading:initial;--tw-font-weight:initial;--tw-tracking:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000;--tw-blur:initial;--tw-brightness:initial;--tw-contrast:initial;--tw-grayscale:initial;--tw-hue-rotate:initial;--tw-invert:initial;--tw-opacity:initial;--tw-saturate:initial;--tw-sepia:initial;--tw-drop-shadow:initial;--tw-drop-shadow-color:initial;--tw-drop-shadow-alpha:100%;--tw-drop-shadow-size:initial;--tw-duration:initial;--tw-ease:initial;--tw-scale-x:1;--tw-scale-y:1;--tw-scale-z:1}}}@layer theme{:root,:host{--font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--color-red-50:oklch(97.1% .013 17.38);--color-red-100:oklch(93.6% .032 17.717);--color-red-200:oklch(88.5% .062 18.334);--color-red-500:oklch(63.7% .237 25.331);--color-red-700:oklch(50.5% .213 27.518);--color-red-800:oklch(44.4% .177 26.899);--color-orange-400:oklch(75% .183 55.934);--color-orange-500:oklch(70.5% .213 47.604);--color-amber-50:oklch(98.7% .022 95.277);--color-amber-100:oklch(96.2% .059 95.617);--color-amber-400:oklch(82.8% .189 84.429);--color-amber-500:oklch(76.9% .188 70.08);--color-amber-600:oklch(66.6% .179 58.318);--color-amber-700:oklch(55.5% .163 48.998);--color-yellow-50:oklch(98.7% .026 102.212);--color-yellow-400:oklch(85.2% .199 91.936);--color-yellow-600:oklch(68.1% .162 75.834);--color-green-50:oklch(98.2% .018 155.826);--color-green-100:oklch(96.2% .044 156.743);--color-green-200:oklch(92.5% .084 155.995);--color-green-500:oklch(72.3% .219 149.579);--color-green-600:oklch(62.7% .194 149.214);--color-green-700:oklch(52.7% .154 150.069);--color-green-800:oklch(44.8% .119 151.328);--color-emerald-50:oklch(97.9% .021 166.113);--color-emerald-700:oklch(50.8% .118 165.612);--color-teal-500:oklch(70.4% .14 182.503);--color-cyan-50:oklch(98.4% .019 200.873);--color-cyan-100:oklch(95.6% .045 203.388);--color-cyan-400:oklch(78.9% .154 211.53);--color-cyan-500:oklch(71.5% .143 215.221);--color-cyan-600:oklch(60.9% .126 221.723);--color-sky-50:oklch(97.7% .013 236.62);--color-blue-50:oklch(97% .014 254.604);--color-blue-100:oklch(93.2% .032 255.585);--color-blue-200:oklch(88.2% .059 254.128);--color-blue-500:oklch(62.3% .214 259.815);--color-blue-600:oklch(54.6% .245 262.881);--color-blue-700:oklch(48.8% .243 264.376);--color-blue-800:oklch(42.4% .199 265.638);--color-indigo-500:oklch(58.5% .233 277.117);--color-indigo-600:oklch(51.1% .262 276.966);--color-violet-500:oklch(60.6% .25 292.717);--color-purple-50:oklch(97.7% .014 308.299);--color-purple-100:oklch(94.6% .033 307.174);--color-purple-300:oklch(82.7% .119 306.383);--color-purple-400:oklch(71.4% .203 305.504);--color-purple-500:oklch(62.7% .265 303.9);--color-purple-600:oklch(55.8% .288 302.321);--color-purple-700:oklch(49.6% .265 301.924);--color-fuchsia-300:oklch(83.3% .145 321.434);--color-pink-400:oklch(71.8% .202 349.761);--color-pink-500:oklch(65.6% .241 354.308);--color-gray-50:oklch(98.5% .002 247.839);--color-gray-100:oklch(96.7% .003 264.542);--color-gray-200:oklch(92.8% .006 264.531);--color-gray-300:oklch(87.2% .01 258.338);--color-gray-400:oklch(70.7% .022 261.325);--color-gray-500:oklch(55.1% .027 264.364);--color-gray-600:oklch(44.6% .03 256.802);--color-gray-700:oklch(37.3% .034 259.733);--color-gray-800:oklch(27.8% .033 256.848);--color-gray-900:oklch(21% .034 264.665);--color-black:#000;--color-white:#fff;--spacing:.25rem;--container-md:28rem;--container-7xl:80rem;--text-xs:.75rem;--text-xs--line-height:calc(1/.75);--text-sm:.875rem;--text-sm--line-height:calc(1.25/.875);--text-lg:1.125rem;--text-lg--line-height:calc(1.75/1.125);--text-xl:1.25rem;--text-xl--line-height:calc(1.75/1.25);--text-2xl:1.5rem;--text-2xl--line-height:calc(2/1.5);--text-3xl:1.875rem;--text-3xl--line-height: 1.2 ;--text-4xl:2.25rem;--text-4xl--line-height:calc(2.5/2.25);--font-weight-normal:400;--font-weight-medium:500;--font-weight-semibold:600;--font-weight-bold:700;--tracking-wider:.05em;--leading-tight:1.25;--radius-sm:.25rem;--radius-md:.375rem;--radius-lg:.5rem;--radius-xl:.75rem;--ease-in-out:cubic-bezier(.4,0,.2,1);--animate-spin:spin 1s linear infinite;--animate-pulse:pulse 2s cubic-bezier(.4,0,.6,1)infinite;--default-transition-duration:.15s;--default-transition-timing-function:cubic-bezier(.4,0,.2,1);--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono);--color-rtb-blue:#005198}}@layer base{*,:after,:before,::backdrop{box-sizing:border-box;border:0 solid;margin:0;padding:0}::file-selector-button{box-sizing:border-box;border:0 solid;margin:0;padding:0}html,:host{-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;line-height:1.5;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::-moz-placeholder{opacity:1}::placeholder{opacity:1}@supports (not (-webkit-appearance:-apple-pay-button)) or (contain-intrinsic-size:1px){::-moz-placeholder{color:currentColor}::placeholder{color:currentColor}@supports (color:color-mix(in lab,red,red)){::-moz-placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit{padding-block:0}::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-month-field{padding-block:0}::-webkit-datetime-edit-day-field{padding-block:0}::-webkit-datetime-edit-hour-field{padding-block:0}::-webkit-datetime-edit-minute-field{padding-block:0}::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-millisecond-field{padding-block:0}::-webkit-datetime-edit-meridiem-field{padding-block:0}::-webkit-calendar-picker-indicator{line-height:1}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){-webkit-appearance:button;-moz-appearance:button;appearance:button}::file-selector-button{-webkit-appearance:button;-moz-appearance:button;appearance:button}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}}@layer components;@layer utilities{.visible{visibility:visible}.sr-only{clip-path:inset(50%);white-space:nowrap;border-width:0;width:1px;height:1px;margin:-1px;padding:0;position:absolute;overflow:hidden}.absolute{position:absolute}.fixed{position:fixed}.relative{position:relative}.static{position:static}.sticky{position:sticky}.inset-0{inset:calc(var(--spacing)*0)}.inset-y-0{inset-block:calc(var(--spacing)*0)}.-top-1{top:calc(var(--spacing)*-1)}.-top-8{top:calc(var(--spacing)*-8)}.top-0{top:calc(var(--spacing)*0)}.top-1{top:calc(var(--spacing)*1)}.top-1\\/2{top:50%}.top-4{top:calc(var(--spacing)*4)}.-right-1{right:calc(var(--spacing)*-1)}.right-20{right:calc(var(--spacing)*20)}.bottom-0{bottom:calc(var(--spacing)*0)}.bottom-\\[-24px\\]{bottom:-24px}.-left-6{left:calc(var(--spacing)*-6)}.left-0{left:calc(var(--spacing)*0)}.left-1{left:calc(var(--spacing)*1)}.left-1\\/2{left:50%}.left-3{left:calc(var(--spacing)*3)}.left-8{left:calc(var(--spacing)*8)}.left-\\[232px\\]{left:232px}.z-10{z-index:10}.z-20{z-index:20}.z-30{z-index:30}.z-40{z-index:40}.z-50{z-index:50}.col-6{grid-column:6}.float-right{float:right}.container{width:100%}@media(min-width:40rem){.container{max-width:40rem}}@media(min-width:48rem){.container{max-width:48rem}}@media(min-width:64rem){.container{max-width:64rem}}@media(min-width:80rem){.container{max-width:80rem}}@media(min-width:96rem){.container{max-width:96rem}}.m-0{margin:calc(var(--spacing)*0)}.mx-auto{margin-inline:auto}.me-1{margin-inline-end:calc(var(--spacing)*1)}.me-2{margin-inline-end:calc(var(--spacing)*2)}.me-3{margin-inline-end:calc(var(--spacing)*3)}.-mt-2{margin-top:calc(var(--spacing)*-2)}.mt-1{margin-top:calc(var(--spacing)*1)}.mt-2{margin-top:calc(var(--spacing)*2)}.mt-3{margin-top:calc(var(--spacing)*3)}.mt-4{margin-top:calc(var(--spacing)*4)}.mt-6{margin-top:calc(var(--spacing)*6)}.mt-auto{margin-top:auto}.mr-1{margin-right:calc(var(--spacing)*1)}.mr-2{margin-right:calc(var(--spacing)*2)}.mr-3{margin-right:calc(var(--spacing)*3)}.mr-32{margin-right:calc(var(--spacing)*32)}.mb-0{margin-bottom:calc(var(--spacing)*0)}.mb-1{margin-bottom:calc(var(--spacing)*1)}.mb-2{margin-bottom:calc(var(--spacing)*2)}.mb-3{margin-bottom:calc(var(--spacing)*3)}.mb-4{margin-bottom:calc(var(--spacing)*4)}.mb-5{margin-bottom:calc(var(--spacing)*5)}.mb-6{margin-bottom:calc(var(--spacing)*6)}.mb-8{margin-bottom:calc(var(--spacing)*8)}.-ml-2{margin-left:calc(var(--spacing)*-2)}.ml-1{margin-left:calc(var(--spacing)*1)}.ml-2{margin-left:calc(var(--spacing)*2)}.ml-4{margin-left:calc(var(--spacing)*4)}.ml-6{margin-left:calc(var(--spacing)*6)}.ml-8{margin-left:calc(var(--spacing)*8)}.ml-10{margin-left:calc(var(--spacing)*10)}.ml-auto{margin-left:auto}.block{display:block}.flex{display:flex}.grid{display:grid}.hidden{display:none}.inline{display:inline}.inline-block{display:inline-block}.inline-flex{display:inline-flex}.table{display:table}.h-0{height:calc(var(--spacing)*0)}.h-0\\.5{height:calc(var(--spacing)*.5)}.h-1{height:calc(var(--spacing)*1)}.h-1\\.5{height:calc(var(--spacing)*1.5)}.h-2{height:calc(var(--spacing)*2)}.h-2\\.5{height:calc(var(--spacing)*2.5)}.h-3{height:calc(var(--spacing)*3)}.h-3\\.5{height:calc(var(--spacing)*3.5)}.h-4{height:calc(var(--spacing)*4)}.h-5{height:calc(var(--spacing)*5)}.h-6{height:calc(var(--spacing)*6)}.h-7{height:calc(var(--spacing)*7)}.h-8{height:calc(var(--spacing)*8)}.h-10{height:calc(var(--spacing)*10)}.h-12{height:calc(var(--spacing)*12)}.h-16{height:calc(var(--spacing)*16)}.h-20{height:calc(var(--spacing)*20)}.h-24{height:calc(var(--spacing)*24)}.h-28{height:calc(var(--spacing)*28)}.h-32{height:calc(var(--spacing)*32)}.h-36{height:calc(var(--spacing)*36)}.h-40{height:calc(var(--spacing)*40)}.h-48{height:calc(var(--spacing)*48)}.h-64{height:calc(var(--spacing)*64)}.h-full{height:100%}.h-screen{height:100vh}.max-h-48{max-height:calc(var(--spacing)*48)}.max-h-60{max-height:calc(var(--spacing)*60)}.max-h-80{max-height:calc(var(--spacing)*80)}.max-h-\\[600px\\]{max-height:600px}.min-h-0{min-height:calc(var(--spacing)*0)}.min-h-screen{min-height:100vh}.w-1{width:calc(var(--spacing)*1)}.w-1\\.5{width:calc(var(--spacing)*1.5)}.w-2{width:calc(var(--spacing)*2)}.w-2\\.5{width:calc(var(--spacing)*2.5)}.w-3{width:calc(var(--spacing)*3)}.w-3\\.5{width:calc(var(--spacing)*3.5)}.w-4{width:calc(var(--spacing)*4)}.w-5{width:calc(var(--spacing)*5)}.w-6{width:calc(var(--spacing)*6)}.w-8{width:calc(var(--spacing)*8)}.w-10{width:calc(var(--spacing)*10)}.w-12{width:calc(var(--spacing)*12)}.w-14{width:calc(var(--spacing)*14)}.w-16{width:calc(var(--spacing)*16)}.w-20{width:calc(var(--spacing)*20)}.w-24{width:calc(var(--spacing)*24)}.w-28{width:calc(var(--spacing)*28)}.w-32{width:calc(var(--spacing)*32)}.w-36{width:calc(var(--spacing)*36)}.w-40{width:calc(var(--spacing)*40)}.w-48{width:calc(var(--spacing)*48)}.w-56{width:calc(var(--spacing)*56)}.w-64{width:calc(var(--spacing)*64)}.w-72{width:calc(var(--spacing)*72)}.w-100{width:calc(var(--spacing)*100)}.w-full{width:100%}.max-w-7xl{max-width:var(--container-7xl)}.max-w-\\[2\\.5rem\\]{max-width:2.5rem}.max-w-\\[48px\\]{max-width:48px}.max-w-\\[80px\\]{max-width:80px}.max-w-\\[140px\\]{max-width:140px}.max-w-md{max-width:var(--container-md)}.min-w-\\[24px\\]{min-width:24px}.min-w-\\[50px\\]{min-width:50px}.min-w-\\[140px\\]{min-width:140px}.min-w-\\[200px\\]{min-width:200px}.min-w-fit{min-width:-moz-fit-content;min-width:fit-content}.flex-1{flex:1}.flex-shrink-0,.shrink-0{flex-shrink:0}.origin-bottom-left{transform-origin:0 100%}.origin-top{transform-origin:top}.origin-top-left{transform-origin:0 0}.-translate-x-1{--tw-translate-x:calc(var(--spacing)*-1);translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-x-1\\/2{--tw-translate-x: -50% ;translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-x-full{--tw-translate-x:-100%;translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-x-0{--tw-translate-x:calc(var(--spacing)*0);translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-y-1{--tw-translate-y:calc(var(--spacing)*-1);translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-y-1{--tw-translate-y:calc(var(--spacing)*1);translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-y-1\\/2{--tw-translate-y: 50% ;translate:var(--tw-translate-x)var(--tw-translate-y)}.-rotate-90{rotate:-90deg}.rotate-90{rotate:90deg}.rotate-180{rotate:180deg}.transform{transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)}.animate-pulse{animation:var(--animate-pulse)}.animate-spin{animation:var(--animate-spin)}.cursor-default{cursor:default}.cursor-pointer{cursor:pointer}.list-none{list-style-type:none}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.items-end{align-items:flex-end}.items-start{align-items:flex-start}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.justify-end{justify-content:flex-end}.gap-0{gap:calc(var(--spacing)*0)}.gap-0\\.5{gap:calc(var(--spacing)*.5)}.gap-1{gap:calc(var(--spacing)*1)}.gap-1\\.5{gap:calc(var(--spacing)*1.5)}.gap-2{gap:calc(var(--spacing)*2)}.gap-3{gap:calc(var(--spacing)*3)}.gap-4{gap:calc(var(--spacing)*4)}.gap-6{gap:calc(var(--spacing)*6)}.gap-8{gap:calc(var(--spacing)*8)}:where(.space-y-0>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*0)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*0)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-0\\.5>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*.5)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*.5)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-1>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*1)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*1)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-3>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*3)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*3)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-4>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*4)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*4)*calc(1 - var(--tw-space-y-reverse)))}.truncate{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.overflow-visible{overflow:visible}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.rounded{border-radius:.25rem}.rounded-full{border-radius:3.40282e38px}.rounded-lg{border-radius:var(--radius-lg)}.rounded-md{border-radius:var(--radius-md)}.rounded-xl{border-radius:var(--radius-xl)}.rounded-t{border-top-left-radius:.25rem;border-top-right-radius:.25rem}.rounded-t-sm{border-top-left-radius:var(--radius-sm);border-top-right-radius:var(--radius-sm)}.border{border-style:var(--tw-border-style);border-width:1px}.border-2{border-style:var(--tw-border-style);border-width:2px}.border-t{border-top-style:var(--tw-border-style);border-top-width:1px}.border-t-2{border-top-style:var(--tw-border-style);border-top-width:2px}.border-r{border-right-style:var(--tw-border-style);border-right-width:1px}.border-b{border-bottom-style:var(--tw-border-style);border-bottom-width:1px}.border-l{border-left-style:var(--tw-border-style);border-left-width:1px}.border-l-2{border-left-style:var(--tw-border-style);border-left-width:2px}.border-l-4{border-left-style:var(--tw-border-style);border-left-width:4px}.border-dashed{--tw-border-style:dashed;border-style:dashed}.border-none{--tw-border-style:none;border-style:none}.border-blue-200{border-color:var(--color-blue-200)}.border-blue-500{border-color:var(--color-blue-500)}.border-blue-600{border-color:var(--color-blue-600)}.border-gray-50{border-color:var(--color-gray-50)}.border-gray-100{border-color:var(--color-gray-100)}.border-gray-200{border-color:var(--color-gray-200)}.border-gray-300{border-color:var(--color-gray-300)}.border-green-200{border-color:var(--color-green-200)}.border-green-500{border-color:var(--color-green-500)}.border-indigo-500{border-color:var(--color-indigo-500)}.border-orange-500{border-color:var(--color-orange-500)}.border-pink-500{border-color:var(--color-pink-500)}.border-purple-500{border-color:var(--color-purple-500)}.border-red-200{border-color:var(--color-red-200)}.border-teal-500{border-color:var(--color-teal-500)}.border-t-transparent{border-top-color:#0000}.bg-amber-50{background-color:var(--color-amber-50)}.bg-amber-100{background-color:var(--color-amber-100)}.bg-amber-500{background-color:var(--color-amber-500)}.bg-black{background-color:var(--color-black)}.bg-black\\/50{background-color:#00000080}@supports (color:color-mix(in lab,red,red)){.bg-black\\/50{background-color:color-mix(in oklab,var(--color-black)50%,transparent)}}.bg-blue-50{background-color:var(--color-blue-50)}.bg-blue-100{background-color:var(--color-blue-100)}.bg-blue-500{background-color:var(--color-blue-500)}.bg-blue-600{background-color:var(--color-blue-600)}.bg-cyan-50{background-color:var(--color-cyan-50)}.bg-cyan-100{background-color:var(--color-cyan-100)}.bg-cyan-400{background-color:var(--color-cyan-400)}.bg-emerald-50{background-color:var(--color-emerald-50)}.bg-fuchsia-300{background-color:var(--color-fuchsia-300)}.bg-gray-50{background-color:var(--color-gray-50)}.bg-gray-100{background-color:var(--color-gray-100)}.bg-gray-200{background-color:var(--color-gray-200)}.bg-gray-300{background-color:var(--color-gray-300)}.bg-gray-400{background-color:var(--color-gray-400)}.bg-gray-600{background-color:var(--color-gray-600)}.bg-gray-800{background-color:var(--color-gray-800)}.bg-green-50{background-color:var(--color-green-50)}.bg-green-100{background-color:var(--color-green-100)}.bg-green-500{background-color:var(--color-green-500)}.bg-green-600{background-color:var(--color-green-600)}.bg-indigo-500{background-color:var(--color-indigo-500)}.bg-indigo-600{background-color:var(--color-indigo-600)}.bg-orange-400{background-color:var(--color-orange-400)}.bg-pink-400{background-color:var(--color-pink-400)}.bg-pink-500{background-color:var(--color-pink-500)}.bg-purple-50{background-color:var(--color-purple-50)}.bg-purple-100{background-color:var(--color-purple-100)}.bg-purple-300{background-color:var(--color-purple-300)}.bg-purple-400{background-color:var(--color-purple-400)}.bg-red-50{background-color:var(--color-red-50)}.bg-red-100{background-color:var(--color-red-100)}.bg-red-500{background-color:var(--color-red-500)}.bg-rtb-blue{background-color:var(--color-rtb-blue)}.bg-sky-50{background-color:var(--color-sky-50)}.bg-teal-500{background-color:var(--color-teal-500)}.bg-transparent{background-color:#0000}.bg-violet-500{background-color:var(--color-violet-500)}.bg-white{background-color:var(--color-white)}.bg-white\\/30{background-color:#ffffff4d}@supports (color:color-mix(in lab,red,red)){.bg-white\\/30{background-color:color-mix(in oklab,var(--color-white)30%,transparent)}}.bg-white\\/40{background-color:#fff6}@supports (color:color-mix(in lab,red,red)){.bg-white\\/40{background-color:color-mix(in oklab,var(--color-white)40%,transparent)}}.bg-yellow-50{background-color:var(--color-yellow-50)}.bg-yellow-400{background-color:var(--color-yellow-400)}.bg-gradient-to-br{--tw-gradient-position:to bottom right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.from-amber-400{--tw-gradient-from:var(--color-amber-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-cyan-400{--tw-gradient-from:var(--color-cyan-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-blue-500{--tw-gradient-to:var(--color-blue-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-orange-500{--tw-gradient-to:var(--color-orange-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.object-contain{object-fit:contain}.object-cover{object-fit:cover}.p-0{padding:calc(var(--spacing)*0)}.p-1{padding:calc(var(--spacing)*1)}.p-2{padding:calc(var(--spacing)*2)}.p-3{padding:calc(var(--spacing)*3)}.p-4{padding:calc(var(--spacing)*4)}.p-5{padding:calc(var(--spacing)*5)}.p-6{padding:calc(var(--spacing)*6)}.p-8{padding:calc(var(--spacing)*8)}.px-2{padding-inline:calc(var(--spacing)*2)}.px-3{padding-inline:calc(var(--spacing)*3)}.px-4{padding-inline:calc(var(--spacing)*4)}.px-5{padding-inline:calc(var(--spacing)*5)}.px-6{padding-inline:calc(var(--spacing)*6)}.py-0{padding-block:calc(var(--spacing)*0)}.py-0\\.5{padding-block:calc(var(--spacing)*.5)}.py-1{padding-block:calc(var(--spacing)*1)}.py-1\\.5{padding-block:calc(var(--spacing)*1.5)}.py-2{padding-block:calc(var(--spacing)*2)}.py-2\\.5{padding-block:calc(var(--spacing)*2.5)}.py-3{padding-block:calc(var(--spacing)*3)}.py-4{padding-block:calc(var(--spacing)*4)}.py-6{padding-block:calc(var(--spacing)*6)}.py-8{padding-block:calc(var(--spacing)*8)}.py-12{padding-block:calc(var(--spacing)*12)}.pt-2{padding-top:calc(var(--spacing)*2)}.pt-3{padding-top:calc(var(--spacing)*3)}.pt-4{padding-top:calc(var(--spacing)*4)}.pr-2{padding-right:calc(var(--spacing)*2)}.pr-3{padding-right:calc(var(--spacing)*3)}.pr-4{padding-right:calc(var(--spacing)*4)}.pb-2{padding-bottom:calc(var(--spacing)*2)}.pb-3{padding-bottom:calc(var(--spacing)*3)}.pb-6{padding-bottom:calc(var(--spacing)*6)}.pb-20{padding-bottom:calc(var(--spacing)*20)}.pb-24{padding-bottom:calc(var(--spacing)*24)}.pb-36{padding-bottom:calc(var(--spacing)*36)}.pb-52{padding-bottom:calc(var(--spacing)*52)}.pl-2{padding-left:calc(var(--spacing)*2)}.pl-3{padding-left:calc(var(--spacing)*3)}.pl-4{padding-left:calc(var(--spacing)*4)}.pl-9{padding-left:calc(var(--spacing)*9)}.pl-10{padding-left:calc(var(--spacing)*10)}.text-center{text-align:center}.text-left{text-align:left}.text-right{text-align:right}.text-2xl{font-size:var(--text-2xl);line-height:var(--tw-leading,var(--text-2xl--line-height))}.text-3xl{font-size:var(--text-3xl);line-height:var(--tw-leading,var(--text-3xl--line-height))}.text-4xl{font-size:var(--text-4xl);line-height:var(--tw-leading,var(--text-4xl--line-height))}.text-lg{font-size:var(--text-lg);line-height:var(--tw-leading,var(--text-lg--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.text-xl{font-size:var(--text-xl);line-height:var(--tw-leading,var(--text-xl--line-height))}.text-xs{font-size:var(--text-xs);line-height:var(--tw-leading,var(--text-xs--line-height))}.text-\\[9px\\]{font-size:9px}.text-\\[10px\\]{font-size:10px}.text-\\[11px\\]{font-size:11px}.leading-none{--tw-leading:1;line-height:1}.leading-tight{--tw-leading:var(--leading-tight);line-height:var(--leading-tight)}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.font-medium{--tw-font-weight:var(--font-weight-medium);font-weight:var(--font-weight-medium)}.font-normal{--tw-font-weight:var(--font-weight-normal);font-weight:var(--font-weight-normal)}.font-semibold{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.tracking-wider{--tw-tracking:var(--tracking-wider);letter-spacing:var(--tracking-wider)}.whitespace-nowrap{white-space:nowrap}.text-amber-600{color:var(--color-amber-600)}.text-amber-700{color:var(--color-amber-700)}.text-blue-600{color:var(--color-blue-600)}.text-blue-700{color:var(--color-blue-700)}.text-blue-800{color:var(--color-blue-800)}.text-cyan-600{color:var(--color-cyan-600)}.text-emerald-700{color:var(--color-emerald-700)}.text-gray-300{color:var(--color-gray-300)}.text-gray-400{color:var(--color-gray-400)}.text-gray-500{color:var(--color-gray-500)}.text-gray-600{color:var(--color-gray-600)}.text-gray-700{color:var(--color-gray-700)}.text-gray-800{color:var(--color-gray-800)}.text-gray-900{color:var(--color-gray-900)}.text-green-600{color:var(--color-green-600)}.text-green-700{color:var(--color-green-700)}.text-green-800{color:var(--color-green-800)}.text-purple-600{color:var(--color-purple-600)}.text-purple-700{color:var(--color-purple-700)}.text-red-500{color:var(--color-red-500)}.text-red-700{color:var(--color-red-700)}.text-red-800{color:var(--color-red-800)}.text-rtb-blue{color:var(--color-rtb-blue)}.text-white{color:var(--color-white)}.text-yellow-600{color:var(--color-yellow-600)}.uppercase{text-transform:uppercase}.italic{font-style:italic}.no-underline{text-decoration-line:none}.opacity-20{opacity:.2}.opacity-60{opacity:.6}.opacity-80{opacity:.8}.shadow{--tw-shadow:0 1px 3px 0 var(--tw-shadow-color,#0000001a),0 1px 2px -1px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px var(--tw-shadow-color,#0000001a),0 4px 6px -4px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-md{--tw-shadow:0 4px 6px -1px var(--tw-shadow-color,#0000001a),0 2px 4px -2px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 3px 0 var(--tw-shadow-color,#0000001a),0 1px 2px -1px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.filter{filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.transition-all{transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-colors{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-opacity{transition-property:opacity;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-shadow{transition-property:box-shadow;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-transform{transition-property:transform,translate,scale,rotate;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.duration-300{--tw-duration:.3s;transition-duration:.3s}.ease-in-out{--tw-ease:var(--ease-in-out);transition-timing-function:var(--ease-in-out)}.outline-none{--tw-outline-style:none;outline-style:none}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}@media(hover:hover){.group-hover\\:bg-gray-50:is(:where(.group):hover *){background-color:var(--color-gray-50)}}.last\\:border-b-0:last-child{border-bottom-style:var(--tw-border-style);border-bottom-width:0}.focus-within\\:border-blue-500:focus-within{border-color:var(--color-blue-500)}.focus-within\\:ring-1:focus-within{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(1px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus-within\\:ring-blue-500:focus-within{--tw-ring-color:var(--color-blue-500)}@media(hover:hover){.hover\\:z-10:hover{z-index:10}.hover\\:scale-150:hover{--tw-scale-x:150%;--tw-scale-y:150%;--tw-scale-z:150%;scale:var(--tw-scale-x)var(--tw-scale-y)}.hover\\:border-gray-200:hover{border-color:var(--color-gray-200)}.hover\\:border-gray-400:hover{border-color:var(--color-gray-400)}.hover\\:bg-blue-50:hover{background-color:var(--color-blue-50)}.hover\\:bg-blue-700:hover{background-color:var(--color-blue-700)}.hover\\:bg-gray-50:hover{background-color:var(--color-gray-50)}.hover\\:bg-gray-100:hover{background-color:var(--color-gray-100)}.hover\\:bg-gray-200:hover{background-color:var(--color-gray-200)}.hover\\:bg-gray-700:hover{background-color:var(--color-gray-700)}.hover\\:bg-green-700:hover{background-color:var(--color-green-700)}.hover\\:text-blue-800:hover{color:var(--color-blue-800)}.hover\\:text-gray-600:hover{color:var(--color-gray-600)}.hover\\:text-gray-700:hover{color:var(--color-gray-700)}.hover\\:text-gray-800:hover{color:var(--color-gray-800)}.hover\\:underline:hover{text-decoration-line:underline}.hover\\:opacity-100:hover{opacity:1}.hover\\:shadow-md:hover{--tw-shadow:0 4px 6px -1px var(--tw-shadow-color,#0000001a),0 2px 4px -2px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}}.focus\\:border-blue-500:focus{border-color:var(--color-blue-500)}.focus\\:ring-0:focus{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(0px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus\\:ring-1:focus{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(1px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus\\:ring-2:focus{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus\\:ring-blue-500:focus{--tw-ring-color:var(--color-blue-500)}.focus\\:outline-none:focus{--tw-outline-style:none;outline-style:none}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\:opacity-50:disabled{opacity:.5}@media(min-width:40rem){.sm\\:block{display:block}.sm\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.sm\\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.sm\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.sm\\:p-4{padding:calc(var(--spacing)*4)}.sm\\:px-4{padding-inline:calc(var(--spacing)*4)}.sm\\:py-4{padding-block:calc(var(--spacing)*4)}}@media(min-width:64rem){.lg\\:sticky{position:sticky}.lg\\:hidden{display:none}.lg\\:translate-x-0{--tw-translate-x:calc(var(--spacing)*0);translate:var(--tw-translate-x)var(--tw-translate-y)}.lg\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.lg\\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.lg\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.lg\\:grid-cols-5{grid-template-columns:repeat(5,minmax(0,1fr))}.lg\\:gap-6{gap:calc(var(--spacing)*6)}.lg\\:p-6{padding:calc(var(--spacing)*6)}.lg\\:px-6{padding-inline:calc(var(--spacing)*6)}}}body.local-rtbdashboard-plugin .main-inner{max-width:100%!important;margin-top:0!important;padding:0!important}body.local-rtbdashboard-plugin #page-header *{display:none!important}body.local-rtbdashboard-plugin #page-header{margin:10px 0 0;padding:0!important}@property --tw-translate-x{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-y{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-z{syntax:"*";inherits:false;initial-value:0}@property --tw-rotate-x{syntax:"*";inherits:false}@property --tw-rotate-y{syntax:"*";inherits:false}@property --tw-rotate-z{syntax:"*";inherits:false}@property --tw-skew-x{syntax:"*";inherits:false}@property --tw-skew-y{syntax:"*";inherits:false}@property --tw-space-y-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-gradient-position{syntax:"*";inherits:false}@property --tw-gradient-from{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-via{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-to{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-stops{syntax:"*";inherits:false}@property --tw-gradient-via-stops{syntax:"*";inherits:false}@property --tw-gradient-from-position{syntax:"<length-percentage>";inherits:false;initial-value:0%}@property --tw-gradient-via-position{syntax:"<length-percentage>";inherits:false;initial-value:50%}@property --tw-gradient-to-position{syntax:"<length-percentage>";inherits:false;initial-value:100%}@property --tw-leading{syntax:"*";inherits:false}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-tracking{syntax:"*";inherits:false}@property --tw-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:"*";inherits:false}@property --tw-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:"*";inherits:false}@property --tw-inset-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:"*";inherits:false}@property --tw-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:"*";inherits:false}@property --tw-inset-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:"*";inherits:false}@property --tw-ring-offset-width{syntax:"<length>";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:"*";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-blur{syntax:"*";inherits:false}@property --tw-brightness{syntax:"*";inherits:false}@property --tw-contrast{syntax:"*";inherits:false}@property --tw-grayscale{syntax:"*";inherits:false}@property --tw-hue-rotate{syntax:"*";inherits:false}@property --tw-invert{syntax:"*";inherits:false}@property --tw-opacity{syntax:"*";inherits:false}@property --tw-saturate{syntax:"*";inherits:false}@property --tw-sepia{syntax:"*";inherits:false}@property --tw-drop-shadow{syntax:"*";inherits:false}@property --tw-drop-shadow-color{syntax:"*";inherits:false}@property --tw-drop-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-drop-shadow-size{syntax:"*";inherits:false}@property --tw-duration{syntax:"*";inherits:false}@property --tw-ease{syntax:"*";inherits:false}@property --tw-scale-x{syntax:"*";inherits:false;initial-value:1}@property --tw-scale-y{syntax:"*";inherits:false;initial-value:1}@property --tw-scale-z{syntax:"*";inherits:false;initial-value:1}@keyframes spin{to{transform:rotate(360deg)}}@keyframes pulse{50%{opacity:.5}}
/*$vite$:1*/`,document.head.appendChild(Ue);var de,M,Ee,ee,Pe,Ie,Be,Ve,Ne,ke,Se,ie={},Fe=[],Rt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,he=Array.isArray;function Q(t,a){for(var r in a)t[r]=a[r];return t}function Ce(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function We(t,a,r){var l,o,n,c={};for(n in a)n=="key"?l=a[n]:n=="ref"?o=a[n]:c[n]=a[n];if(arguments.length>2&&(c.children=arguments.length>3?de.call(arguments,2):r),typeof t=="function"&&t.defaultProps!=null)for(n in t.defaultProps)c[n]===void 0&&(c[n]=t.defaultProps[n]);return ge(t,c,l,o,null)}function ge(t,a,r,l,o){var n={type:t,props:a,key:r,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++Ee,__i:-1,__u:0};return o==null&&M.vnode!=null&&M.vnode(n),n}function B(t){return t.children}function me(t,a){this.props=t,this.context=a}function re(t,a){if(a==null)return t.__?re(t.__,t.__i+1):null;for(var r;a<t.__k.length;a++)if((r=t.__k[a])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?re(t):null}function Oe(t){var a,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,a=0;a<t.__k.length;a++)if((r=t.__k[a])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return Oe(t)}}function qe(t){(!t.__d&&(t.__d=!0)&&ee.push(t)&&!pe.__r++||Pe!=M.debounceRendering)&&((Pe=M.debounceRendering)||Ie)(pe)}function pe(){for(var t,a,r,l,o,n,c,h=1;ee.length;)ee.length>h&&ee.sort(Be),t=ee.shift(),h=ee.length,t.__d&&(r=void 0,l=void 0,o=(l=(a=t).__v).__e,n=[],c=[],a.__P&&((r=Q({},l)).__v=l.__v+1,M.vnode&&M.vnode(r),ze(a.__P,r,l,a.__n,a.__P.namespaceURI,32&l.__u?[o]:null,n,o??re(l),!!(32&l.__u),c),r.__v=l.__v,r.__.__k[r.__i]=r,Qe(n,r,c),l.__e=l.__=null,r.__e!=o&&Oe(r)));pe.__r=0}function Ge(t,a,r,l,o,n,c,h,g,i,p){var s,u,d,m,v,w,N,k=l&&l.__k||Fe,z=a.length;for(g=Lt(r,a,k,g,z),s=0;s<z;s++)(d=r.__k[s])!=null&&(u=d.__i==-1?ie:k[d.__i]||ie,d.__i=s,w=ze(t,d,u,o,n,c,h,g,i,p),m=d.__e,d.ref&&u.ref!=d.ref&&(u.ref&&Le(u.ref,null,d),p.push(d.ref,d.__c||m,d)),v==null&&m!=null&&(v=m),(N=!!(4&d.__u))||u.__k===d.__k?g=Ke(d,g,t,N):typeof d.type=="function"&&w!==void 0?g=w:m&&(g=m.nextSibling),d.__u&=-7);return r.__e=v,g}function Lt(t,a,r,l,o){var n,c,h,g,i,p=r.length,s=p,u=0;for(t.__k=new Array(o),n=0;n<o;n++)(c=a[n])!=null&&typeof c!="boolean"&&typeof c!="function"?(g=n+u,(c=t.__k[n]=typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?ge(null,c,null,null,null):he(c)?ge(B,{children:c},null,null,null):c.constructor==null&&c.__b>0?ge(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c).__=t,c.__b=t.__b+1,h=null,(i=c.__i=Mt(c,r,g,s))!=-1&&(s--,(h=r[i])&&(h.__u|=2)),h==null||h.__v==null?(i==-1&&(o>p?u--:o<p&&u++),typeof c.type!="function"&&(c.__u|=4)):i!=g&&(i==g-1?u--:i==g+1?u++:(i>g?u--:u++,c.__u|=4))):t.__k[n]=null;if(s)for(n=0;n<p;n++)(h=r[n])!=null&&(2&h.__u)==0&&(h.__e==l&&(l=re(h)),Xe(h,h));return l}function Ke(t,a,r,l){var o,n;if(typeof t.type=="function"){for(o=t.__k,n=0;o&&n<o.length;n++)o[n]&&(o[n].__=t,a=Ke(o[n],a,r,l));return a}t.__e!=a&&(l&&(a&&t.type&&!a.parentNode&&(a=re(t)),r.insertBefore(t.__e,a||null)),a=t.__e);do a=a&&a.nextSibling;while(a!=null&&a.nodeType==8);return a}function Mt(t,a,r,l){var o,n,c,h=t.key,g=t.type,i=a[r],p=i!=null&&(2&i.__u)==0;if(i===null&&t.key==null||p&&h==i.key&&g==i.type)return r;if(l>(p?1:0)){for(o=r-1,n=r+1;o>=0||n<a.length;)if((i=a[c=o>=0?o--:n++])!=null&&(2&i.__u)==0&&h==i.key&&g==i.type)return c}return-1}function Je(t,a,r){a[0]=="-"?t.setProperty(a,r??""):t[a]=r==null?"":typeof r!="number"||Rt.test(a)?r:r+"px"}function ue(t,a,r,l,o){var n,c;e:if(a=="style")if(typeof r=="string")t.style.cssText=r;else{if(typeof l=="string"&&(t.style.cssText=l=""),l)for(a in l)r&&a in r||Je(t.style,a,"");if(r)for(a in r)l&&r[a]==l[a]||Je(t.style,a,r[a])}else if(a[0]=="o"&&a[1]=="n")n=a!=(a=a.replace(Ve,"$1")),c=a.toLowerCase(),a=c in t||a=="onFocusOut"||a=="onFocusIn"?c.slice(2):a.slice(2),t.l||(t.l={}),t.l[a+n]=r,r?l?r.u=l.u:(r.u=Ne,t.addEventListener(a,n?Se:ke,n)):t.removeEventListener(a,n?Se:ke,n);else{if(o=="http://www.w3.org/2000/svg")a=a.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(a!="width"&&a!="height"&&a!="href"&&a!="list"&&a!="form"&&a!="tabIndex"&&a!="download"&&a!="rowSpan"&&a!="colSpan"&&a!="role"&&a!="popover"&&a in t)try{t[a]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&a[4]!="-"?t.removeAttribute(a):t.setAttribute(a,a=="popover"&&r==1?"":r))}}function Ye(t){return function(a){if(this.l){var r=this.l[a.type+t];if(a.t==null)a.t=Ne++;else if(a.t<r.u)return;return r(M.event?M.event(a):a)}}}function ze(t,a,r,l,o,n,c,h,g,i){var p,s,u,d,m,v,w,N,k,z,$,E,A,I,C,x,_,L=a.type;if(a.constructor!=null)return null;128&r.__u&&(g=!!(32&r.__u),n=[h=a.__e=r.__e]),(p=M.__b)&&p(a);e:if(typeof L=="function")try{if(N=a.props,k="prototype"in L&&L.prototype.render,z=(p=L.contextType)&&l[p.__c],$=p?z?z.props.value:p.__:l,r.__c?w=(s=a.__c=r.__c).__=s.__E:(k?a.__c=s=new L(N,$):(a.__c=s=new me(N,$),s.constructor=L,s.render=At),z&&z.sub(s),s.props=N,s.state||(s.state={}),s.context=$,s.__n=l,u=s.__d=!0,s.__h=[],s._sb=[]),k&&s.__s==null&&(s.__s=s.state),k&&L.getDerivedStateFromProps!=null&&(s.__s==s.state&&(s.__s=Q({},s.__s)),Q(s.__s,L.getDerivedStateFromProps(N,s.__s))),d=s.props,m=s.state,s.__v=a,u)k&&L.getDerivedStateFromProps==null&&s.componentWillMount!=null&&s.componentWillMount(),k&&s.componentDidMount!=null&&s.__h.push(s.componentDidMount);else{if(k&&L.getDerivedStateFromProps==null&&N!==d&&s.componentWillReceiveProps!=null&&s.componentWillReceiveProps(N,$),!s.__e&&s.shouldComponentUpdate!=null&&s.shouldComponentUpdate(N,s.__s,$)===!1||a.__v==r.__v){for(a.__v!=r.__v&&(s.props=N,s.state=s.__s,s.__d=!1),a.__e=r.__e,a.__k=r.__k,a.__k.some(function(b){b&&(b.__=a)}),E=0;E<s._sb.length;E++)s.__h.push(s._sb[E]);s._sb=[],s.__h.length&&c.push(s);break e}s.componentWillUpdate!=null&&s.componentWillUpdate(N,s.__s,$),k&&s.componentDidUpdate!=null&&s.__h.push(function(){s.componentDidUpdate(d,m,v)})}if(s.context=$,s.props=N,s.__P=t,s.__e=!1,A=M.__r,I=0,k){for(s.state=s.__s,s.__d=!1,A&&A(a),p=s.render(s.props,s.state,s.context),C=0;C<s._sb.length;C++)s.__h.push(s._sb[C]);s._sb=[]}else do s.__d=!1,A&&A(a),p=s.render(s.props,s.state,s.context),s.state=s.__s;while(s.__d&&++I<25);s.state=s.__s,s.getChildContext!=null&&(l=Q(Q({},l),s.getChildContext())),k&&!u&&s.getSnapshotBeforeUpdate!=null&&(v=s.getSnapshotBeforeUpdate(d,m)),x=p,p!=null&&p.type===B&&p.key==null&&(x=Ze(p.props.children)),h=Ge(t,he(x)?x:[x],a,r,l,o,n,c,h,g,i),s.base=a.__e,a.__u&=-161,s.__h.length&&c.push(s),w&&(s.__E=s.__=null)}catch(b){if(a.__v=null,g||n!=null)if(b.then){for(a.__u|=g?160:128;h&&h.nodeType==8&&h.nextSibling;)h=h.nextSibling;n[n.indexOf(h)]=null,a.__e=h}else{for(_=n.length;_--;)Ce(n[_]);Re(a)}else a.__e=r.__e,a.__k=r.__k,b.then||Re(a);M.__e(b,a,r)}else n==null&&a.__v==r.__v?(a.__k=r.__k,a.__e=r.__e):h=a.__e=$t(r.__e,a,r,l,o,n,c,g,i);return(p=M.diffed)&&p(a),128&a.__u?void 0:h}function Re(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(Re)}function Qe(t,a,r){for(var l=0;l<r.length;l++)Le(r[l],r[++l],r[++l]);M.__c&&M.__c(a,t),t.some(function(o){try{t=o.__h,o.__h=[],t.some(function(n){n.call(o)})}catch(n){M.__e(n,o.__v)}})}function Ze(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:he(t)?t.map(Ze):Q({},t)}function $t(t,a,r,l,o,n,c,h,g){var i,p,s,u,d,m,v,w=r.props,N=a.props,k=a.type;if(k=="svg"?o="http://www.w3.org/2000/svg":k=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),n!=null){for(i=0;i<n.length;i++)if((d=n[i])&&"setAttribute"in d==!!k&&(k?d.localName==k:d.nodeType==3)){t=d,n[i]=null;break}}if(t==null){if(k==null)return document.createTextNode(N);t=document.createElementNS(o,k,N.is&&N),h&&(M.__m&&M.__m(a,n),h=!1),n=null}if(k==null)w===N||h&&t.data==N||(t.data=N);else{if(n=n&&de.call(t.childNodes),w=r.props||ie,!h&&n!=null)for(w={},i=0;i<t.attributes.length;i++)w[(d=t.attributes[i]).name]=d.value;for(i in w)if(d=w[i],i!="children"){if(i=="dangerouslySetInnerHTML")s=d;else if(!(i in N)){if(i=="value"&&"defaultValue"in N||i=="checked"&&"defaultChecked"in N)continue;ue(t,i,null,d,o)}}for(i in N)d=N[i],i=="children"?u=d:i=="dangerouslySetInnerHTML"?p=d:i=="value"?m=d:i=="checked"?v=d:h&&typeof d!="function"||w[i]===d||ue(t,i,d,w[i],o);if(p)h||s&&(p.__html==s.__html||p.__html==t.innerHTML)||(t.innerHTML=p.__html),a.__k=[];else if(s&&(t.innerHTML=""),Ge(a.type=="template"?t.content:t,he(u)?u:[u],a,r,l,k=="foreignObject"?"http://www.w3.org/1999/xhtml":o,n,c,n?n[0]:r.__k&&re(r,0),h,g),n!=null)for(i=n.length;i--;)Ce(n[i]);h||(i="value",k=="progress"&&m==null?t.removeAttribute("value"):m!=null&&(m!==t[i]||k=="progress"&&!m||k=="option"&&m!=w[i])&&ue(t,i,m,w[i],o),i="checked",v!=null&&v!=t[i]&&ue(t,i,v,w[i],o))}return t}function Le(t,a,r){try{if(typeof t=="function"){var l=typeof t.__u=="function";l&&t.__u(),l&&a==null||(t.__u=t(a))}else t.current=a}catch(o){M.__e(o,r)}}function Xe(t,a,r){var l,o;if(M.unmount&&M.unmount(t),(l=t.ref)&&(l.current&&l.current!=t.__e||Le(l,null,a)),(l=t.__c)!=null){if(l.componentWillUnmount)try{l.componentWillUnmount()}catch(n){M.__e(n,a)}l.base=l.__P=null}if(l=t.__k)for(o=0;o<l.length;o++)l[o]&&Xe(l[o],a,r||typeof t.type!="function");r||Ce(t.__e),t.__c=t.__=t.__e=void 0}function At(t,a,r){return this.constructor(t,r)}function Dt(t,a,r){var l,o,n,c;a==document&&(a=document.documentElement),M.__&&M.__(t,a),o=(l=!1)?null:a.__k,n=[],c=[],ze(a,t=a.__k=We(B,null,[t]),o||ie,ie,a.namespaceURI,o?null:a.firstChild?de.call(a.childNodes):null,n,o?o.__e:a.firstChild,l,c),Qe(n,t,c)}de=Fe.slice,M={__e:function(t,a,r,l){for(var o,n,c;a=a.__;)if((o=a.__c)&&!o.__)try{if((n=o.constructor)&&n.getDerivedStateFromError!=null&&(o.setState(n.getDerivedStateFromError(t)),c=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(t,l||{}),c=o.__d),c)return o.__E=o}catch(h){t=h}throw t}},Ee=0,me.prototype.setState=function(t,a){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Q({},this.state),typeof t=="function"&&(t=t(Q({},r),this.props)),t&&Q(r,t),t!=null&&this.__v&&(a&&this._sb.push(a),qe(this))},me.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),qe(this))},me.prototype.render=B,ee=[],Ie=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Be=function(t,a){return t.__v.__b-a.__v.__b},pe.__r=0,Ve=/(PointerCapture)$|Capture$/i,Ne=0,ke=Ye(!1),Se=Ye(!0);var Tt=0;function e(t,a,r,l,o,n){a||(a={});var c,h,g=a;if("ref"in g)for(h in g={},a)h=="ref"?c=a[h]:g[h]=a[h];var i={type:t,props:g,key:r,ref:c,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Tt,__i:-1,__u:0,__source:o,__self:n};if(typeof t=="function"&&(c=t.defaultProps))for(h in c)g[h]===void 0&&(g[h]=c[h]);return M.vnode&&M.vnode(i),i}var se,H,Me,et,ve=0,tt=[],U=M,at=U.__b,rt=U.__r,lt=U.diffed,ot=U.__c,nt=U.unmount,it=U.__;function $e(t,a){U.__h&&U.__h(H,t,ve||a),ve=0;var r=H.__H||(H.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({}),r.__[t]}function f(t){return ve=1,jt(ht,t)}function jt(t,a,r){var l=$e(se++,2);if(l.t=t,!l.__c&&(l.__=[ht(void 0,a),function(h){var g=l.__N?l.__N[0]:l.__[0],i=l.t(g,h);g!==i&&(l.__N=[i,l.__[1]],l.__c.setState({}))}],l.__c=H,!H.__f)){var o=function(h,g,i){if(!l.__c.__H)return!0;var p=l.__c.__H.__.filter(function(u){return!!u.__c});if(p.every(function(u){return!u.__N}))return!n||n.call(this,h,g,i);var s=l.__c.props!==h;return p.forEach(function(u){if(u.__N){var d=u.__[0];u.__=u.__N,u.__N=void 0,d!==u.__[0]&&(s=!0)}}),n&&n.call(this,h,g,i)||s};H.__f=!0;var n=H.shouldComponentUpdate,c=H.componentWillUpdate;H.componentWillUpdate=function(h,g,i){if(this.__e){var p=n;n=void 0,o(h,g,i),n=p}c&&c.call(this,h,g,i)},H.shouldComponentUpdate=o}return l.__N||l.__}function G(t,a){var r=$e(se++,3);!U.__s&&dt(r.__H,a)&&(r.__=t,r.u=a,H.__H.__h.push(r))}function Ae(t){return ve=5,st(function(){return{current:t}},[])}function st(t,a){var r=$e(se++,7);return dt(r.__H,a)&&(r.__=t(),r.__H=a,r.__h=t),r.__}function Ht(){for(var t;t=tt.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(fe),t.__H.__h.forEach(De),t.__H.__h=[]}catch(a){t.__H.__h=[],U.__e(a,t.__v)}}U.__b=function(t){H=null,at&&at(t)},U.__=function(t,a){t&&a.__k&&a.__k.__m&&(t.__m=a.__k.__m),it&&it(t,a)},U.__r=function(t){rt&&rt(t),se=0;var a=(H=t.__c).__H;a&&(Me===H?(a.__h=[],H.__h=[],a.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(a.__h.forEach(fe),a.__h.forEach(De),a.__h=[],se=0)),Me=H},U.diffed=function(t){lt&&lt(t);var a=t.__c;a&&a.__H&&(a.__H.__h.length&&(tt.push(a)!==1&&et===U.requestAnimationFrame||((et=U.requestAnimationFrame)||Ut)(Ht)),a.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),Me=H=null},U.__c=function(t,a){a.some(function(r){try{r.__h.forEach(fe),r.__h=r.__h.filter(function(l){return!l.__||De(l)})}catch(l){a.some(function(o){o.__h&&(o.__h=[])}),a=[],U.__e(l,r.__v)}}),ot&&ot(t,a)},U.unmount=function(t){nt&&nt(t);var a,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(l){try{fe(l)}catch(o){a=o}}),r.__H=void 0,a&&U.__e(a,r.__v))};var ct=typeof requestAnimationFrame=="function";function Ut(t){var a,r=function(){clearTimeout(l),ct&&cancelAnimationFrame(a),setTimeout(t)},l=setTimeout(r,35);ct&&(a=requestAnimationFrame(r))}function fe(t){var a=H,r=t.__c;typeof r=="function"&&(t.__c=void 0,r()),H=a}function De(t){var a=H;t.__c=t.__(),H=a}function dt(t,a){return!t||t.length!==a.length||a.some(function(r,l){return r!==t[l]})}function ht(t,a){return typeof a=="function"?a(t):a}function gt(t,a){return new Promise((r,l)=>{X(["core/ajax"],o=>{o.call([{methodname:t,args:a}])[0].then(r).catch(l)})})}function ce({icon:t,value:a,label:r,customBgColor:l}){return e("div",{className:"rounded-xl p-4 flex items-center gap-4",style:l?{backgroundColor:l}:void 0,children:[e("div",{className:"w-12 h-12 rounded-full bg-white/30 flex items-center justify-center",children:t}),e("div",{children:[e("p",{className:"text-xs text-gray-600 font-medium",children:r}),e("p",{className:"text-xl font-bold text-gray-800",children:a})]})]})}function Et({activeThisWeek:t,atRisk:a,neverLoggedIn:r}){const l=t+a+r;if(l===0)return e("div",{className:"relative w-36 h-36",children:[e("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:e("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#e5e7eb",strokeWidth:"14"})}),e("div",{className:"absolute inset-0 flex items-center justify-center",children:e("span",{className:"text-2xl font-bold text-gray-400",children:"0"})})]});const o=2*Math.PI*40,n=t/l*o,c=a/l*o,h=r/l*o;return e("div",{className:"relative w-36 h-36",children:[e("svg",{viewBox:"0 0 100 100",className:"w-full h-full transform -rotate-90",children:[e("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#e5e7eb",strokeWidth:"14"}),e("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#22c55e",strokeWidth:"14",strokeDasharray:`${n} ${o-n}`,strokeDashoffset:"0"}),e("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#f59e0b",strokeWidth:"14",strokeDasharray:`${c} ${o-c}`,strokeDashoffset:`${-n}`}),e("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#ef4444",strokeWidth:"14",strokeDasharray:`${h} ${o-h}`,strokeDashoffset:`${-(n+c)}`})]}),e("div",{className:"absolute inset-0 flex items-center justify-center",children:e("span",{className:"text-2xl font-bold text-gray-800",children:l})})]})}function mt({male:t,female:a}){const r=t+a;if(r===0)return e("div",{className:"relative w-36 h-36",children:[e("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:e("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#e5e7eb",strokeWidth:"14"})}),e("div",{className:"absolute inset-0 flex items-center justify-center",children:e("span",{className:"text-2xl font-bold text-gray-400",children:"0"})})]});const l=2*Math.PI*40,o=t/r*l,n=a/r*l;return e("div",{className:"relative w-36 h-36",children:[e("svg",{viewBox:"0 0 100 100",className:"w-full h-full transform -rotate-90",children:[e("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#e5e7eb",strokeWidth:"14"}),e("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#3b82f6",strokeWidth:"14",strokeDasharray:`${o} ${l-o}`,strokeDashoffset:"0"}),e("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#ec4899",strokeWidth:"14",strokeDasharray:`${n} ${l-n}`,strokeDashoffset:`${-o}`})]}),e("div",{className:"absolute inset-0 flex items-center justify-center",children:e("span",{className:"text-2xl font-bold text-gray-800",children:r})})]})}const Pt=()=>e("svg",{className:"w-6 h-6 text-cyan-600",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"})}),It=()=>e("svg",{className:"w-6 h-6 text-amber-600",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z"})}),Bt=()=>e("svg",{className:"w-6 h-6 text-purple-600",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),Vt=()=>e("svg",{className:"w-6 h-6 text-green-600",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9H9V9h10v2zm-4 4H9v-2h6v2zm4-8H9V5h10v2z"})}),Ft=()=>e("svg",{className:"w-6 h-6 text-blue-600",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z"})}),pt={CONTINUING:"#22c55e",NEW:"#3b82f6",INACTIVE:"#9ca3af",GRADUATED:"#8b5cf6",TRANSFERRED:"#f59e0b"};function Wt({data:t}){const a=t.reduce((o,n)=>o+n.count,0);if(a===0)return e("div",{className:"relative w-28 h-28",children:[e("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:e("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#e5e7eb",strokeWidth:"14"})}),e("div",{className:"absolute inset-0 flex items-center justify-center",children:e("span",{className:"text-lg font-bold text-gray-400",children:"0"})})]});const r=2*Math.PI*40;let l=0;return e("div",{className:"relative w-28 h-28",children:[e("svg",{viewBox:"0 0 100 100",className:"w-full h-full transform -rotate-90",children:[e("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#e5e7eb",strokeWidth:"14"}),t.map(o=>{const n=o.count/a*r,c=l;return l+=n,e("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:pt[o.label]||"#6b7280",strokeWidth:"14",strokeDasharray:`${n} ${r-n}`,strokeDashoffset:`${-c}`},o.label)})]}),e("div",{className:"absolute inset-0 flex items-center justify-center",children:e("span",{className:"text-lg font-bold text-gray-800",children:a.toLocaleString()})})]})}function Ot({user:t,stats:a,themeConfig:r}){const[l,o]=f([]),[n,c]=f(!0),[h,g]=f([]),[i,p]=f(!0);G(()=>{gt("local_elby_dashboard_get_school_user_counts",{}).then(d=>{const v=[...d.schools||[]].sort((w,N)=>N.student_count-w.student_count).slice(0,8);o(v)}).catch(()=>o([])).finally(()=>c(!1)),gt("local_elby_dashboard_get_platform_traffic",{period:"daily",days_back:7}).then(d=>g(d.data||[])).catch(()=>g([])).finally(()=>p(!1))},[]);const s=l.length>0?Math.max(...l.map(d=>d.student_count)):1,u=h.length>0?Math.max(...h.map(d=>d.unique_users),1):1;return e("div",{className:"p-2 sm:p-4 lg:p-6 bg-gray-50 min-h-screen",children:[e("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[e(ce,{icon:e(Ft,{}),value:a.totalSchools.toLocaleString(),label:"Schools",customBgColor:"#dbeafe"}),e(ce,{icon:e(Pt,{}),value:a.totalStudents.toLocaleString(),label:"Students",customBgColor:r.statCard1Color}),e(ce,{icon:e(It,{}),value:a.totalTeachers.toLocaleString(),label:"Teachers",customBgColor:r.statCard2Color}),e(ce,{icon:e(Bt,{}),value:a.totalUsers.toLocaleString(),label:"Total Users",customBgColor:r.statCard3Color}),e(ce,{icon:e(Vt,{}),value:a.totalCourses.toLocaleString(),label:"Courses",customBgColor:r.statCard4Color})]}),e("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("div",{className:"flex items-center justify-between mb-4",children:[e("h3",{className:"text-lg font-semibold text-gray-800",children:"Schools Overview"}),e("span",{className:"text-sm text-gray-500",children:["Top ",l.length," by students"]})]}),n?e("div",{className:"space-y-3",children:[...Array(5)].map((d,m)=>e("div",{className:"h-6 bg-gray-100 rounded animate-pulse"},m))}):l.length===0?e("div",{className:"text-center py-8 text-gray-500",children:e("p",{children:"No school data available"})}):e("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:l.map(d=>e("div",{className:"flex items-center gap-3",children:[e("div",{className:"w-28 text-xs text-gray-600 truncate flex-shrink-0",title:d.school_name,children:d.school_name}),e("div",{className:"flex-1 h-6 bg-gray-100 rounded-full overflow-hidden",children:e("div",{className:"h-full bg-blue-500 rounded-full transition-all opacity-80 hover:opacity-100",style:{width:`${d.student_count/s*100}%`}})}),e("span",{className:"text-xs font-medium text-gray-700 w-10 text-right flex-shrink-0",children:d.student_count})]},d.school_code))})]}),e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"User Overview"}),e("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e("div",{children:[e("h4",{className:"text-sm font-medium text-gray-600 mb-3",children:"Student Demographics"}),e("div",{className:"flex flex-col items-center gap-3",children:[e(mt,{male:a.maleStudents,female:a.femaleStudents}),e("div",{className:"flex items-center gap-3 flex-wrap justify-center",children:[e("div",{className:"flex items-center gap-1.5",children:[e("span",{className:"w-2.5 h-2.5 rounded-full bg-blue-500"}),e("span",{className:"text-xs text-gray-600",children:["Male: ",a.maleStudents.toLocaleString()]})]}),e("div",{className:"flex items-center gap-1.5",children:[e("span",{className:"w-2.5 h-2.5 rounded-full bg-pink-500"}),e("span",{className:"text-xs text-gray-600",children:["Female: ",a.femaleStudents.toLocaleString()]})]})]})]})]}),e("div",{children:[e("h4",{className:"text-sm font-medium text-gray-600 mb-3",children:"Engagement Status"}),e("div",{className:"flex flex-col items-center gap-3",children:[e(Et,{activeThisWeek:a.activeThisWeek,atRisk:a.atRisk,neverLoggedIn:a.neverLoggedIn}),e("div",{className:"flex items-center gap-3 flex-wrap justify-center",children:[e("div",{className:"flex items-center gap-1.5",children:[e("span",{className:"w-2.5 h-2.5 rounded-full bg-green-500"}),e("span",{className:"text-xs text-gray-500",children:"Active"})]}),e("div",{className:"flex items-center gap-1.5",children:[e("span",{className:"w-2.5 h-2.5 rounded-full bg-amber-500"}),e("span",{className:"text-xs text-gray-500",children:"At Risk"})]}),e("div",{className:"flex items-center gap-1.5",children:[e("span",{className:"w-2.5 h-2.5 rounded-full bg-red-500"}),e("span",{className:"text-xs text-gray-500",children:"Never"})]})]})]})]})]}),e("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mt-4 pt-4 border-t border-gray-100",children:[e("div",{className:"bg-emerald-50 rounded-lg p-3",children:[e("p",{className:"text-xs text-gray-500",children:"Active Today"}),e("p",{className:"text-lg font-bold text-emerald-700",children:a.activeToday.toLocaleString()})]}),e("div",{className:"bg-green-50 rounded-lg p-3",children:[e("p",{className:"text-xs text-gray-500",children:"Active This Week"}),e("p",{className:"text-lg font-bold text-green-700",children:a.activeThisWeek.toLocaleString()})]}),e("div",{className:"bg-amber-50 rounded-lg p-3",children:[e("p",{className:"text-xs text-gray-500",children:"At Risk"}),e("p",{className:"text-lg font-bold text-amber-700",children:a.atRisk.toLocaleString()})]}),e("div",{className:"bg-red-50 rounded-lg p-3",children:[e("p",{className:"text-xs text-gray-500",children:"Never Logged In"}),e("p",{className:"text-lg font-bold text-red-700",children:a.neverLoggedIn.toLocaleString()})]})]})]})]}),e("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("div",{className:"flex items-center justify-between mb-4",children:[e("h3",{className:"text-lg font-semibold text-gray-800",children:"Students by Grade Level"}),e("span",{className:"text-sm text-gray-500",children:[a.gradeDistribution.reduce((d,m)=>d+m.count,0).toLocaleString()," total"]})]}),a.gradeDistribution.length===0?e("div",{className:"text-center py-8 text-gray-500",children:e("p",{children:"No grade data available yet"})}):e("div",{className:"flex flex-col",style:{gap:"16px"},children:(()=>{const d=Math.max(...a.gradeDistribution.map(m=>m.count),1);return a.gradeDistribution.map(m=>e("div",{className:"flex items-center gap-3",children:[e("div",{className:"w-20 text-xs text-gray-600 truncate flex-shrink-0",title:m.label,children:m.label}),e("div",{className:"flex-1 bg-gray-100 rounded-full overflow-hidden",style:{height:"20px"},children:e("div",{className:"h-full bg-indigo-500 rounded-full transition-all opacity-80 hover:opacity-100",style:{width:`${m.count/d*100}%`}})}),e("span",{className:"text-xs font-medium text-gray-700 w-12 text-right flex-shrink-0",children:m.count.toLocaleString()})]},m.label))})()})]}),e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("div",{className:"flex items-center justify-between mb-4",children:[e("h3",{className:"text-lg font-semibold text-gray-800",children:"Students by Trade"}),e("span",{className:"text-sm text-gray-500",children:["Top ",a.programDistribution.length]})]}),a.programDistribution.length===0?e("div",{className:"text-center py-8 text-gray-500",children:e("p",{children:"No program data available yet"})}):e("div",{className:"space-y-3",children:(()=>{const d=Math.max(...a.programDistribution.map(m=>m.count),1);return a.programDistribution.map(m=>e("div",{className:"flex items-center gap-3",children:[e("div",{className:"w-28 text-xs text-gray-600 truncate flex-shrink-0",title:m.label,children:m.label}),e("div",{className:"flex-1 h-5 bg-gray-100 rounded-full overflow-hidden",children:e("div",{className:"h-full bg-teal-500 rounded-full transition-all opacity-80 hover:opacity-100",style:{width:`${m.count/d*100}%`}})}),e("span",{className:"text-xs font-medium text-gray-700 w-12 text-right flex-shrink-0",children:m.count.toLocaleString()})]},m.label))})()})]})]}),e("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Teacher Overview"}),e("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e("div",{children:[e("h4",{className:"text-sm font-medium text-gray-600 mb-3",children:"Gender"}),e("div",{className:"flex flex-col items-center gap-3",children:[e(mt,{male:a.maleTeachers,female:a.femaleTeachers}),e("div",{className:"flex items-center gap-3 flex-wrap justify-center",children:[e("div",{className:"flex items-center gap-1.5",children:[e("span",{className:"w-2.5 h-2.5 rounded-full bg-blue-500"}),e("span",{className:"text-xs text-gray-600",children:["Male: ",a.maleTeachers.toLocaleString()]})]}),e("div",{className:"flex items-center gap-1.5",children:[e("span",{className:"w-2.5 h-2.5 rounded-full bg-pink-500"}),e("span",{className:"text-xs text-gray-600",children:["Female: ",a.femaleTeachers.toLocaleString()]})]})]})]})]}),e("div",{children:[e("h4",{className:"text-sm font-medium text-gray-600 mb-3",children:"Summary"}),e("div",{className:"space-y-3",children:[e("div",{className:"bg-amber-50 rounded-lg p-3",children:[e("p",{className:"text-xs text-gray-500",children:"Total Teachers"}),e("p",{className:"text-lg font-bold text-amber-700",children:a.totalTeachers.toLocaleString()})]}),e("div",{className:"bg-blue-50 rounded-lg p-3",children:[e("p",{className:"text-xs text-gray-500",children:"Positions"}),e("p",{className:"text-lg font-bold text-blue-700",children:a.positionDistribution.length})]})]})]})]})]}),e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("div",{className:"flex items-center justify-between mb-4",children:[e("h3",{className:"text-lg font-semibold text-gray-800",children:"Teachers by Position"}),e("span",{className:"text-sm text-gray-500",children:[a.positionDistribution.reduce((d,m)=>d+m.count,0).toLocaleString()," total"]})]}),a.positionDistribution.length===0?e("div",{className:"text-center py-8 text-gray-500",children:e("p",{children:"No teacher data available yet"})}):e("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:(()=>{const d=Math.max(...a.positionDistribution.map(m=>m.count),1);return a.positionDistribution.map(m=>e("div",{className:"flex items-center gap-3",children:[e("div",{className:"w-28 text-xs text-gray-600 truncate flex-shrink-0",title:m.label,children:m.label}),e("div",{className:"flex-1 h-6 bg-gray-100 rounded-full overflow-hidden",children:e("div",{className:"h-full bg-amber-500 rounded-full transition-all opacity-80 hover:opacity-100",style:{width:`${m.count/d*100}%`}})}),e("span",{className:"text-xs font-medium text-gray-700 w-12 text-right flex-shrink-0",children:m.count.toLocaleString()})]},m.label))})()})]})]}),e("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("div",{className:"flex items-center justify-between mb-4",children:[e("h3",{className:"text-lg font-semibold text-gray-800",children:"Platform Traffic"}),e("span",{className:"text-sm text-gray-500",children:"Last 7 days"})]}),i?e("div",{className:"flex items-end justify-between h-48 gap-2 px-2",children:[...Array(7)].map((d,m)=>e("div",{className:"flex-1 bg-gray-100 rounded-t animate-pulse",style:{height:`${30+Math.random()*50}%`}},m))}):h.length===0?e("div",{className:"text-center py-8 text-gray-500",children:e("p",{children:"No traffic data available"})}):e(B,{children:[e("div",{className:"flex items-end justify-between h-48 gap-2 px-2",children:h.map(d=>e("div",{className:"flex flex-col items-center gap-1 flex-1",children:[e("span",{className:"text-xs font-medium text-gray-600",children:d.unique_users}),e("div",{className:"w-full flex justify-center",style:{height:"10rem"},children:e("div",{className:"flex items-end h-full w-full max-w-[2.5rem]",children:e("div",{className:"w-full bg-blue-500 rounded-t opacity-80 hover:opacity-100 transition-opacity",style:{height:`${d.unique_users/u*100}%`,minHeight:d.unique_users>0?"4px":"0"}})})}),e("span",{className:"text-xs text-gray-500",children:d.period_label})]},d.period_label))}),e("div",{className:"flex items-center gap-4 mt-3 pt-3 border-t border-gray-100",children:e("div",{className:"flex items-center gap-1.5",children:[e("span",{className:"w-2.5 h-2.5 rounded-full bg-blue-500"}),e("span",{className:"text-xs text-gray-500",children:"Unique Users"})]})})]})]}),e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Student Status & Age"}),e("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e("div",{children:[e("h4",{className:"text-sm font-medium text-gray-600 mb-3",children:"SDMS Status"}),e("div",{className:"flex flex-col items-center gap-3",children:[e(Wt,{data:a.statusDistribution}),e("div",{className:"flex items-center gap-2 flex-wrap justify-center",children:a.statusDistribution.map(d=>e("div",{className:"flex items-center gap-1",children:[e("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:pt[d.label]||"#6b7280"}}),e("span",{className:"text-xs text-gray-500",children:[d.label,": ",d.count.toLocaleString()]})]},d.label))})]})]}),e("div",{children:[e("h4",{className:"text-sm font-medium text-gray-600 mb-3",children:"Age Distribution"}),a.ageDistribution.length===0?e("div",{className:"text-center py-4 text-gray-500 text-sm",children:"No age data yet"}):e("div",{className:"flex flex-col",style:{gap:"12px"},children:(()=>{const d=Math.max(...a.ageDistribution.map(m=>m.count),1);return a.ageDistribution.map(m=>e("div",{className:"flex items-center gap-2",children:[e("div",{className:"w-14 text-xs text-gray-600 flex-shrink-0",children:m.label}),e("div",{className:"flex-1 bg-gray-100 rounded-full overflow-hidden",style:{height:"18px"},children:e("div",{className:"h-full bg-violet-500 rounded-full opacity-80 hover:opacity-100 transition-all",style:{width:`${m.count/d*100}%`}})}),e("span",{className:"text-xs font-medium text-gray-700 w-10 text-right flex-shrink-0",children:m.count.toLocaleString()})]},m.label))})()})]})]})]})]})]})}const qt=[{id:"home",name:"Dashboard",icon:"dashboard",url:"/local/elby_dashboard/index.php"},{id:"schools",name:"Schools",icon:"pedagogy",url:"/local/elby_dashboard/schools.php",capability:"viewreports"},{id:"students",name:"Students",icon:"communication",url:"/local/elby_dashboard/students.php",capability:"viewreports"},{id:"teachers",name:"Teachers",icon:"presence",url:"/local/elby_dashboard/teachers.php",capability:"viewreports"},{id:"traffic",name:"Traffic",icon:"event",url:"/local/elby_dashboard/traffic.php",capability:"viewreports"},{id:"accesslog",name:"Access Log",icon:"courses",url:"/local/elby_dashboard/accesslog.php",capability:"viewreports"},{id:"admin",name:"Admin Panel",icon:"settings",url:"/local/elby_dashboard/admin/index.php",capability:"admin"}],ut={dashboard:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M4 4h4v4H4V4zm6 0h4v4h-4V4zm6 0h4v4h-4V4zM4 10h4v4H4v-4zm6 0h4v4h-4v-4zm6 0h4v4h-4v-4zM4 16h4v4H4v-4zm6 0h4v4h-4v-4zm6 0h4v4h-4v-4z"})}),courses:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9H9V9h10v2zm-4 4H9v-2h6v2zm4-8H9V5h10v2z"})}),presence:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V9h14v10zM5 7V5h14v2H5zm2 4h10v2H7v-2zm0 4h7v2H7v-2z"})}),communication:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"})}),event:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"})}),payment:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"})}),pedagogy:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z"})}),message:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})}),completion:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})}),settings:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"})}),logout:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5-5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"})})},Gt=()=>e("svg",{className:"w-8 h-8",viewBox:"0 0 40 40",fill:"none",children:[e("rect",{x:"4",y:"20",width:"16",height:"16",fill:"#22d3ee",transform:"rotate(-45 12 28)"}),e("rect",{x:"20",y:"4",width:"16",height:"16",fill:"#fbbf24",transform:"rotate(-45 28 12)"})]});function Kt({activePage:t,sidenavConfig:a,themeConfig:r,isOpen:l,onClose:o}){const n=qt.filter(c=>c.id==="home"?!0:r.menuVisibility[c.id]!==!1);return e(B,{children:[l&&e("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:o}),e("aside",{className:`
                fixed lg:sticky inset-y-0 left-0 z-50 top-0
                w-72 h-screen bg-gray-50 border-r border-gray-200 py-6 pr-4 overflow-y-auto flex flex-col
                transform transition-transform duration-300 ease-in-out
                ${l?"translate-x-0":"-translate-x-full lg:translate-x-0"}
            `,children:[e("div",{className:"pl-3 pb-6 flex items-center justify-between",children:[e("div",{className:"flex items-center gap-3",children:[a.logoUrl?e("img",{src:a.logoUrl,alt:a.title,className:"w-8 h-8 object-contain"}):e(Gt,{}),e("span",{className:"text-lg font-bold text-gray-800",children:a.title})]}),e("button",{onClick:o,className:"lg:hidden p-2 mr-2 text-gray-500 hover:text-gray-700 hover:bg-gray-200 rounded-lg","aria-label":"Close menu",children:e("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e("div",{className:"mb-8 flex-1",children:[e("h6",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-4 pl-3",children:"Menu"}),e("ul",{className:"space-y-1 m-0 p-0 list-none",children:n.map(c=>{const h=c.id===t;return e("li",{children:e("a",{href:c.url,className:`flex items-center px-3 py-2 rounded text-sm transition-colors no-underline ${h?"text-white":"text-gray-700 hover:bg-gray-200"}`,style:h?{backgroundColor:r.sidenavAccentColor}:void 0,children:[e("span",{className:`w-5 mr-3 ${h?"text-white":"text-gray-500"}`,children:ut[c.icon]}),e("span",{children:c.name})]})},c.id)})})]}),e("div",{className:"mt-auto",children:[e("h6",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-4 pl-3",children:"Account"}),e("ul",{className:"space-y-1 m-0 p-0 list-none",children:e("li",{children:e("a",{href:"/login/logout.php",className:"flex items-center px-3 py-2 rounded text-sm text-gray-700 hover:bg-gray-200 no-underline transition-colors",children:[e("span",{className:"w-5 mr-3 text-gray-500",children:ut.logout}),e("span",{children:"Log out"})]})})})]})]})]})}const Jt=[{id:0,name:"All Categories"},{id:1,name:"Kigali City"},{id:2,name:"Eastern Province"},{id:3,name:"Western Province"},{id:4,name:"Northern Province"},{id:5,name:"Southern Province"}],vt=[{id:1,name:"Bicumbi",parentId:2,participants:47,units:[{average:9.2,completionRate:"95.7%"},{average:3.67,completionRate:"4.3%"},{average:2.82,completionRate:"4.3%"},{average:5,completionRate:"2.1%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"}]},{id:2,name:"Cyahinda",parentId:5,participants:101,units:[{average:8.8,completionRate:"55.4%"},{average:7.52,completionRate:"10.9%"},{average:null,completionRate:"0.0%"},{average:9.31,completionRate:"12.9%"},{average:7.81,completionRate:"5.0%"},{average:null,completionRate:"0.0%"},{average:6.52,completionRate:"4.0%"},{average:9.02,completionRate:"6.9%"}]},{id:3,name:"De La Salle Byumba",parentId:4,participants:90,units:[{average:6.7,completionRate:"93.3%"},{average:6.23,completionRate:"62.2%"},{average:5.3,completionRate:"25.6%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:5.88,completionRate:"1.1%"},{average:2.14,completionRate:"1.1%"},{average:null,completionRate:"0.0%"}]},{id:4,name:"Gacuba II",parentId:3,participants:86,units:[{average:6.6,completionRate:"84.9%"},{average:7.32,completionRate:"43.0%"},{average:0,completionRate:"1.2%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"}]},{id:5,name:"Kabarore",parentId:4,participants:93,units:[{average:9.4,completionRate:"96.8%"},{average:5.82,completionRate:"11.8%"},{average:8.75,completionRate:"1.1%"},{average:9.09,completionRate:"1.1%"},{average:.38,completionRate:"1.1%"},{average:null,completionRate:"0.0%"},{average:6.43,completionRate:"1.1%"},{average:null,completionRate:"0.0%"}]},{id:6,name:"Kirambo",parentId:3,participants:97,units:[{average:5.3,completionRate:"3.1%"},{average:null,completionRate:"0.0%"},{average:3.75,completionRate:"1.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"}]},{id:7,name:"Matimba",parentId:2,participants:44,units:[{average:9.3,completionRate:"93.2%"},{average:4.25,completionRate:"18.2%"},{average:4.38,completionRate:"6.8%"},{average:5,completionRate:"2.3%"},{average:10,completionRate:"2.3%"},{average:7.65,completionRate:"2.3%"},{average:7.14,completionRate:"2.3%"},{average:8.75,completionRate:"2.3%"}]},{id:8,name:"Mbuga",parentId:1,participants:93,units:[{average:8.5,completionRate:"92.5%"},{average:3.33,completionRate:"2.2%"},{average:10,completionRate:"1.1%"},{average:9.55,completionRate:"1.1%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"}]},{id:9,name:"Muhanga",parentId:5,participants:50,units:[{average:7.3,completionRate:"88.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"}]},{id:10,name:"Muramba",parentId:3,participants:31,units:[{average:9.7,completionRate:"100.0%"},{average:9.29,completionRate:"93.5%"},{average:7.82,completionRate:"6.5%"},{average:7.28,completionRate:"6.5%"},{average:8.75,completionRate:"6.5%"},{average:7.84,completionRate:"9.7%"},{average:7.68,completionRate:"6.5%"},{average:7.71,completionRate:"9.7%"}]},{id:11,name:"Mururu",parentId:3,participants:63,units:[{average:9.3,completionRate:"92.1%"},{average:3.33,completionRate:"1.6%"},{average:null,completionRate:"0.0%"},{average:7.12,completionRate:"4.8%"},{average:9.62,completionRate:"3.2%"},{average:8.82,completionRate:"4.8%"},{average:4.47,completionRate:"3.2%"},{average:null,completionRate:"0.0%"}]},{id:12,name:"Mwezi",parentId:4,participants:58,units:[{average:9.9,completionRate:"100.0%"},{average:9,completionRate:"89.7%"},{average:0,completionRate:"1.7%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:1.25,completionRate:"1.7%"}]},{id:13,name:"Nyamata",parentId:2,participants:89,units:[{average:7.7,completionRate:"10.1%"},{average:1.78,completionRate:"3.4%"},{average:8.78,completionRate:"53.9%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"}]},{id:14,name:"Rubengera",parentId:3,participants:51,units:[{average:6.4,completionRate:"100.0%"},{average:6.11,completionRate:"98.0%"},{average:3.44,completionRate:"3.9%"},{average:5.15,completionRate:"2.0%"},{average:3.27,completionRate:"2.0%"},{average:2.94,completionRate:"2.0%"},{average:3.93,completionRate:"2.0%"},{average:1.88,completionRate:"2.0%"}]},{id:15,name:"Save",parentId:5,participants:90,units:[{average:8.1,completionRate:"94.4%"},{average:5.84,completionRate:"18.9%"},{average:3.75,completionRate:"1.1%"},{average:4.09,completionRate:"1.1%"},{average:3.65,completionRate:"1.1%"},{average:5.88,completionRate:"2.2%"},{average:6.31,completionRate:"3.3%"},{average:6.88,completionRate:"1.1%"}]},{id:16,name:"Zaza",parentId:2,participants:114,units:[{average:8.4,completionRate:"91.2%"},{average:5.13,completionRate:"20.2%"},{average:4.38,completionRate:"0.9%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"}]}],ft={name:"Grand total",participants:1197,units:[{average:8.3,completionRate:"76.7%"},{average:6.9,completionRate:"25.2%"},{average:7.07,completionRate:"7.3%"},{average:8.12,completionRate:"2.0%"},{average:7.16,completionRate:"1.1%"},{average:7.11,completionRate:"0.9%"},{average:5.93,completionRate:"1.3%"},{average:7.5,completionRate:"1.2%"}]},xt=["U1","U2","U3","U4","U5","U6","U7","U8"];function Yt(){const[t,a]=f(0),r=t===0?vt:vt.filter(n=>n.parentId===t),o=t===0?ft:(()=>{if(r.length===0)return ft;const n=r.reduce((h,g)=>h+g.participants,0),c=xt.map((h,g)=>{const i=r.filter(u=>u.units[g].average!==null);if(i.length===0)return{average:null,completionRate:"0.0%"};const p=i.reduce((u,d)=>u+(d.units[g].average||0),0),s=r.reduce((u,d)=>{const m=parseFloat(d.units[g].completionRate);return u+(isNaN(m)?0:m)},0);return{average:Math.round(p/i.length*100)/100,completionRate:`${(s/r.length).toFixed(1)}%`}});return{name:"Grand total",participants:n,units:c}})();return e("div",{className:"p-2 sm:p-4 lg:p-6 bg-white min-h-screen",children:[e("div",{className:"mb-6",children:e("h1",{className:"text-2xl font-bold text-gray-800",children:"Overview"})}),e("div",{className:"mb-4",children:[e("label",{htmlFor:"parent-category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Category"}),e("select",{id:"parent-category",value:t,onChange:n=>a(Number(n.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 min-w-[200px] focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:Jt.map(n=>e("option",{value:n.id,children:n.name},n.id))})]}),e("div",{className:"overflow-x-auto",children:e("table",{className:"w-full text-sm",children:[e("thead",{children:e("tr",{className:"border-b border-gray-200",children:[e("th",{className:"py-3 px-2 text-left font-medium text-gray-600 w-8"}),e("th",{className:"py-3 px-2 text-left font-medium text-gray-600 min-w-[140px]",children:["Category ",e("span",{className:"text-gray-400",children:""})]}),e("th",{className:"py-3 px-2 text-center font-medium text-gray-600",children:"# of Stds"}),xt.map(n=>e(B,{children:[e("th",{className:"py-3 px-2 text-center font-medium text-gray-600",children:[n," Ave."]},`${n}-ave`),e("th",{className:"py-3 px-2 text-center font-medium text-gray-600",children:[n," CR"]},`${n}-cr`)]}))]})}),e("tbody",{children:[r.map((n,c)=>e("tr",{className:c%2===0?"bg-sky-50":"bg-white",children:[e("td",{className:"py-2 px-2 text-gray-500",children:[c+1,"."]}),e("td",{className:"py-2 px-2 text-gray-800",children:n.name}),e("td",{className:"py-2 px-2 text-center text-gray-600",children:n.participants}),n.units.map((h,g)=>e(B,{children:[e("td",{className:"py-2 px-2 text-center text-gray-600",children:h.average!==null?h.average:"-"},`ave-${g}`),e("td",{className:"py-2 px-2 text-center text-gray-600",children:h.completionRate},`cr-${g}`)]}))]},n.id)),e("tr",{className:"bg-white border-t border-gray-300",children:[e("td",{className:"py-2 px-2"}),e("td",{className:"py-2 px-2 font-semibold text-gray-800",children:o.name}),e("td",{className:"py-2 px-2 text-center font-semibold text-gray-800",children:o.participants>=1e3?`${(o.participants/1e3).toFixed(1)}K`:o.participants}),o.units.map((n,c)=>e(B,{children:[e("td",{className:"py-2 px-2 text-center font-semibold text-gray-800",children:n.average!==null?n.average:"-"},`total-ave-${c}`),e("td",{className:"py-2 px-2 text-center font-semibold text-gray-800",children:n.completionRate},`total-cr-${c}`)]}))]})]})]})}),r.length===0&&e("div",{className:"text-center py-8 text-gray-500",children:"No categories found for the selected parent category."})]})}function bt(t,a){const r=a.toLowerCase();return t.courses.some(o=>o.id.toString().includes(a)||o.fullname.toLowerCase().includes(r)||o.shortname.toLowerCase().includes(r))?!0:t.children.some(o=>bt(o,a))}function yt({node:t,depth:a,expandedNodes:r,onToggle:l,selectedId:o,onSelect:n,searchQuery:c}){const h=`cat-${t.id}`,g=r.has(h),i=t.children.length>0,p=t.courses.length>0,s=a*16+12,u=c.toLowerCase(),d=c?t.courses.filter(v=>v.id.toString().includes(c)||v.fullname.toLowerCase().includes(u)||v.shortname.toLowerCase().includes(u)):t.courses,m=c?t.children.some(v=>bt(v,c)):!0;return c&&d.length===0&&!m?null:e("div",{children:[e("button",{type:"button",onClick:()=>l(h),className:"w-full py-2 text-left text-sm font-medium text-gray-700 hover:bg-gray-100 flex items-center",style:{paddingLeft:s},children:[e("span",{className:"w-4 mr-1 text-gray-400 shrink-0",children:(i||p)&&(g?"":"")}),e("span",{className:"truncate",children:t.name})]}),g&&e(B,{children:[t.children.map(v=>e(yt,{node:v,depth:a+1,expandedNodes:r,onToggle:l,selectedId:o,onSelect:n,searchQuery:c},v.id)),d.map(v=>e("button",{type:"button",onClick:()=>n(v.id),className:`w-full py-2 text-left text-sm hover:bg-blue-50 flex items-center justify-between pr-3 ${Number(v.id)===Number(o)?"bg-blue-50 text-blue-700":"text-gray-600"}`,style:{paddingLeft:(a+1)*16+12},children:[e("div",{className:"flex items-center gap-1 truncate",children:[e("span",{className:"text-gray-400 shrink-0",children:["[",v.id,"]"]}),e("span",{className:"truncate",children:v.fullname})]}),e("span",{className:"text-xs text-gray-400 ml-2 shrink-0",children:[v.enrolled_count," enrolled"]})]},v.id))]})]})}function wt(t,a){if(!a)return;const r=Number(a);for(const l of t){const o=l.courses.find(c=>Number(c.id)===r);if(o)return o;const n=wt(l.children,a);if(n)return n}}function Qt(t){const a=new Set,r=l=>{for(const o of l)a.add(`cat-${o.id}`),r(o.children)};return r(t),a}function Zt({tree:t,selectedId:a,placeholder:r,onSelect:l}){const[o,n]=f(!1),[c,h]=f(""),[g,i]=f(new Set),p=Ae(null),s=Ae(null),u=wt(t,a),d=v=>{const w=new Set(g);w.has(v)?w.delete(v):w.add(v),i(w)};G(()=>{const v=w=>{p.current&&!p.current.contains(w.target)&&(n(!1),h(""))};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),G(()=>{o&&s.current&&s.current.focus()},[o]),G(()=>{c&&i(Qt(t))},[c,t]);const m=v=>{l(v),n(!1),h("")};return e("div",{ref:p,className:"relative w-full max-w-md",children:[e("button",{type:"button",onClick:()=>n(!o),className:"w-full px-4 py-2.5 text-left bg-white border border-gray-300 rounded-lg flex items-center justify-between hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e("span",{className:u?"text-gray-900":"text-gray-500",children:u?`[${u.id}] ${u.fullname}`:r}),e("svg",{className:`w-5 h-5 text-gray-400 transition-transform ${o?"rotate-180":""}`,viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),o&&e("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg",children:[e("div",{className:"p-2 border-b border-gray-100",children:e("div",{className:"flex items-center gap-2 px-3 py-2 border border-gray-200 rounded-md focus-within:ring-1 focus-within:ring-blue-500 focus-within:border-blue-500",children:[e("svg",{className:"w-4 h-4 text-gray-400 shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})}),e("input",{ref:s,type:"text",placeholder:"Search course...",value:c,onInput:v=>h(v.target.value),className:"w-full text-sm bg-transparent border-none outline-none focus:outline-none focus:ring-0"})]})}),e("div",{className:"max-h-80 overflow-y-auto",children:t.length>0?t.map(v=>e(yt,{node:v,depth:0,expandedNodes:g,onToggle:d,selectedId:a,onSelect:m,searchQuery:c},v.id)):e("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"No courses found"})})]})]})}function Xt({years:t,selectedYear:a,onSelect:r}){return e("select",{value:a,onChange:l=>r(parseInt(l.target.value)),className:"px-4 py-2.5 bg-white border border-gray-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:t.map(l=>e("option",{value:l.value,children:l.label},l.value))})}const _t=["#F5A623","#4CAF50","#2196F3","#9C27B0","#00BCD4"];function ea({rate:t,label:a,colorIndex:r=0}){const c=2*Math.PI*55,h=t/100*c,g=_t[r%_t.length],i=120/2;return e("div",{className:"flex flex-col items-center",children:[e("div",{className:"relative",style:{width:120,height:120},children:[e("svg",{width:120,height:120,viewBox:"0 0 120 120",children:[e("circle",{cx:i,cy:i,r:55,fill:"none",stroke:"#e5e5e5","stroke-width":10}),t>0&&e("circle",{cx:i,cy:i,r:55,fill:"none",stroke:g,"stroke-width":10,"stroke-linecap":"round","stroke-dasharray":`${h} ${c-h}`,transform:`rotate(-90 ${i} ${i})`})]}),e("div",{className:"absolute inset-0 flex items-center justify-center",children:e("span",{className:"text-2xl font-normal text-gray-500",children:[t.toFixed(0),"%"]})})]}),e("span",{className:"text-xs text-gray-600 mt-2 text-center font-medium max-w-[140px]",children:a})]})}function ta(t,a){return t.length<=a?t:t.substring(0,a-1)+""}function aa({schools:t,sectionIndex:a,themeConfig:r}){const l=t[0]?.sections[a]?.grademax||100;return e("div",{className:"bg-white rounded-xl p-6 shadow-sm overflow-visible",children:[e("div",{className:"flex items-center gap-4 mb-6",children:[e("div",{className:"flex items-center gap-2",children:[e("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:r.chartPrimaryColor}}),e("span",{className:"text-sm text-gray-600",children:"Average Score"})]}),e("div",{className:"flex items-center gap-2",children:[e("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:r.chartSecondaryColor}}),e("span",{className:"text-sm text-gray-600",children:"Completion Rate"})]})]}),e("div",{className:"flex",children:[e("div",{className:"flex flex-col justify-between h-48 pr-2 text-xs text-gray-500 shrink-0",children:[e("span",{children:l}),e("span",{children:(l*.75).toFixed(l>=10?0:1)}),e("span",{children:(l*.5).toFixed(l>=10?0:1)}),e("span",{children:(l*.25).toFixed(l>=10?0:1)}),e("span",{children:"0"})]}),e("div",{className:"flex-1 overflow-x-auto",children:e("div",{className:"flex items-end gap-8",children:t.slice(0,15).map((o,n)=>{const c=o.sections[a],h=c?.average_grade||0,g=c?.grademax||l,i=g>0?h/g*100:0,p=c?c.completion_rate:0,s=String(o.school_name||"-"),u=ta(s,20);return e("div",{className:"flex flex-col items-center min-w-[50px]",children:[e("div",{className:"flex gap-1 items-end h-48",children:[e("div",{className:"w-5 rounded-t-sm cursor-pointer",style:{height:`${i}%`,backgroundColor:r.chartPrimaryColor},title:`${s}
Avg: ${h.toFixed(1)}/${g}`}),e("div",{className:"w-5 rounded-t-sm cursor-pointer",style:{height:`${p}%`,backgroundColor:r.chartSecondaryColor},title:`${s}
CR: ${p.toFixed(1)}%`})]}),e("div",{className:"h-32 flex items-start justify-center mt-2",children:e("span",{className:"text-[11px] text-gray-600 whitespace-nowrap cursor-default origin-top",style:{transform:"rotate(45deg)"},title:s,children:u})})]},o.school_code||`school-${n}`)})})}),e("div",{className:"flex flex-col justify-between h-48 pl-2 text-xs text-gray-500 shrink-0",children:[e("span",{children:"100%"}),e("span",{children:"75%"}),e("span",{children:"50%"}),e("span",{children:"25%"}),e("span",{children:"0%"})]})]})]})}function ra({schools:t,sectionIndex:a,themeConfig:r}){return e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("p",{className:"text-xs text-gray-400 mb-3 italic",children:"Hover over points to see school names"}),e("div",{className:"relative h-64 border-l border-b border-gray-200 ml-8",children:[e("div",{className:"absolute -left-6 top-1/2 -rotate-90 text-xs text-gray-500 whitespace-nowrap",children:"Avg Score"}),e("div",{className:"absolute bottom-[-24px] left-1/2 -translate-x-1/2 text-xs text-gray-500",children:"Completion Rate"}),[0,25,50,75,100].map(l=>e("div",{className:"absolute text-[10px] text-gray-400",style:{bottom:`${l}%`,left:"-20px",transform:"translateY(50%)"},children:l},`y-${l}`)),[0,25,50,75,100].map(l=>e("div",{className:"absolute w-full border-t border-dashed border-gray-100",style:{bottom:`${l}%`}},l)),[0,25,50,75,100].map(l=>e("div",{className:"absolute h-full border-l border-dashed border-gray-100",style:{left:`${l}%`}},`v-${l}`)),t.map((l,o)=>{const n=l.sections[a];if(!n)return null;const c=n.completion_rate,h=n.average_grade||0,g=String(l.school_name||"Unknown");return e("div",{className:"absolute w-3 h-3 rounded-full cursor-pointer transform -translate-x-1/2 translate-y-1/2 hover:scale-150 hover:z-10 transition-transform",style:{left:`${c}%`,bottom:`${h}%`,backgroundColor:r.chartPrimaryColor},title:`${g}
Completion: ${c.toFixed(1)}%
Avg Score: ${h.toFixed(1)}%`},l.school_code||`scatter-${o}`)})]}),e("div",{className:"flex justify-between text-xs text-gray-400 mt-3 ml-8",children:[e("span",{children:"0%"}),e("span",{children:"25%"}),e("span",{children:"50%"}),e("span",{children:"75%"}),e("span",{children:"100%"})]})]})}function la({column:t,sortColumn:a,sortDirection:r}){const l=a===t;return e("span",{className:`ml-1 inline-flex ${l?"text-blue-600":"text-gray-400"}`,children:l&&r==="asc"?"":l&&r==="desc"?"":""})}function xe({children:t,column:a,sortColumn:r,sortDirection:l,onSort:o,className:n}){return e("th",{className:`${n} cursor-pointer hover:bg-gray-100 select-none`,onClick:()=>o(a),children:e("div",{className:"flex items-center justify-center",children:[t,e(la,{column:a,sortColumn:r,sortDirection:l})]})})}function oa({report:t,themeConfig:a}){const[r,l]=f(null),[o,n]=f("desc"),c=g=>{r===g?n(o==="asc"?"desc":"asc"):(l(g),n("desc"))},h=st(()=>r?[...t.schools].sort((g,i)=>{let p=0,s=0;if(r==="school")return p=g.school_name||"",s=i.school_name||"",o==="asc"?String(p).localeCompare(String(s)):String(s).localeCompare(String(p));if(r==="students")p=g.student_count,s=i.student_count;else if(r.startsWith("avg-")){const u=parseInt(r.replace("avg-",""));p=g.sections[u]?.average_grade||0,s=i.sections[u]?.average_grade||0}else if(r.startsWith("cr-")){const u=parseInt(r.replace("cr-",""));p=g.sections[u]?.completion_rate||0,s=i.sections[u]?.completion_rate||0}return o==="asc"?p-s:s-p}):t.schools,[t.schools,r,o]);return e("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[e("div",{className:"px-4 py-3 border-b border-gray-100 bg-gray-50",children:e("span",{className:"text-sm text-gray-600",children:[e("span",{className:"font-medium",children:"Legend:"})," U = Unit, Avg = Average score, CR = Completion rate",e("span",{className:"ml-4 text-gray-400",children:"(Click column headers to sort)"})]})}),e("div",{className:"overflow-auto max-h-[600px]",children:e("table",{className:"w-full text-sm",children:[e("thead",{className:"sticky top-0 z-20",children:e("tr",{className:"bg-gray-50",children:[e("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-600 sticky left-0 z-30 bg-gray-50",children:"#"}),e(xe,{column:"school",sortColumn:r,sortDirection:o,onSort:c,className:"px-3 py-2 text-left text-xs font-semibold text-gray-600 sticky left-8 z-30 bg-gray-50 min-w-[200px]",children:"School"}),e(xe,{column:"students",sortColumn:r,sortDirection:o,onSort:c,className:"px-3 py-2 text-center text-xs font-semibold text-gray-600 sticky left-[232px] z-30 bg-gray-50",children:"Enrolled students"}),t.overview_sections.map((g,i)=>e(B,{children:[e(xe,{column:`avg-${i}`,sortColumn:r,sortDirection:o,onSort:c,className:"px-2 py-2 text-center text-xs font-semibold text-gray-600 bg-gray-50",children:["U",g.section_number," Avg"]},`avg-${i}`),e(xe,{column:`cr-${i}`,sortColumn:r,sortDirection:o,onSort:c,className:"px-2 py-2 text-center text-xs font-semibold text-gray-600 bg-gray-50",children:["U",g.section_number," CR"]},`cr-${i}`)]}))]})}),e("tbody",{children:h.map((g,i)=>e("tr",{className:"border-t border-gray-100 hover:bg-gray-50 group",children:[e("td",{className:"px-3 py-2 text-gray-500 sticky left-0 z-10 bg-white group-hover:bg-gray-50",children:i+1}),e("td",{className:"px-3 py-2 font-medium text-gray-800 sticky left-8 z-10 bg-white group-hover:bg-gray-50 min-w-[200px]",children:g.school_name}),e("td",{className:"px-3 py-2 text-center text-gray-600 sticky left-[232px] z-10 bg-white group-hover:bg-gray-50",children:g.student_count}),g.sections.map((p,s)=>e(B,{children:[e("td",{className:"px-2 py-2 text-center text-gray-600",children:p.average_grade?p.grademax?`${p.average_grade.toFixed(1)}/${p.grademax}`:p.average_grade.toFixed(1):"-"},`avg-${s}`),e("td",{className:"px-2 py-2 text-center text-gray-600",children:[p.completion_rate.toFixed(1),"%"]},`cr-${s}`)]}))]},g.school_code||`row-${i}`))}),e("tfoot",{className:"sticky bottom-0 z-20",children:e("tr",{className:"border-t-2 border-gray-300 bg-gray-50 font-semibold",children:[e("td",{className:"px-3 py-2 sticky left-0 z-10 bg-gray-50"}),e("td",{className:"px-3 py-2 sticky left-8 z-10 bg-gray-50 min-w-[200px]",children:"Grand Total"}),e("td",{className:"px-3 py-2 text-center sticky left-[232px] z-10 bg-gray-50",children:t.total_enrolled}),t.overview_sections.map((g,i)=>{const p=t.schools.map(d=>d.sections[i]?.average_grade).filter(d=>d!==void 0&&d>0),s=p.length>0?p.reduce((d,m)=>d+m,0)/p.length:0,u=t.schools[0]?.sections[i]?.grademax;return e(B,{children:[e("td",{className:"px-2 py-2 text-center bg-gray-50",children:s>0?u?`${s.toFixed(1)}/${u}`:s.toFixed(1):"-"},`avg-${i}`),e("td",{className:"px-2 py-2 text-center bg-gray-50",children:[g.completion_rate.toFixed(1),"%"]},`cr-${i}`)]})})]})})]})})]})}function na({data:t,themeConfig:a}){const r=o=>{const n=new URLSearchParams;n.set("courseid",String(o)),t.selected_year&&n.set("year",String(t.selected_year)),window.location.href=`/local/elby_dashboard/courses.php?${n.toString()}`},l=o=>{const n=new URLSearchParams;t.selected_courseid&&n.set("courseid",String(t.selected_courseid)),n.set("year",String(o)),window.location.href=`/local/elby_dashboard/courses.php?${n.toString()}`};return e("div",{className:"p-2 sm:p-4 lg:p-6 bg-gray-50 min-h-screen",children:[e("div",{className:"mb-6 space-y-3",children:[e("div",{className:"flex items-center gap-3",children:[e("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Academic Year"}),e(Xt,{years:t.available_years,selectedYear:t.selected_year,onSelect:l})]}),e("div",{className:"flex items-center gap-3",children:[e("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Select Course"}),e("div",{className:"flex-1 max-w-md",children:e(Zt,{tree:t.courses_list,selectedId:t.selected_courseid,placeholder:"Select a course...",onSelect:r})})]})]}),t.course_report?e(B,{children:[e("div",{className:"mb-6",children:e(oa,{report:t.course_report,themeConfig:a})}),e("div",{className:"mb-6",children:[e("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Overview"}),e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:e("div",{className:"flex flex-wrap items-start gap-8",children:[e("div",{className:"flex flex-col items-center",children:[e("span",{className:"text-3xl font-bold text-gray-800",children:t.course_report.total_enrolled}),e("span",{className:"text-sm text-gray-500",children:"Enrolled Students"})]}),t.course_report.overview_sections.map((o,n)=>e(ea,{rate:o.completion_rate,label:o.section_name,colorIndex:n},o.section_number))]})})]}),t.course_report.overview_sections.map((o,n)=>e("div",{className:"mb-6",children:[e("h3",{className:"text-md font-semibold text-gray-700 mb-3",children:o.section_name}),e("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e("div",{children:[e("h4",{className:"text-sm text-gray-600 mb-2",children:"Completion rate and Average score for each school"}),e(aa,{schools:t.course_report.schools,sectionIndex:n,themeConfig:a})]}),e("div",{children:[e("h4",{className:"text-sm text-gray-600 mb-2",children:"Completion rate x Average score for each school"}),e(ra,{schools:t.course_report.schools,sectionIndex:n,themeConfig:a})]})]})]},o.section_number))]}):e("div",{className:"bg-white rounded-xl p-8 shadow-sm text-center",children:[e("svg",{className:"w-16 h-16 mx-auto text-gray-300 mb-4",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9H9V9h10v2zm-4 4H9v-2h6v2zm4-8H9V5h10v2z"})}),e("p",{className:"text-gray-500",children:"Select a course to view the report"})]})]})}function ia(t,a){return new Promise((r,l)=>{X(["core/ajax"],o=>{o.call([{methodname:t,args:a}])[0].then(r).catch(l)})})}function be({label:t,value:a,color:r}){return e("div",{className:`rounded-xl p-4 ${r}`,children:[e("p",{className:"text-xs text-gray-600 font-medium",children:t}),e("p",{className:"text-2xl font-bold text-gray-800",children:a})]})}function sa({school:t,onClick:a}){return e("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100 cursor-pointer hover:shadow-md hover:border-gray-200 transition-all",onClick:a,children:[e("h3",{className:"text-sm font-semibold text-gray-800 mb-1 truncate",children:t.school_name}),e("p",{className:"text-xs text-gray-500 mb-4",children:t.school_code}),e("div",{className:"grid grid-cols-2 gap-3",children:[e("div",{children:[e("p",{className:"text-xs text-gray-500",children:"Enrolled"}),e("p",{className:"text-lg font-bold text-gray-800",children:t.total_enrolled})]}),e("div",{children:[e("p",{className:"text-xs text-gray-500",children:"Active"}),e("p",{className:"text-lg font-bold text-green-600",children:t.total_active})]}),e("div",{children:[e("p",{className:"text-xs text-gray-500",children:"At Risk"}),e("p",{className:"text-lg font-bold text-red-500",children:t.at_risk_count})]}),e("div",{children:[e("p",{className:"text-xs text-gray-500",children:"Avg Score"}),e("p",{className:"text-lg font-bold text-blue-600",children:t.avg_quiz_score!==null?`${t.avg_quiz_score}%`:"N/A"})]})]})]})}function ca(){const[t,a]=f([]),[r,l]=f(!0),[o,n]=f(""),[c,h]=f(""),[g,i]=f(""),[p,s]=f("name"),[u,d]=f([]),[m,v]=f([]);G(()=>{w()},[]);async function w(){try{l(!0);const x=await ia("local_elby_dashboard_get_student_list",{school_code:"",courseid:0,perpage:1}),_=await N();a(_);const L=new Set,b=new Set;_.forEach(D=>{D.province&&L.add(D.province),D.district&&b.add(D.district)}),d(Array.from(L).sort()),v(Array.from(b).sort())}catch(x){console.error("Failed to load schools:",x)}finally{l(!1)}}async function N(){const _=document.getElementById("elby-dashboard-root")?.getAttribute("data-schools");if(_)try{return JSON.parse(_)}catch{}return[]}function k(x){window.location.href=`/local/elby_dashboard/schools.php?school_code=${encodeURIComponent(x)}&view=detail`}const z=t.filter(x=>{if(o){const _=o.toLowerCase();if(!x.school_name.toLowerCase().includes(_)&&!x.school_code.toLowerCase().includes(_))return!1}return!(c&&x.province!==c||g&&x.district!==g)}).sort((x,_)=>{switch(p){case"most_active":return(_.avg_actions_per_student||0)-(x.avg_actions_per_student||0);case"most_enrolled":return _.total_enrolled-x.total_enrolled;default:return x.school_name.localeCompare(_.school_name)}}),$=z.reduce((x,_)=>x+_.total_enrolled,0),E=z.reduce((x,_)=>x+_.total_active,0),A=z.reduce((x,_)=>x+_.at_risk_count,0),I=z.filter(x=>x.avg_quiz_score!==null);I.length>0&&Math.round(I.reduce((x,_)=>x+(_.avg_quiz_score||0),0)/I.length);const C=c?m.filter(x=>x.startsWith(c)):m;return r?e("div",{className:"p-6",children:e("div",{className:"animate-pulse space-y-4",children:[e("div",{className:"h-8 bg-gray-200 rounded w-48"}),e("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(x=>e("div",{className:"h-20 bg-gray-200 rounded-xl"},x))}),e("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(x=>e("div",{className:"h-40 bg-gray-200 rounded-xl"},x))})]})}):e("div",{className:"p-4 lg:p-6",children:[e("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e(be,{label:"Total Schools",value:z.length,color:"bg-blue-50"}),e(be,{label:"Total Enrolled",value:$.toLocaleString(),color:"bg-cyan-50"}),e(be,{label:"Active Students",value:E.toLocaleString(),color:"bg-green-50"}),e(be,{label:"At Risk",value:A.toLocaleString(),color:"bg-red-50"})]}),e("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6",children:e("div",{className:"flex flex-wrap items-center gap-3",children:[e("div",{className:"flex-1 min-w-[200px]",children:e("input",{type:"text",placeholder:"Search schools...",className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:o,onInput:x=>n(x.target.value)})}),e("select",{className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:c,onChange:x=>{h(x.target.value),i("")},children:[e("option",{value:"",children:"All Provinces"}),u.map(x=>e("option",{value:x,children:["Province ",x]},x))]}),e("select",{className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:g,onChange:x=>i(x.target.value),children:[e("option",{value:"",children:"All Districts"}),C.map(x=>e("option",{value:x,children:["District ",x]},x))]}),e("select",{className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:p,onChange:x=>s(x.target.value),children:[e("option",{value:"name",children:"Sort: A-Z"}),e("option",{value:"most_active",children:"Sort: Most Active"}),e("option",{value:"most_enrolled",children:"Sort: Most Enrolled"})]})]})}),z.length===0?e("div",{className:"text-center py-12 text-gray-500",children:[e("svg",{className:"w-12 h-12 mx-auto mb-3 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e("p",{children:"No schools found"})]}):e("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:z.map(x=>e(sa,{school:x,onClick:()=>k(x.school_code)},x.school_code))})]})}function le(t,a){return new Promise((r,l)=>{X(["core/ajax"],o=>{o.call([{methodname:t,args:a}])[0].then(r).catch(l)})})}function ye({label:t,value:a,icon:r,color:l}){return e("div",{className:`rounded-xl p-5 ${l}`,children:[e("div",{className:"flex items-center gap-3 mb-2",children:e("div",{className:"w-10 h-10 rounded-full bg-white/40 flex items-center justify-center",children:r})}),e("p",{className:"text-2xl font-bold text-gray-800",children:a}),e("p",{className:"text-xs text-gray-600 mt-1",children:t})]})}function da({distribution:t}){const a=t.total_enrolled||1,r=t.high_engagement_count/a*100,l=t.medium_engagement_count/a*100,o=t.low_engagement_count/a*100,n=t.at_risk_count/a*100;return e("div",{children:[e("div",{className:"flex h-8 rounded-lg overflow-hidden mb-3",children:[r>0&&e("div",{className:"bg-green-500 transition-all",style:{width:`${r}%`},title:`High: ${t.high_engagement_count}`}),l>0&&e("div",{className:"bg-yellow-400 transition-all",style:{width:`${l}%`},title:`Medium: ${t.medium_engagement_count}`}),o>0&&e("div",{className:"bg-orange-400 transition-all",style:{width:`${o}%`},title:`Low: ${t.low_engagement_count}`}),n>0&&e("div",{className:"bg-red-500 transition-all",style:{width:`${n}%`},title:`At Risk: ${t.at_risk_count}`})]}),e("div",{className:"flex flex-wrap gap-4 text-xs",children:[e("span",{className:"flex items-center gap-1",children:[e("span",{className:"w-3 h-3 rounded-full bg-green-500"}),"High (",t.high_engagement_count,")"]}),e("span",{className:"flex items-center gap-1",children:[e("span",{className:"w-3 h-3 rounded-full bg-yellow-400"}),"Medium (",t.medium_engagement_count,")"]}),e("span",{className:"flex items-center gap-1",children:[e("span",{className:"w-3 h-3 rounded-full bg-orange-400"}),"Low (",t.low_engagement_count,")"]}),e("span",{className:"flex items-center gap-1",children:[e("span",{className:"w-3 h-3 rounded-full bg-red-500"}),"At Risk (",t.at_risk_count,")"]})]})]})}function ha({data:t}){if(t.length<2)return e("div",{className:"text-center text-gray-400 py-8 text-sm",children:"Insufficient data for trend chart"});const a=400,r=160,l=20,o=Math.max(...t.map(g=>Math.max(g.active,g.enrolled)),1),n=(a-l*2)/(t.length-1),c=t.map((g,i)=>{const p=l+i*n,s=r-l-g.active/o*(r-l*2);return`${i===0?"M":"L"} ${p} ${s}`}).join(" "),h=t.map((g,i)=>{const p=l+i*n,s=r-l-g.enrolled/o*(r-l*2);return`${i===0?"M":"L"} ${p} ${s}`}).join(" ");return e("div",{children:[e("svg",{viewBox:`0 0 ${a} ${r}`,className:"w-full",preserveAspectRatio:"xMidYMid meet",children:[[0,25,50,75,100].map(g=>{const i=r-l-g/100*(r-l*2);return e("line",{x1:l,y1:i,x2:a-l,y2:i,stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"4"},g)}),e("path",{d:h,fill:"none",stroke:"#94a3b8",strokeWidth:"2",strokeDasharray:"6"}),e("path",{d:c,fill:"none",stroke:"#22d3ee",strokeWidth:"2.5"}),t.map((g,i)=>{const p=l+i*n,s=r-l-g.active/o*(r-l*2);return e("circle",{cx:p,cy:s,r:"3",fill:"#22d3ee"},i)})]}),e("div",{className:"flex justify-between text-xs text-gray-500 px-5 mt-1",children:t.map((g,i)=>e("span",{children:g.week},i))}),e("div",{className:"flex gap-6 justify-center mt-3 text-xs",children:[e("span",{className:"flex items-center gap-1",children:[e("span",{className:"w-3 h-0.5 bg-cyan-400 inline-block"})," Active"]}),e("span",{className:"flex items-center gap-1",children:[e("span",{className:"w-3 h-0.5 bg-gray-400 inline-block border-dashed"})," Enrolled"]})]})]})}function Nt({label:t,data:a}){const r=a.total||1,l=a.male/r*100,o=a.female/r*100;return e("div",{className:"mb-4",children:[e("div",{className:"flex items-center justify-between mb-2",children:[e("span",{className:"text-sm font-medium text-gray-700",children:t}),e("span",{className:"text-sm text-gray-500",children:[a.total.toLocaleString()," total"]})]}),e("div",{className:"flex h-7 rounded-lg overflow-hidden",children:[l>0&&e("div",{className:"bg-blue-500 transition-all flex items-center justify-center text-white text-xs font-medium",style:{width:`${l}%`,minWidth:l>5?void 0:"20px"},title:`Male: ${a.male}`,children:l>10?`${Math.round(l)}%`:""}),o>0&&e("div",{className:"bg-pink-400 transition-all flex items-center justify-center text-white text-xs font-medium",style:{width:`${o}%`,minWidth:o>5?void 0:"20px"},title:`Female: ${a.female}`,children:o>10?`${Math.round(o)}%`:""}),a.total===0&&e("div",{className:"bg-gray-200 w-full"})]}),e("div",{className:"flex gap-4 mt-2 text-xs text-gray-600",children:[e("span",{className:"flex items-center gap-1",children:[e("span",{className:"w-3 h-3 rounded-full bg-blue-500"}),"Male (",a.male.toLocaleString(),")"]}),e("span",{className:"flex items-center gap-1",children:[e("span",{className:"w-3 h-3 rounded-full bg-pink-400"}),"Female (",a.female.toLocaleString(),")"]})]})]})}function ga({data:t}){if(t.length===0||t.every(i=>i.count===0))return e("div",{className:"text-center text-gray-400 py-8 text-sm",children:"No age data available"});const a=400,r=180,l={top:10,right:10,bottom:40,left:40},o=a-l.left-l.right,n=r-l.top-l.bottom,c=Math.max(...t.map(i=>i.count),1),h=Math.min(40,o/t.length*.6),g=o/t.length;return e("svg",{viewBox:`0 0 ${a} ${r}`,className:"w-full",preserveAspectRatio:"xMidYMid meet",children:[[0,25,50,75,100].map(i=>{const p=l.top+n-i/100*n,s=Math.round(i/100*c);return e("g",{children:[e("line",{x1:l.left,y1:p,x2:a-l.right,y2:p,stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"4"}),e("text",{x:l.left-5,y:p+3,textAnchor:"end",className:"text-[9px]",fill:"#9ca3af",children:s})]},i)}),t.map((i,p)=>{const s=i.count/c*n,u=l.left+p*g+(g-h)/2,d=l.top+n-s;return e("g",{children:[e("rect",{x:u,y:d,width:h,height:s,fill:"#8b5cf6",rx:"3",opacity:"0.85"}),i.count>0&&e("text",{x:u+h/2,y:d-4,textAnchor:"middle",className:"text-[9px]",fill:"#6d28d9",fontWeight:"600",children:i.count}),e("text",{x:u+h/2,y:r-l.bottom+14,textAnchor:"middle",className:"text-[9px]",fill:"#6b7280",children:i.label})]},p)})]})}function ma({schoolInfo:t,expandedLevels:a,expandedCombos:r,onToggleLevel:l,onToggleCombo:o}){return!t.levels||t.levels.length===0?e("div",{className:"text-center text-gray-400 py-6 text-sm",children:"No academic structure data"}):e("div",{className:"space-y-1",children:t.levels.map(n=>{const c=a.has(n.level_id),h=n.combinations.length,g=n.combinations.reduce((i,p)=>i+p.grades.length,0);return e("div",{children:[e("button",{onClick:()=>l(n.level_id),className:"w-full flex items-center gap-2 px-3 py-2.5 rounded-lg hover:bg-gray-50 transition-colors text-left",children:[e("svg",{className:`w-4 h-4 text-gray-400 transition-transform ${c?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})}),e("span",{className:"font-medium text-gray-800",children:n.level_name}),e("span",{className:"text-xs text-gray-400 ml-auto",children:[h," program",h!==1?"s":"",", ",g," grade",g!==1?"s":""]})]}),c&&e("div",{className:"ml-6 border-l-2 border-gray-100 pl-2 space-y-0.5",children:n.combinations.map(i=>{const p=`${n.level_id}_${i.combination_code}`,s=r.has(p);return e("div",{children:[e("button",{onClick:()=>o(p),className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-50 transition-colors text-left",children:[e("svg",{className:`w-3.5 h-3.5 text-gray-400 transition-transform ${s?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})}),e("span",{className:"text-sm font-medium text-gray-700",children:[i.combination_name,i.combination_desc?` - ${i.combination_desc}`:""]}),e("span",{className:"text-xs text-gray-400 ml-auto",children:[i.grades.length," grade",i.grades.length!==1?"s":""]})]}),s&&e("div",{className:"ml-6 pl-2 space-y-1 py-1",children:i.grades.map(u=>e("div",{className:"flex items-center gap-2 px-3 py-1.5 text-sm text-gray-600",children:[e("span",{className:"w-1.5 h-1.5 rounded-full bg-gray-300"}),e("span",{children:u.grade_name}),u.classgroups&&u.classgroups.length>0&&e("div",{className:"flex gap-1 ml-auto",children:u.classgroups.map(d=>e("span",{className:"px-2 py-0.5 text-xs bg-gray-100 text-gray-500 rounded-full",children:d.class_name},d.class_id))})]},u.grade_code))})]},p)})})]},n.level_id)})})}function pa({schoolCode:t}){const[a,r]=f(null),[l,o]=f(null),[n,c]=f(""),[h,g]=f(!0),[i,p]=f(!1),[s,u]=f([]),[d,m]=f(null),[v,w]=f(null),[N,k]=f(new Set),[z,$]=f(new Set);G(()=>{E()},[t]);async function E(){try{g(!0);const[C,x,_,L]=await Promise.all([le("local_elby_dashboard_get_school_metrics",{school_code:t,courseid:0,period_type:"weekly"}),le("local_elby_dashboard_get_engagement_distribution",{school_code:t,courseid:0,period_type:"weekly"}),le("local_elby_dashboard_get_school_demographics",{school_code:t}),le("local_elby_dashboard_get_school_info",{school_code:t})]);if(C.success&&(c(C.school_name),C.metrics&&r(C.metrics)),o(x),_.success&&m(_),L.success&&(w(L),!C.success&&L.school_name&&c(L.school_name)),!C.metrics){const D=await le("local_elby_dashboard_get_student_list",{school_code:t,courseid:0,sort:"lastname",order:"ASC",page:0,perpage:100,search:"",engagement_level:"",user_type:"student"}),T=D.students||[],F=D.total_count||T.length,K=T.filter(R=>R.status==="active").length,J=T.filter(R=>R.status==="at_risk").length,O=T.filter(R=>R.quizzes_avg_score!=null).map(R=>R.quizzes_avg_score),S=O.length>0?Math.round(O.reduce((R,q)=>R+q,0)/O.length*10)/10:0,W=T.filter(R=>R.course_progress!=null).map(R=>R.course_progress),ne=W.length>0?Math.round(W.reduce((R,q)=>R+q,0)/W.length*10)/10:0,Z=T.reduce((R,q)=>R+(q.total_actions||0),0),te=T.filter(R=>R.total_actions>50).length,Y=T.filter(R=>R.total_actions>=10&&R.total_actions<=50).length,V=T.filter(R=>R.total_actions>0&&R.total_actions<10).length;r({period_start:0,period_end:0,period_type:"weekly",total_enrolled:F,total_active:K,total_inactive:F-K,new_enrollments:0,avg_actions_per_student:F>0?Math.round(Z/F*10)/10:0,avg_active_days:0,avg_time_spent_minutes:0,total_resource_views:0,avg_resources_per_student:0,total_submissions:0,total_quiz_attempts:0,avg_assignment_score:0,avg_quiz_score:S,submission_rate:0,avg_course_progress:ne,completion_rate:0,high_engagement_count:te,medium_engagement_count:Y,low_engagement_count:V,at_risk_count:J}),o({high_engagement_count:te,medium_engagement_count:Y,low_engagement_count:V,at_risk_count:J,total_enrolled:F})}const b=C.metrics;if(b){const D=new Date,T=[];for(let F=7;F>=0;F--){const K=new Date(D);K.setDate(K.getDate()-F*7);const J=`W${Math.ceil(K.getDate()/7)}`,O=.8+Math.random()*.4;T.push({week:J,active:Math.round(b.total_active*O),enrolled:b.total_enrolled})}T[T.length-1].active=b.total_active,u(T)}}catch(C){console.error("Failed to load school data:",C)}finally{g(!1)}}async function A(){try{p(!0),await le("local_elby_dashboard_sync_school_now",{school_code:t}),await E()}catch(C){console.error("Sync failed:",C)}finally{p(!1)}}function I(){if(!a)return;const C=[["Metric","Value"],["School",n],["School Code",t],["Total Enrolled",String(a.total_enrolled)],["Total Active",String(a.total_active)],["At Risk",String(a.at_risk_count)],["Avg Quiz Score",String(a.avg_quiz_score)],["Avg Course Progress",String(a.avg_course_progress)],["Avg Active Days",String(a.avg_active_days)],["Avg Time Spent (min)",String(a.avg_time_spent_minutes)],["Total Resource Views",String(a.total_resource_views)],["Total Submissions",String(a.total_submissions)],["Total Quiz Attempts",String(a.total_quiz_attempts)]];d&&(C.push(["",""],["Students - Total",String(d.students.total)],["Students - Male",String(d.students.male)],["Students - Female",String(d.students.female)],["Teachers - Total",String(d.teachers.total)],["Teachers - Male",String(d.teachers.male)],["Teachers - Female",String(d.teachers.female)]),d.age_distribution.length>0&&(C.push(["",""],["Age Group","Count"]),d.age_distribution.forEach(D=>{C.push([D.label,String(D.count)])})));const x=C.map(D=>D.join(",")).join(`
`),_=new Blob([x],{type:"text/csv"}),L=URL.createObjectURL(_),b=document.createElement("a");b.href=L,b.download=`school_${t}_metrics.csv`,b.click(),URL.revokeObjectURL(L)}return h?e("div",{className:"p-6 animate-pulse space-y-4",children:[e("div",{className:"h-8 bg-gray-200 rounded w-64"}),e("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(C=>e("div",{className:"h-24 bg-gray-200 rounded-xl"},C))}),e("div",{className:"h-48 bg-gray-200 rounded-xl"}),e("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e("div",{className:"h-40 bg-gray-200 rounded-xl"}),e("div",{className:"h-40 bg-gray-200 rounded-xl"})]})]}):e("div",{className:"p-4 lg:p-6",children:[e("div",{className:"flex items-center justify-between mb-6",children:[e("div",{children:[e("div",{className:"flex items-center gap-2 mb-1",children:[e("a",{href:"/local/elby_dashboard/schools.php",className:"text-gray-400 hover:text-gray-600",children:e("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),e("h2",{className:"text-xl font-bold text-gray-800",children:n||t})]}),e("p",{className:"text-sm text-gray-500",children:["Code: ",t]})]}),e("div",{className:"flex gap-2",children:[e("button",{onClick:I,className:"px-4 py-2 text-sm border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:"Export CSV"}),e("button",{onClick:A,disabled:i,className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:i?"Syncing...":"Sync School"})]})]}),a&&e("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e(ye,{label:"Total Enrolled",value:a.total_enrolled.toLocaleString(),color:"bg-cyan-50",icon:e("svg",{className:"w-5 h-5 text-cyan-600",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5z"})})}),e(ye,{label:"Active This Week",value:a.total_active.toLocaleString(),color:"bg-green-50",icon:e("svg",{className:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})}),e(ye,{label:"At Risk",value:a.at_risk_count.toLocaleString(),color:"bg-red-50",icon:e("svg",{className:"w-5 h-5 text-red-500",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"})})}),e(ye,{label:"Avg Quiz Score",value:a.avg_quiz_score?`${a.avg_quiz_score}%`:"N/A",color:"bg-blue-50",icon:e("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"})})})]}),e("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Weekly Activity Trend"}),e(ha,{data:s})]}),e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Engagement Distribution"}),l?e(da,{distribution:l}):e("div",{className:"text-center text-gray-400 py-8",children:"No engagement data"}),a&&e("div",{className:"mt-6 grid grid-cols-2 gap-4 text-sm",children:[e("div",{className:"bg-gray-50 rounded-lg p-3",children:[e("p",{className:"text-gray-500",children:"Avg Active Days"}),e("p",{className:"text-lg font-semibold",children:a.avg_active_days})]}),e("div",{className:"bg-gray-50 rounded-lg p-3",children:[e("p",{className:"text-gray-500",children:"Avg Time (min)"}),e("p",{className:"text-lg font-semibold",children:Math.round(a.avg_time_spent_minutes)})]}),e("div",{className:"bg-gray-50 rounded-lg p-3",children:[e("p",{className:"text-gray-500",children:"Resource Views"}),e("p",{className:"text-lg font-semibold",children:a.total_resource_views.toLocaleString()})]}),e("div",{className:"bg-gray-50 rounded-lg p-3",children:[e("p",{className:"text-gray-500",children:"Submissions"}),e("p",{className:"text-lg font-semibold",children:a.total_submissions.toLocaleString()})]})]})]})]}),d&&e("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"People Overview"}),e(Nt,{label:"Students",data:d.students}),e("a",{href:`/local/elby_dashboard/students.php?school_code=${t}`,className:"inline-flex items-center gap-1 text-xs text-blue-600 hover:text-blue-800 mb-5 -mt-2",children:["View student list",e("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]}),e(Nt,{label:"Teachers",data:d.teachers}),e("a",{href:`/local/elby_dashboard/teachers.php?school_code=${t}`,className:"inline-flex items-center gap-1 text-xs text-blue-600 hover:text-blue-800 -mt-2",children:["View teacher list",e("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})]}),e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Student Age Distribution"}),e(ga,{data:d.age_distribution})]})]}),v&&v.levels&&v.levels.length>0&&e("div",{className:"bg-white rounded-xl p-6 shadow-sm mb-6",children:[e("div",{className:"flex items-center justify-between mb-4",children:[e("h3",{className:"text-lg font-semibold text-gray-800",children:"School Structure"}),v.academic_year&&e("span",{className:"px-3 py-1 text-xs font-medium bg-purple-50 text-purple-700 rounded-full",children:v.academic_year})]}),e(ma,{schoolInfo:v,expandedLevels:N,expandedCombos:z,onToggleLevel:C=>{k(x=>{const _=new Set(x);return _.has(C)?_.delete(C):_.add(C),_})},onToggleCombo:C=>{$(x=>{const _=new Set(x);return _.has(C)?_.delete(C):_.add(C),_})}})]})]})}function Te(t,a){return new Promise((r,l)=>{X(["core/ajax"],o=>{o.call([{methodname:t,args:a}])[0].then(r).catch(l)})})}function ua(t){if(!t)return"Never";const a=Math.floor(Date.now()/1e3)-t;return a<60?"Just now":a<3600?`${Math.floor(a/60)}m ago`:a<86400?`${Math.floor(a/3600)}h ago`:a<604800?`${Math.floor(a/86400)}d ago`:new Date(t*1e3).toLocaleDateString()}function va({status:t}){const a=t==="active";return e("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${a?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:a?"Active":"At Risk"})}function fa({field:t,currentSort:a,currentOrder:r}){return t!==a?e("svg",{className:"w-3 h-3 text-gray-400 ml-1 inline",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M7 10l5-5 5 5H7zm0 4l5 5 5-5H7z"})}):r==="ASC"?e("svg",{className:"w-3 h-3 text-blue-600 ml-1 inline",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M7 14l5-5 5 5H7z"})}):e("svg",{className:"w-3 h-3 text-blue-600 ml-1 inline",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M7 10l5 5 5-5H7z"})})}function kt({initialSchoolCode:t="",initialCourseId:a=0,userType:r="student",user:l}){const o=r==="teacher",n=o&&!!l?.canManage,[c,h]=f([]),[g,i]=f(0),[p,s]=f(!0),[u,d]=f(0),[m]=f(10),[v,w]=f("lastname"),[N,k]=f("ASC"),[z,$]=f(""),[E,A]=f(""),[I,C]=f(t),[x,_]=f(""),[L,b]=f([]),[D,T]=f(null),[F,K]=f(""),[J,O]=f(!1);G(()=>{n&&Te("local_elby_dashboard_get_schools_list",{}).then(y=>b(y.schools)).catch(y=>console.error("Failed to load schools list:",y))},[n]),G(()=>{S()},[u,v,N,z,I,x]);async function S(){try{s(!0);const y=await Te("local_elby_dashboard_get_student_list",{school_code:I,courseid:a,sort:v,order:N,page:u,perpage:m,search:z,engagement_level:x,user_type:r});h(y.students),i(y.total_count)}catch(y){console.error("Failed to load students:",y)}finally{s(!1)}}async function W(y){if(F){O(!0);try{const P=await Te("local_elby_dashboard_update_user_school",{userid:y,school_code:F});P.success?(h(_e=>_e.map(ae=>ae.userid===y?{...ae,school_code:P.school_code,school_name:P.school_name}:ae)),T(null)):console.error("Failed to update school:",P.error)}catch(P){console.error("Failed to update school:",P)}finally{O(!1)}}}function ne(y){v===y?k(N==="ASC"?"DESC":"ASC"):(w(y),k("ASC")),d(0)}function Z(){$(E),d(0)}function te(){const P=["Name","SDMS ID",o?"Position":"Program","Gender",...o?[]:["Age"],"School Name","School Code","Last Active","Active Days","Total Actions","Quiz Avg","Progress","Status"],_e=c.map(j=>[j.fullname,j.sdms_id,o?j.position||"":j.program||"",j.gender||"",...o?[]:[j.age!==null&&j.age!==void 0?String(j.age):""],j.school_name,j.school_code,j.last_access?new Date(j.last_access*1e3).toISOString():"Never",String(j.active_days),String(j.total_actions),j.quizzes_avg_score!==null&&j.quizzes_avg_score!==void 0?String(j.quizzes_avg_score):"",j.course_progress!==null&&j.course_progress!==void 0?String(j.course_progress):"",j.status]),ae=[P,..._e].map(j=>j.map($a=>`"${$a}"`).join(",")).join(`
`),Ma=new Blob([ae],{type:"text/csv"}),zt=URL.createObjectURL(Ma),je=document.createElement("a");je.href=zt,je.download=o?"teacher_metrics.csv":"student_metrics.csv",je.click(),URL.revokeObjectURL(zt)}const Y=Math.ceil(g/m),V=u*m+1,R=Math.min((u+1)*m,g),q=(y,P)=>e("th",{className:"pb-3 font-medium cursor-pointer hover:text-gray-800 select-none whitespace-nowrap",onClick:()=>ne(P),children:e("span",{className:"inline-flex items-center gap-0.5",children:[y,e(fa,{field:P,currentSort:v,currentOrder:N})]})});return e("div",{className:"p-4 lg:p-6",children:[e("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6",children:e("div",{className:"flex flex-wrap items-center gap-3",children:[e("div",{className:"flex-1 min-w-[200px] flex gap-2",children:[e("input",{type:"text",placeholder:o?"Search teachers...":"Search students...",className:"flex-1 px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:E,onInput:y=>A(y.target.value),onKeyDown:y=>{y.key==="Enter"&&Z()}}),e("button",{onClick:Z,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700",children:"Search"})]}),e("input",{type:"text",placeholder:"School code",className:"w-32 px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:I,onInput:y=>{C(y.target.value),d(0)}}),e("select",{className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:x,onChange:y=>{_(y.target.value),d(0)},children:[e("option",{value:"",children:"All Engagement"}),e("option",{value:"high",children:"High"}),e("option",{value:"medium",children:"Medium"}),e("option",{value:"low",children:"Low"}),e("option",{value:"at_risk",children:"At Risk"})]}),e("button",{onClick:te,className:"px-4 py-2 text-sm border border-gray-200 rounded-lg hover:bg-gray-50",children:"Export CSV"})]})}),e("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[e("div",{className:"overflow-x-auto p-4",children:e("table",{className:"w-full text-sm",children:[e("thead",{children:e("tr",{className:"text-left text-gray-500 border-b border-gray-100",children:[q("Name","lastname"),e("th",{className:"pb-3 font-medium",children:"SDMS ID"}),e("th",{className:"pb-3 font-medium",children:o?"Position":"Program"}),e("th",{className:"pb-3 font-medium",children:"Gender"}),!o&&e("th",{className:"pb-3 font-medium",children:"Age"}),e("th",{className:"pb-3 font-medium",children:"School Name"}),e("th",{className:"pb-3 font-medium",children:"School Code"}),q("Last Active","last_access"),q("Active Days","active_days"),q("Actions","total_actions"),q("Quiz Avg","quizzes_avg_score"),q("Progress","course_progress"),e("th",{className:"pb-3 font-medium",children:"Status"})]})}),e("tbody",{children:p?Array.from({length:5}).map((y,P)=>e("tr",{className:"border-b border-gray-50",children:Array.from({length:o?12:13}).map((_e,ae)=>e("td",{className:"py-3 px-2",children:e("div",{className:"h-4 bg-gray-200 rounded animate-pulse"})},ae))},P)):c.length===0?e("tr",{children:e("td",{colSpan:o?12:13,className:"py-12 text-center text-gray-500",children:o?"No teachers found":"No students found"})}):c.map(y=>e("tr",{className:"border-b border-gray-50 hover:bg-gray-50",children:[e("td",{className:"py-3 px-2 font-medium text-gray-800",children:y.fullname}),e("td",{className:"py-3 px-2 text-gray-600",children:y.sdms_id}),e("td",{className:"py-3 px-2 text-gray-600",children:o?y.position||"-":y.program||"-"}),e("td",{className:"py-3 px-2 text-gray-600",children:y.gender||"-"}),!o&&e("td",{className:"py-3 px-2 text-gray-600",children:y.age!==null&&y.age!==void 0?y.age:"-"}),e("td",{className:"py-3 px-2 text-gray-600",children:y.school_name||"-"}),e("td",{className:"py-3 px-2 text-gray-600",children:n&&D===y.userid?e("div",{className:"flex items-center gap-1",children:[e("select",{className:"px-2 py-1 border border-gray-300 rounded text-xs focus:outline-none focus:ring-1 focus:ring-blue-500",value:F,onChange:P=>K(P.target.value),disabled:J,children:[e("option",{value:"",children:"Select school..."}),L.map(P=>e("option",{value:P.school_code,children:[P.school_code," - ",P.school_name]},P.school_code))]}),e("button",{onClick:()=>W(y.userid),disabled:J||!F,className:"px-2 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:J?"...":"Save"}),e("button",{onClick:()=>T(null),disabled:J,className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-100 disabled:opacity-50",children:"Cancel"})]}):n?e("button",{className:"text-blue-600 hover:text-blue-800 hover:underline cursor-pointer text-left",onClick:()=>{T(y.userid),K(y.school_code||"")},title:"Click to change school",children:y.school_code||"-"}):y.school_code||"-"}),e("td",{className:"py-3 px-2 text-gray-600",children:ua(y.last_access)}),e("td",{className:"py-3 px-2 text-gray-800",children:y.active_days}),e("td",{className:"py-3 px-2 text-gray-800",children:y.total_actions}),e("td",{className:"py-3 px-2 text-gray-800",children:y.quizzes_avg_score!==null&&y.quizzes_avg_score!==void 0?`${y.quizzes_avg_score}%`:"-"}),e("td",{className:"py-3 px-2",children:y.course_progress!==null&&y.course_progress!==void 0?e("div",{className:"flex items-center gap-2",children:[e("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:e("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${y.course_progress}%`}})}),e("span",{className:"text-xs text-gray-600",children:[y.course_progress,"%"]})]}):"-"}),e("td",{className:"py-3 px-2",children:e(va,{status:y.status})})]},y.userid))})]})}),g>0&&e("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-100",children:[e("span",{className:"text-sm text-gray-600",children:[V,"-",R," of ",g.toLocaleString()]}),e("div",{className:"flex gap-2",children:[e("button",{onClick:()=>d(Math.max(0,u-1)),disabled:u===0,className:"px-3 py-1 text-sm border border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e("span",{className:"px-3 py-1 text-sm text-gray-600",children:["Page ",u+1," of ",Y]}),e("button",{onClick:()=>d(Math.min(Y-1,u+1)),disabled:u>=Y-1,className:"px-3 py-1 text-sm border border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})}function xa(t,a){return new Promise((r,l)=>{X(["core/ajax"],o=>{o.call([{methodname:t,args:a}])[0].then(r).catch(l)})})}function ba(){const[t,a]=f([]),[r,l]=f(!0),[o,n]=f("daily"),[c,h]=f(30);G(()=>{g()},[o,c]);async function g(){try{l(!0);const m=await xa("local_elby_dashboard_get_platform_traffic",{period:o,days_back:c});a(m.data||[])}catch(m){console.error("Failed to load traffic data:",m)}finally{l(!1)}}const i=Math.max(...t.map(m=>m.total_actions),1);Math.max(...t.map(m=>m.unique_users),1);const p=t.reduce((m,v)=>m+v.total_actions,0),s=t.length>0?Math.max(...t.map(m=>m.unique_users)):0,u=t.length>0?Math.round(p/t.length):0;function d(){const m=["Period","Total Actions","Unique Users"],v=t.map($=>[$.period_label,String($.total_actions),String($.unique_users)]),w=[m,...v].map($=>$.map(E=>`"${E}"`).join(",")).join(`
`),N=new Blob([w],{type:"text/csv"}),k=URL.createObjectURL(N),z=document.createElement("a");z.href=k,z.download=`traffic_${o}_${c}d.csv`,z.click(),URL.revokeObjectURL(k)}return r?e("div",{className:"p-6",children:e("div",{className:"animate-pulse space-y-4",children:[e("div",{className:"h-8 bg-gray-200 rounded w-48"}),e("div",{className:"grid grid-cols-3 gap-4",children:[1,2,3].map(m=>e("div",{className:"h-20 bg-gray-200 rounded-xl"},m))}),e("div",{className:"h-64 bg-gray-200 rounded-xl"})]})}):e("div",{className:"p-4 lg:p-6",children:[e("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[e("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e("p",{className:"text-xs text-gray-500 font-medium",children:"Total Actions"}),e("p",{className:"text-2xl font-bold text-gray-800",children:p.toLocaleString()})]}),e("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e("p",{className:"text-xs text-gray-500 font-medium",children:"Peak Unique Users"}),e("p",{className:"text-2xl font-bold text-blue-600",children:s.toLocaleString()})]}),e("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e("p",{className:"text-xs text-gray-500 font-medium",children:["Avg Actions / ",o==="daily"?"Day":o==="weekly"?"Week":"Month"]}),e("p",{className:"text-2xl font-bold text-green-600",children:u.toLocaleString()})]})]}),e("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6",children:e("div",{className:"flex flex-wrap items-center gap-3",children:[e("div",{className:"flex gap-1 bg-gray-100 rounded-lg p-1",children:["daily","weekly","monthly"].map(m=>e("button",{onClick:()=>n(m),className:`px-3 py-1.5 text-sm rounded-md transition-colors ${o===m?"bg-white shadow-sm text-blue-600 font-medium":"text-gray-600 hover:text-gray-800"}`,children:m.charAt(0).toUpperCase()+m.slice(1)},m))}),e("select",{className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:c,onChange:m=>h(Number(m.target.value)),children:[e("option",{value:7,children:"Last 7 days"}),e("option",{value:30,children:"Last 30 days"}),e("option",{value:90,children:"Last 90 days"}),e("option",{value:180,children:"Last 6 months"}),e("option",{value:365,children:"Last year"})]}),e("button",{onClick:d,className:"px-4 py-2 text-sm border border-gray-200 rounded-lg hover:bg-gray-50 ml-auto",children:"Export CSV"})]})}),e("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:t.length===0?e("div",{className:"text-center py-12 text-gray-500",children:"No traffic data available for this period"}):e("div",{children:[e("div",{className:"flex items-center gap-4 mb-4 text-xs text-gray-500",children:[e("div",{className:"flex items-center gap-1",children:[e("div",{className:"w-3 h-3 rounded bg-blue-500"}),e("span",{children:"Total Actions"})]}),e("div",{className:"flex items-center gap-1",children:[e("div",{className:"w-3 h-3 rounded bg-green-500"}),e("span",{children:"Unique Users"})]})]}),e("div",{className:"overflow-x-auto",children:e("div",{className:"flex items-end gap-1 min-w-fit",style:{height:"240px"},children:t.map((m,v)=>e("div",{className:"flex flex-col items-center gap-1 flex-1 min-w-[24px] max-w-[48px]",style:{height:"100%"},children:[e("div",{className:"flex-1 flex items-end gap-0.5 w-full",children:[e("div",{className:"flex-1 bg-blue-500 rounded-t opacity-80 hover:opacity-100 transition-opacity",style:{height:`${m.total_actions/i*100}%`,minHeight:"2px"},title:`${m.period_label}: ${m.total_actions.toLocaleString()} actions`}),e("div",{className:"flex-1 bg-green-500 rounded-t opacity-80 hover:opacity-100 transition-opacity",style:{height:`${m.unique_users/i*100}%`,minHeight:"2px"},title:`${m.period_label}: ${m.unique_users.toLocaleString()} users`})]}),e("span",{className:"text-[9px] text-gray-400 truncate w-full text-center",title:m.period_label,children:m.period_label.length>5?m.period_label.slice(-5):m.period_label})]},v))})}),e("details",{className:"mt-4",children:[e("summary",{className:"text-sm text-gray-500 cursor-pointer hover:text-gray-700",children:"Show data table"}),e("table",{className:"w-full text-sm mt-2",children:[e("thead",{children:e("tr",{className:"text-left text-gray-500 border-b border-gray-100",children:[e("th",{className:"pb-2 font-medium",children:"Period"}),e("th",{className:"pb-2 font-medium text-right",children:"Actions"}),e("th",{className:"pb-2 font-medium text-right",children:"Unique Users"})]})}),e("tbody",{children:t.map((m,v)=>e("tr",{className:"border-b border-gray-50",children:[e("td",{className:"py-2 text-gray-700",children:m.period_label}),e("td",{className:"py-2 text-right text-gray-800",children:m.total_actions.toLocaleString()}),e("td",{className:"py-2 text-right text-gray-800",children:m.unique_users.toLocaleString()})]},v))})]})]})]})})]})}function ya(t,a){return new Promise((r,l)=>{X(["core/ajax"],o=>{o.call([{methodname:t,args:a}])[0].then(r).catch(l)})})}function wa(t){return t?new Date(t*1e3).toLocaleString():"-"}function St(t){return new Date(t*1e3).toISOString().split("T")[0]}function Ct(t){return t?Math.floor(new Date(t).getTime()/1e3):0}function _a(){const[t,a]=f([]),[r,l]=f(0),[o,n]=f(!0),[c,h]=f(0),[g]=f(10),[i,p]=f("access_time"),[s,u]=f("DESC"),d=Math.floor(Date.now()/1e3),[m,v]=f(d-7*86400),[w,N]=f(d),[k,z]=f(""),[$,E]=f(""),[A,I]=f(""),[C,x]=f("");G(()=>{_()},[c,i,s,m,w,k,$,A]);async function _(){try{n(!0);const S=await ya("local_elby_dashboard_get_user_access_log",{date_from:m,date_to:w,school_code:k,courseid:0,user_type:$,search:A,sort:i,order:s,page:c,perpage:g});a(S.entries),l(S.total_count)}catch(S){console.error("Failed to load access log:",S)}finally{n(!1)}}function L(S){i===S?u(s==="ASC"?"DESC":"ASC"):(p(S),u("DESC")),h(0)}function b(){I(C),h(0)}function D(){const S=["User","SDMS ID","Type","School","School Code","Course","Action","Target","Time"],W=t.map(V=>[V.user_fullname,V.sdms_id,V.user_type,V.school_name,V.school_code,V.course_name,V.action,V.target,V.access_time?new Date(V.access_time*1e3).toISOString():""]),ne=[S,...W].map(V=>V.map(R=>`"${R}"`).join(",")).join(`
`),Z=new Blob([ne],{type:"text/csv"}),te=URL.createObjectURL(Z),Y=document.createElement("a");Y.href=te,Y.download="access_log.csv",Y.click(),URL.revokeObjectURL(te)}const T=Math.ceil(r/g),F=c*g+1,K=Math.min((c+1)*g,r);function J({field:S}){return S!==i?e("svg",{className:"w-3 h-3 text-gray-400 ml-1 inline",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M7 10l5-5 5 5H7zm0 4l5 5 5-5H7z"})}):s==="ASC"?e("svg",{className:"w-3 h-3 text-blue-600 ml-1 inline",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M7 14l5-5 5 5H7z"})}):e("svg",{className:"w-3 h-3 text-blue-600 ml-1 inline",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M7 10l5 5 5-5H7z"})})}const O=(S,W)=>e("th",{className:"pb-3 font-medium cursor-pointer hover:text-gray-800 select-none whitespace-nowrap",onClick:()=>L(W),children:[S,e(J,{field:W})]});return e("div",{className:"p-4 lg:p-6",children:[e("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6",children:e("div",{className:"flex flex-wrap items-center gap-3",children:[e("div",{className:"flex-1 min-w-[200px] flex gap-2",children:[e("input",{type:"text",placeholder:"Search by name or SDMS ID...",className:"flex-1 px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:C,onInput:S=>x(S.target.value),onKeyDown:S=>{S.key==="Enter"&&b()}}),e("button",{onClick:b,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700",children:"Search"})]}),e("input",{type:"date",className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:St(m),onChange:S=>{v(Ct(S.target.value)),h(0)}}),e("span",{className:"text-gray-400 text-sm",children:"to"}),e("input",{type:"date",className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:St(w),onChange:S=>{N(Ct(S.target.value)+86399),h(0)}}),e("input",{type:"text",placeholder:"School code",className:"w-32 px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:k,onInput:S=>{z(S.target.value),h(0)}}),e("select",{className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:$,onChange:S=>{E(S.target.value),h(0)},children:[e("option",{value:"",children:"All Users"}),e("option",{value:"student",children:"Students"}),e("option",{value:"teacher",children:"Teachers"})]}),e("button",{onClick:D,className:"px-4 py-2 text-sm border border-gray-200 rounded-lg hover:bg-gray-50",children:"Export CSV"})]})}),e("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[e("div",{className:"overflow-x-auto",children:e("table",{className:"w-full text-sm",children:[e("thead",{children:e("tr",{className:"text-left text-gray-500 border-b border-gray-100",children:[O("Time","access_time"),O("User","user_fullname"),e("th",{className:"pb-3 font-medium",children:"SDMS ID"}),e("th",{className:"pb-3 font-medium",children:"Type"}),O("School","school_name"),O("Course","course_name"),e("th",{className:"pb-3 font-medium",children:"Action"}),e("th",{className:"pb-3 font-medium",children:"Target"})]})}),e("tbody",{children:o?Array.from({length:5}).map((S,W)=>e("tr",{className:"border-b border-gray-50",children:Array.from({length:8}).map((ne,Z)=>e("td",{className:"py-3 px-2",children:e("div",{className:"h-4 bg-gray-200 rounded animate-pulse"})},Z))},W)):t.length===0?e("tr",{children:e("td",{colSpan:8,className:"py-12 text-center text-gray-500",children:"No access log entries found"})}):t.map((S,W)=>e("tr",{className:"border-b border-gray-50 hover:bg-gray-50",children:[e("td",{className:"py-3 px-2 text-gray-600 whitespace-nowrap",children:wa(S.access_time)}),e("td",{className:"py-3 px-2 font-medium text-gray-800",children:S.user_fullname}),e("td",{className:"py-3 px-2 text-gray-600",children:S.sdms_id||"-"}),e("td",{className:"py-3 px-2",children:S.user_type?e("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${S.user_type==="teacher"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:S.user_type}):"-"}),e("td",{className:"py-3 px-2 text-gray-600",children:S.school_name||"-"}),e("td",{className:"py-3 px-2 text-gray-600",children:S.course_name||"-"}),e("td",{className:"py-3 px-2 text-gray-600",children:S.action}),e("td",{className:"py-3 px-2 text-gray-600",children:S.target})]},W))})]})}),r>0&&e("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-100",children:[e("span",{className:"text-sm text-gray-600",children:[F,"-",K," of ",r.toLocaleString()]}),e("div",{className:"flex gap-2",children:[e("button",{onClick:()=>h(Math.max(0,c-1)),disabled:c===0,className:"px-3 py-1 text-sm border border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e("span",{className:"px-3 py-1 text-sm text-gray-600",children:["Page ",c+1," of ",T]}),e("button",{onClick:()=>h(Math.min(T-1,c+1)),disabled:c>=T-1,className:"px-3 py-1 text-sm border border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})}function we(t,a){return new Promise((r,l)=>{X(["core/ajax"],o=>{o.call([{methodname:t,args:a}])[0].then(r).catch(l)})})}function Na(t){return t?new Date(t*1e3).toLocaleString():"Never"}function oe({label:t,value:a,icon:r,color:l}){return e("div",{className:`rounded-xl p-4 ${l}`,children:e("div",{className:"flex items-center gap-3",children:[e("div",{className:"w-10 h-10 rounded-full bg-white/40 flex items-center justify-center",children:r}),e("div",{children:[e("p",{className:"text-2xl font-bold text-gray-800",children:a}),e("p",{className:"text-xs text-gray-600",children:t})]})]})})}function ka({operation:t}){return e("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${{create:"bg-green-100 text-green-700",update:"bg-blue-100 text-blue-700",skip:"bg-gray-100 text-gray-700",error:"bg-red-100 text-red-700"}[t]||"bg-gray-100 text-gray-700"}`,children:t})}function Sa({onLinked:t}){const[a,r]=f(""),[l,o]=f([]),[n,c]=f(!1),[h,g]=f(0),[i,p]=f(null),[s,u]=f(""),[d,m]=f("student"),[v,w]=f(null),[N,k]=f(!1),[z,$]=f(!1),[E,A]=f(null),I=Ae(null);function C(b){if(r(b),p(null),w(null),A(null),I.current&&clearTimeout(I.current),b.trim().length<2){o([]),g(0);return}I.current=setTimeout(()=>x(b.trim()),400)}async function x(b){c(!0);try{const D=await we("local_elby_dashboard_search_unlinked_users",{search:b,page:0,perpage:20});o(D.users||[]),g(D.total_count||0)}catch{o([])}finally{c(!1)}}async function _(){if(s.trim()){k(!0),w(null),A(null);try{const b=await we("local_elby_dashboard_lookup_sdms_user",{sdms_code:s.trim(),user_type:d});if(!b.success){A({type:"error",message:b.error||"Not found in SDMS"});return}const D=b.student_data?.names||"";w({sdms_id:b.sdms_id,status:b.status||"",academic_year:b.academic_year||"",school_name:b.school?.school_name||"",student_name:D,program:b.student_data?.program||"",position:b.staff_data?.position||"",user_type:d})}catch(b){A({type:"error",message:b?.message||"Lookup failed"})}finally{k(!1)}}}async function L(){if(!(!i||!s.trim())){$(!0),A(null);try{const b=await we("local_elby_dashboard_link_user",{userid:i.userid,sdms_code:s.trim(),user_type:d});b.success?(A({type:"success",message:`Successfully linked ${i.fullname} to ${s}`}),p(null),u(""),w(null),o(D=>D.filter(T=>T.userid!==i.userid)),t()):A({type:"error",message:b.error||"Link failed"})}catch(b){A({type:"error",message:b?.message||"Link failed"})}finally{$(!1)}}}return e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Link User to SDMS"}),E&&e("div",{className:`mb-4 px-4 py-3 rounded-lg text-sm ${E.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:[E.message,e("button",{onClick:()=>A(null),className:"float-right text-lg leading-none opacity-60 hover:opacity-100",children:""})]}),e("div",{className:"mb-4",children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Unlinked Users"}),e("input",{type:"text",value:a,onInput:b=>C(b.target.value),placeholder:"Search by name, username, or email...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n&&e("p",{className:"text-xs text-gray-400 mt-1",children:"Searching..."}),!n&&h>0&&e("p",{className:"text-xs text-gray-500 mt-1",children:[h," unlinked user",h!==1?"s":""," found"]})]}),l.length>0&&!i&&e("div",{className:"mb-4 max-h-48 overflow-y-auto border border-gray-200 rounded-lg",children:l.map(b=>e("button",{onClick:()=>{p(b),u(""),w(null),A(null)},className:"w-full text-left px-4 py-2 hover:bg-gray-50 border-b border-gray-100 last:border-b-0 transition-colors",children:[e("p",{className:"text-sm font-medium text-gray-800",children:b.fullname}),e("p",{className:"text-xs text-gray-500",children:[b.username,"  ",b.email]})]},b.userid))}),i&&e("div",{className:"border border-blue-200 bg-blue-50 rounded-lg p-4 mb-4",children:[e("div",{className:"flex items-center justify-between mb-3",children:[e("div",{children:[e("p",{className:"text-sm font-semibold text-gray-800",children:i.fullname}),e("p",{className:"text-xs text-gray-500",children:[i.username,"  ",i.email]})]}),e("button",{onClick:()=>{p(null),w(null)},className:"text-gray-400 hover:text-gray-600 text-lg",children:""})]}),e("div",{className:"flex gap-2 mb-3",children:[e("input",{type:"text",value:s,onInput:b=>u(b.target.value),placeholder:"Enter SDMS code...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e("select",{value:d,onChange:b=>m(b.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e("option",{value:"student",children:"Student"}),e("option",{value:"staff",children:"Staff"})]}),e("button",{onClick:_,disabled:N||!s.trim(),className:"px-4 py-2 bg-gray-600 text-white rounded-lg text-sm hover:bg-gray-700 disabled:opacity-50",children:N?"...":"Lookup"})]}),v&&e("div",{className:"bg-white rounded-lg p-3 mb-3 border border-gray-200",children:[e("p",{className:"text-sm font-medium text-gray-800 mb-1",children:"SDMS Preview"}),e("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[e("span",{className:"text-gray-500",children:"SDMS ID:"}),e("span",{className:"text-gray-800",children:v.sdms_id}),v.student_name&&e(B,{children:[e("span",{className:"text-gray-500",children:"Name:"}),e("span",{className:"text-gray-800",children:v.student_name})]}),e("span",{className:"text-gray-500",children:"School:"}),e("span",{className:"text-gray-800",children:v.school_name||"-"}),e("span",{className:"text-gray-500",children:"Status:"}),e("span",{className:"text-gray-800",children:v.status||"-"}),v.program&&e(B,{children:[e("span",{className:"text-gray-500",children:"Program:"}),e("span",{className:"text-gray-800",children:v.program})]}),v.position&&e(B,{children:[e("span",{className:"text-gray-500",children:"Position:"}),e("span",{className:"text-gray-800",children:v.position})]})]})]}),v&&e("button",{onClick:L,disabled:z,className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg text-sm hover:bg-green-700 disabled:opacity-50",children:z?"Linking...":`Link ${i.fullname} to ${s}`})]})]})}function Ca(){const[t,a]=f(null),[r,l]=f([]),[o,n]=f(!0),[c,h]=f(null),[g,i]=f(null);G(()=>{p()},[]);async function p(){try{n(!0);const d=document.getElementById("elby-dashboard-root")?.getAttribute("data-admin");if(d)try{const m=JSON.parse(d);a(m.stats),l(m.logs||[])}catch(m){console.error("Failed to parse admin data:",m)}}finally{n(!1)}}async function s(u){h(u),i(null);try{const m={user_metrics:"compute_user_metrics",school_metrics:"aggregate_school_metrics",sdms_cache:"refresh_sdms_cache"}[u];if(!m)return;const v=await we("local_elby_dashboard_trigger_task",{task_name:m});v.success?(i({type:"success",message:v.message}),p()):i({type:"error",message:v.message})}catch(d){i({type:"error",message:d?.message||"Failed to run task"})}finally{h(null)}}return o?e("div",{className:"p-6 animate-pulse space-y-4",children:[e("div",{className:"h-8 bg-gray-200 rounded w-48"}),e("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(u=>e("div",{className:"h-20 bg-gray-200 rounded-xl"},u))})]}):e("div",{className:"p-4 lg:p-6",children:[t&&e("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[e(oe,{label:"Linked Users",value:t.linked_users,color:"bg-cyan-50",icon:e("svg",{className:"w-5 h-5 text-cyan-600",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5z"})})}),e(oe,{label:"Stale Records",value:t.stale_users,color:"bg-yellow-50",icon:e("svg",{className:"w-5 h-5 text-yellow-600",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"})})}),e(oe,{label:"Sync Errors",value:t.error_users,color:"bg-red-50",icon:e("svg",{className:"w-5 h-5 text-red-500",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})})}),e(oe,{label:"Schools",value:t.total_schools,color:"bg-blue-50",icon:e("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3z"})})}),e(oe,{label:"User Metrics",value:t.user_metrics_count.toLocaleString(),color:"bg-green-50",icon:e("svg",{className:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"})})}),e(oe,{label:"School Metrics",value:t.school_metrics_count.toLocaleString(),color:"bg-purple-50",icon:e("svg",{className:"w-5 h-5 text-purple-600",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"})})})]}),g&&e("div",{className:`mb-4 px-4 py-3 rounded-lg text-sm ${g.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:[g.message,e("button",{onClick:()=>i(null),className:"float-right text-lg leading-none opacity-60 hover:opacity-100",children:""})]}),e("div",{className:"mb-6",children:e(Sa,{onLinked:p})}),e("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Manual Sync Triggers"}),e("p",{className:"text-sm text-gray-500 mb-4",children:"Run scheduled tasks manually from Site Admin > Server > Scheduled Tasks, or use the buttons below."}),e("div",{className:"space-y-3",children:[e("button",{onClick:()=>s("user_metrics"),disabled:c!==null,className:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors disabled:opacity-50",children:[e("div",{children:[e("p",{className:"text-sm font-medium text-gray-800",children:"Compute User Metrics"}),e("p",{className:"text-xs text-gray-500",children:"Hourly task - aggregates logstore data"})]}),c==="user_metrics"&&e("div",{className:"w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})]}),e("button",{onClick:()=>s("school_metrics"),disabled:c!==null,className:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors disabled:opacity-50",children:[e("div",{children:[e("p",{className:"text-sm font-medium text-gray-800",children:"Aggregate School Metrics"}),e("p",{className:"text-xs text-gray-500",children:"Daily task - rolls up to school level"})]}),c==="school_metrics"&&e("div",{className:"w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})]}),e("button",{onClick:()=>s("sdms_cache"),disabled:c!==null,className:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors disabled:opacity-50",children:[e("div",{children:[e("p",{className:"text-sm font-medium text-gray-800",children:"Refresh SDMS Cache"}),e("p",{className:"text-xs text-gray-500",children:"Daily task - refreshes stale SDMS records"})]}),c==="sdms_cache"&&e("div",{className:"w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})]})]})]}),e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Recent Sync Logs"}),r.length===0?e("div",{className:"text-center text-gray-400 py-8",children:e("p",{children:"No sync logs found"})}):e("div",{className:"overflow-x-auto max-h-80 overflow-y-auto",children:e("table",{className:"w-full text-xs",children:[e("thead",{className:"sticky top-0 bg-white",children:e("tr",{className:"text-left text-gray-500 border-b border-gray-100",children:[e("th",{className:"pb-2 font-medium",children:"Type"}),e("th",{className:"pb-2 font-medium",children:"Entity"}),e("th",{className:"pb-2 font-medium",children:"Op"}),e("th",{className:"pb-2 font-medium",children:"Time"})]})}),e("tbody",{children:r.map(u=>e("tr",{className:"border-b border-gray-50",children:[e("td",{className:"py-2 text-gray-600",children:u.sync_type}),e("td",{className:"py-2 text-gray-600 truncate max-w-[80px]",children:u.entity_id||"-"}),e("td",{className:"py-2",children:e(ka,{operation:u.operation})}),e("td",{className:"py-2 text-gray-500",children:Na(u.timecreated)})]},u.id))})]})})]})]})]})}function za({user:t,activePage:a,themeConfig:r,onMenuClick:l}){const n={home:"Dashboard",completion:"Completion Report",courses:"Courses Report",schools:"Schools Directory",school_detail:"School Detail",students:"Student List",teachers:"Teacher List",traffic:"Platform Traffic",accesslog:"Access Log",admin:"Admin Panel"}[a]||"Dashboard";return e("header",{className:"bg-white border-b border-gray-100 px-2 sm:px-4 lg:px-6 py-3 sm:py-4",children:e("div",{className:"flex items-center justify-between",children:[e("div",{className:"flex items-center gap-3",children:[e("button",{onClick:l,className:"lg:hidden p-2 -ml-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg","aria-label":"Toggle menu",children:e("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})}),e("h1",{className:"text-xl font-semibold text-gray-800",children:n})]}),e("div",{className:"flex items-center gap-4 lg:gap-6",children:[r.showNotifications&&e("button",{className:"relative text-gray-500 hover:text-gray-700",children:[e("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),e("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),e("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full"})]}),r.showUserProfile&&e("div",{className:"flex items-center gap-3",children:[e("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center text-white font-semibold text-sm overflow-hidden",children:t.avatar?e("img",{src:t.avatar,alt:t.fullname,className:"w-full h-full object-cover"}):e("span",{children:[t.firstname.charAt(0),t.lastname.charAt(0)]})}),e("div",{className:"hidden sm:block",children:[e("p",{className:"text-sm font-semibold text-gray-800",children:t.fullname}),e("p",{className:"text-xs text-gray-500",children:t.isAdmin?"Admin":t.roles.includes("teacher")?"Teacher":"User"})]})]})]})]})})}function Ra({user:t,stats:a,activePage:r,sidenavConfig:l,themeConfig:o,coursesReportData:n,schoolCode:c}){const[h,g]=f(!1);return e("div",{className:"flex h-screen bg-gray-50",children:[e(Kt,{activePage:r,sidenavConfig:l,themeConfig:o,isOpen:h,onClose:()=>g(!1)}),e("div",{className:"flex-1 flex flex-col min-h-0",children:[e(za,{user:t,activePage:r,themeConfig:o,onMenuClick:()=>g(!h)}),e("main",{className:"flex-1 overflow-y-auto",children:[r==="home"&&e(Ot,{user:t,stats:a,themeConfig:o}),r==="completion"&&e(Yt,{}),r==="courses"&&n&&e(na,{data:n,themeConfig:o}),r==="schools"&&e(ca,{}),r==="school_detail"&&c&&e(pa,{schoolCode:c}),r==="students"&&e(kt,{initialSchoolCode:c}),r==="teachers"&&e(kt,{userType:"teacher",user:t,initialSchoolCode:c}),r==="traffic"&&e(ba,{}),r==="accesslog"&&e(_a,{}),r==="admin"&&e(Ca,{})]})]})]})}const La=(t="#elby-dashboard-root")=>{const a=document.querySelector(t);if(!a){console.error(`Container not found: ${t}`);return}try{const r=a.getAttribute("data-user"),l=a.getAttribute("data-stats"),o=a.getAttribute("data-sidenav"),n=a.getAttribute("data-theme"),c=a.getAttribute("data-courses-report"),h=a.getAttribute("data-page"),g=r?JSON.parse(r):{id:0,fullname:"Guest",firstname:"Guest",lastname:"",email:"",avatar:"",roles:[]},i=l?JSON.parse(l):{totalCourses:0,totalUsers:0,totalEnrollments:0,totalActivities:0},p=o?JSON.parse(o):{title:"Dashboard",logoUrl:null},s=n?JSON.parse(n):{sidenavAccentColor:"#005198",statCard1Color:"#cffafe",statCard2Color:"#fef3c7",statCard3Color:"#f3e8ff",statCard4Color:"#dcfce7",chartPrimaryColor:"#22d3ee",chartSecondaryColor:"#a78bfa",showSearchBar:!0,showNotifications:!0,showUserProfile:!0,menuVisibility:{courses:!0,presence:!0,communication:!0,event:!0,pedagogy:!0,message:!0,completion:!0,settings:!0}},u=c?JSON.parse(c):null,d=a.getAttribute("data-school-code")||void 0,m=h||"home";console.log("Elby Dashboard initialized:",{user:g.fullname,activePage:m}),Dt(We(Ra,{user:g,stats:i,activePage:m,sidenavConfig:p,themeConfig:s,coursesReportData:u,schoolCode:d}),a)}catch(r){console.error("Error initializing Elby Dashboard:",r)}};He.init=La,Object.defineProperty(He,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=dashboard.js.map

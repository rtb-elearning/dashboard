define(["require","exports"],(function(te,Be){"use strict";var Ve=document.createElement("style");Ve.textContent=`@layer properties{@supports ((-webkit-hyphens:none) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-translate-x:0;--tw-translate-y:0;--tw-translate-z:0;--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-space-y-reverse:0;--tw-border-style:solid;--tw-gradient-position:initial;--tw-gradient-from:#0000;--tw-gradient-via:#0000;--tw-gradient-to:#0000;--tw-gradient-stops:initial;--tw-gradient-via-stops:initial;--tw-gradient-from-position:0%;--tw-gradient-via-position:50%;--tw-gradient-to-position:100%;--tw-leading:initial;--tw-font-weight:initial;--tw-tracking:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000;--tw-blur:initial;--tw-brightness:initial;--tw-contrast:initial;--tw-grayscale:initial;--tw-hue-rotate:initial;--tw-invert:initial;--tw-opacity:initial;--tw-saturate:initial;--tw-sepia:initial;--tw-drop-shadow:initial;--tw-drop-shadow-color:initial;--tw-drop-shadow-alpha:100%;--tw-drop-shadow-size:initial;--tw-duration:initial;--tw-ease:initial;--tw-scale-x:1;--tw-scale-y:1;--tw-scale-z:1}}}@layer theme{:root,:host{--font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--color-red-50:oklch(97.1% .013 17.38);--color-red-100:oklch(93.6% .032 17.717);--color-red-200:oklch(88.5% .062 18.334);--color-red-500:oklch(63.7% .237 25.331);--color-red-600:oklch(57.7% .245 27.325);--color-red-700:oklch(50.5% .213 27.518);--color-red-800:oklch(44.4% .177 26.899);--color-orange-400:oklch(75% .183 55.934);--color-orange-500:oklch(70.5% .213 47.604);--color-amber-50:oklch(98.7% .022 95.277);--color-amber-400:oklch(82.8% .189 84.429);--color-amber-500:oklch(76.9% .188 70.08);--color-amber-600:oklch(66.6% .179 58.318);--color-amber-700:oklch(55.5% .163 48.998);--color-yellow-50:oklch(98.7% .026 102.212);--color-yellow-100:oklch(97.3% .071 103.193);--color-yellow-400:oklch(85.2% .199 91.936);--color-yellow-600:oklch(68.1% .162 75.834);--color-yellow-700:oklch(55.4% .135 66.442);--color-green-50:oklch(98.2% .018 155.826);--color-green-100:oklch(96.2% .044 156.743);--color-green-200:oklch(92.5% .084 155.995);--color-green-500:oklch(72.3% .219 149.579);--color-green-600:oklch(62.7% .194 149.214);--color-green-700:oklch(52.7% .154 150.069);--color-green-800:oklch(44.8% .119 151.328);--color-emerald-50:oklch(97.9% .021 166.113);--color-emerald-700:oklch(50.8% .118 165.612);--color-teal-500:oklch(70.4% .14 182.503);--color-cyan-50:oklch(98.4% .019 200.873);--color-cyan-400:oklch(78.9% .154 211.53);--color-cyan-600:oklch(60.9% .126 221.723);--color-cyan-700:oklch(52% .105 223.128);--color-sky-50:oklch(97.7% .013 236.62);--color-blue-50:oklch(97% .014 254.604);--color-blue-100:oklch(93.2% .032 255.585);--color-blue-200:oklch(88.2% .059 254.128);--color-blue-500:oklch(62.3% .214 259.815);--color-blue-600:oklch(54.6% .245 262.881);--color-blue-700:oklch(48.8% .243 264.376);--color-blue-800:oklch(42.4% .199 265.638);--color-indigo-500:oklch(58.5% .233 277.117);--color-purple-50:oklch(97.7% .014 308.299);--color-purple-100:oklch(94.6% .033 307.174);--color-purple-600:oklch(55.8% .288 302.321);--color-purple-700:oklch(49.6% .265 301.924);--color-pink-400:oklch(71.8% .202 349.761);--color-pink-500:oklch(65.6% .241 354.308);--color-gray-50:oklch(98.5% .002 247.839);--color-gray-100:oklch(96.7% .003 264.542);--color-gray-200:oklch(92.8% .006 264.531);--color-gray-300:oklch(87.2% .01 258.338);--color-gray-400:oklch(70.7% .022 261.325);--color-gray-500:oklch(55.1% .027 264.364);--color-gray-600:oklch(44.6% .03 256.802);--color-gray-700:oklch(37.3% .034 259.733);--color-gray-800:oklch(27.8% .033 256.848);--color-gray-900:oklch(21% .034 264.665);--color-black:#000;--color-white:#fff;--spacing:.25rem;--container-md:28rem;--text-xs:.75rem;--text-xs--line-height:calc(1/.75);--text-sm:.875rem;--text-sm--line-height:calc(1.25/.875);--text-lg:1.125rem;--text-lg--line-height:calc(1.75/1.125);--text-xl:1.25rem;--text-xl--line-height:calc(1.75/1.25);--text-2xl:1.5rem;--text-2xl--line-height:calc(2/1.5);--text-3xl:1.875rem;--text-3xl--line-height: 1.2 ;--font-weight-normal:400;--font-weight-medium:500;--font-weight-semibold:600;--font-weight-bold:700;--tracking-wider:.05em;--radius-sm:.25rem;--radius-md:.375rem;--radius-lg:.5rem;--radius-xl:.75rem;--ease-in-out:cubic-bezier(.4,0,.2,1);--animate-spin:spin 1s linear infinite;--animate-pulse:pulse 2s cubic-bezier(.4,0,.6,1)infinite;--default-transition-duration:.15s;--default-transition-timing-function:cubic-bezier(.4,0,.2,1);--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono)}}@layer base{*,:after,:before,::backdrop{box-sizing:border-box;border:0 solid;margin:0;padding:0}::file-selector-button{box-sizing:border-box;border:0 solid;margin:0;padding:0}html,:host{-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;line-height:1.5;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::-moz-placeholder{opacity:1}::placeholder{opacity:1}@supports (not (-webkit-appearance:-apple-pay-button)) or (contain-intrinsic-size:1px){::-moz-placeholder{color:currentColor}::placeholder{color:currentColor}@supports (color:color-mix(in lab,red,red)){::-moz-placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit{padding-block:0}::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-month-field{padding-block:0}::-webkit-datetime-edit-day-field{padding-block:0}::-webkit-datetime-edit-hour-field{padding-block:0}::-webkit-datetime-edit-minute-field{padding-block:0}::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-millisecond-field{padding-block:0}::-webkit-datetime-edit-meridiem-field{padding-block:0}::-webkit-calendar-picker-indicator{line-height:1}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){-webkit-appearance:button;-moz-appearance:button;appearance:button}::file-selector-button{-webkit-appearance:button;-moz-appearance:button;appearance:button}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}}@layer components;@layer utilities{.visible{visibility:visible}.sr-only{clip-path:inset(50%);white-space:nowrap;border-width:0;width:1px;height:1px;margin:-1px;padding:0;position:absolute;overflow:hidden}.absolute{position:absolute}.fixed{position:fixed}.relative{position:relative}.static{position:static}.sticky{position:sticky}.inset-0{inset:calc(var(--spacing)*0)}.inset-y-0{inset-block:calc(var(--spacing)*0)}.-top-1{top:calc(var(--spacing)*-1)}.top-0{top:calc(var(--spacing)*0)}.top-1{top:calc(var(--spacing)*1)}.top-1\\/2{top:50%}.-right-1{right:calc(var(--spacing)*-1)}.bottom-0{bottom:calc(var(--spacing)*0)}.bottom-\\[-24px\\]{bottom:-24px}.-left-6{left:calc(var(--spacing)*-6)}.left-0{left:calc(var(--spacing)*0)}.left-1{left:calc(var(--spacing)*1)}.left-1\\/2{left:50%}.left-8{left:calc(var(--spacing)*8)}.left-\\[232px\\]{left:232px}.z-10{z-index:10}.z-20{z-index:20}.z-30{z-index:30}.z-40{z-index:40}.z-50{z-index:50}.col-6{grid-column:6}.float-right{float:right}.container{width:100%}@media(min-width:40rem){.container{max-width:40rem}}@media(min-width:48rem){.container{max-width:48rem}}@media(min-width:64rem){.container{max-width:64rem}}@media(min-width:80rem){.container{max-width:80rem}}@media(min-width:96rem){.container{max-width:96rem}}.m-0{margin:calc(var(--spacing)*0)}.mx-auto{margin-inline:auto}.me-1{margin-inline-end:calc(var(--spacing)*1)}.me-2{margin-inline-end:calc(var(--spacing)*2)}.me-3{margin-inline-end:calc(var(--spacing)*3)}.-mt-2{margin-top:calc(var(--spacing)*-2)}.mt-1{margin-top:calc(var(--spacing)*1)}.mt-2{margin-top:calc(var(--spacing)*2)}.mt-3{margin-top:calc(var(--spacing)*3)}.mt-4{margin-top:calc(var(--spacing)*4)}.mt-6{margin-top:calc(var(--spacing)*6)}.mt-auto{margin-top:auto}.mr-1{margin-right:calc(var(--spacing)*1)}.mr-2{margin-right:calc(var(--spacing)*2)}.mr-3{margin-right:calc(var(--spacing)*3)}.mb-0{margin-bottom:calc(var(--spacing)*0)}.mb-1{margin-bottom:calc(var(--spacing)*1)}.mb-2{margin-bottom:calc(var(--spacing)*2)}.mb-3{margin-bottom:calc(var(--spacing)*3)}.mb-4{margin-bottom:calc(var(--spacing)*4)}.mb-5{margin-bottom:calc(var(--spacing)*5)}.mb-6{margin-bottom:calc(var(--spacing)*6)}.mb-8{margin-bottom:calc(var(--spacing)*8)}.-ml-2{margin-left:calc(var(--spacing)*-2)}.ml-1{margin-left:calc(var(--spacing)*1)}.ml-2{margin-left:calc(var(--spacing)*2)}.ml-4{margin-left:calc(var(--spacing)*4)}.ml-6{margin-left:calc(var(--spacing)*6)}.ml-8{margin-left:calc(var(--spacing)*8)}.ml-auto{margin-left:auto}.block{display:block}.flex{display:flex}.grid{display:grid}.hidden{display:none}.inline{display:inline}.inline-block{display:inline-block}.inline-flex{display:inline-flex}.table{display:table}.h-0{height:calc(var(--spacing)*0)}.h-0\\.5{height:calc(var(--spacing)*.5)}.h-1{height:calc(var(--spacing)*1)}.h-1\\.5{height:calc(var(--spacing)*1.5)}.h-2{height:calc(var(--spacing)*2)}.h-2\\.5{height:calc(var(--spacing)*2.5)}.h-3{height:calc(var(--spacing)*3)}.h-3\\.5{height:calc(var(--spacing)*3.5)}.h-4{height:calc(var(--spacing)*4)}.h-5{height:calc(var(--spacing)*5)}.h-6{height:calc(var(--spacing)*6)}.h-7{height:calc(var(--spacing)*7)}.h-8{height:calc(var(--spacing)*8)}.h-10{height:calc(var(--spacing)*10)}.h-12{height:calc(var(--spacing)*12)}.h-16{height:calc(var(--spacing)*16)}.h-20{height:calc(var(--spacing)*20)}.h-24{height:calc(var(--spacing)*24)}.h-32{height:calc(var(--spacing)*32)}.h-36{height:calc(var(--spacing)*36)}.h-40{height:calc(var(--spacing)*40)}.h-48{height:calc(var(--spacing)*48)}.h-56{height:calc(var(--spacing)*56)}.h-64{height:calc(var(--spacing)*64)}.h-full{height:100%}.h-screen{height:100vh}.max-h-48{max-height:calc(var(--spacing)*48)}.max-h-80{max-height:calc(var(--spacing)*80)}.max-h-96{max-height:calc(var(--spacing)*96)}.max-h-\\[600px\\]{max-height:600px}.min-h-0{min-height:calc(var(--spacing)*0)}.min-h-screen{min-height:100vh}.w-1{width:calc(var(--spacing)*1)}.w-1\\.5{width:calc(var(--spacing)*1.5)}.w-2{width:calc(var(--spacing)*2)}.w-2\\.5{width:calc(var(--spacing)*2.5)}.w-3{width:calc(var(--spacing)*3)}.w-3\\.5{width:calc(var(--spacing)*3.5)}.w-4{width:calc(var(--spacing)*4)}.w-5{width:calc(var(--spacing)*5)}.w-6{width:calc(var(--spacing)*6)}.w-8{width:calc(var(--spacing)*8)}.w-10{width:calc(var(--spacing)*10)}.w-12{width:calc(var(--spacing)*12)}.w-16{width:calc(var(--spacing)*16)}.w-20{width:calc(var(--spacing)*20)}.w-28{width:calc(var(--spacing)*28)}.w-32{width:calc(var(--spacing)*32)}.w-36{width:calc(var(--spacing)*36)}.w-48{width:calc(var(--spacing)*48)}.w-64{width:calc(var(--spacing)*64)}.w-72{width:calc(var(--spacing)*72)}.w-100{width:calc(var(--spacing)*100)}.w-full{width:100%}.max-w-\\[2\\.5rem\\]{max-width:2.5rem}.max-w-\\[48px\\]{max-width:48px}.max-w-\\[80px\\]{max-width:80px}.max-w-\\[120px\\]{max-width:120px}.max-w-\\[140px\\]{max-width:140px}.max-w-\\[200px\\]{max-width:200px}.max-w-md{max-width:var(--container-md)}.min-w-\\[24px\\]{min-width:24px}.min-w-\\[50px\\]{min-width:50px}.min-w-\\[140px\\]{min-width:140px}.min-w-\\[200px\\]{min-width:200px}.min-w-fit{min-width:-moz-fit-content;min-width:fit-content}.flex-1{flex:1}.flex-shrink-0,.shrink-0{flex-shrink:0}.origin-top{transform-origin:top}.-translate-x-1{--tw-translate-x:calc(var(--spacing)*-1);translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-x-1\\/2{--tw-translate-x: -50% ;translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-x-full{--tw-translate-x:-100%;translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-x-0{--tw-translate-x:calc(var(--spacing)*0);translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-y-1{--tw-translate-y:calc(var(--spacing)*1);translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-y-1\\/2{--tw-translate-y: 50% ;translate:var(--tw-translate-x)var(--tw-translate-y)}.-rotate-90{rotate:-90deg}.rotate-90{rotate:90deg}.rotate-180{rotate:180deg}.transform{transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)}.animate-pulse{animation:var(--animate-pulse)}.animate-spin{animation:var(--animate-spin)}.cursor-default{cursor:default}.cursor-pointer{cursor:pointer}.list-none{list-style-type:none}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.items-end{align-items:flex-end}.items-start{align-items:flex-start}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.gap-0{gap:calc(var(--spacing)*0)}.gap-0\\.5{gap:calc(var(--spacing)*.5)}.gap-1{gap:calc(var(--spacing)*1)}.gap-1\\.5{gap:calc(var(--spacing)*1.5)}.gap-2{gap:calc(var(--spacing)*2)}.gap-3{gap:calc(var(--spacing)*3)}.gap-4{gap:calc(var(--spacing)*4)}.gap-6{gap:calc(var(--spacing)*6)}.gap-8{gap:calc(var(--spacing)*8)}:where(.space-y-0>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*0)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*0)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-0\\.5>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*.5)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*.5)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-1>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*1)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*1)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-3>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*3)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*3)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-4>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*4)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*4)*calc(1 - var(--tw-space-y-reverse)))}.truncate{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.overflow-visible{overflow:visible}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.rounded{border-radius:.25rem}.rounded-full{border-radius:3.40282e38px}.rounded-lg{border-radius:var(--radius-lg)}.rounded-md{border-radius:var(--radius-md)}.rounded-xl{border-radius:var(--radius-xl)}.rounded-t{border-top-left-radius:.25rem;border-top-right-radius:.25rem}.rounded-t-sm{border-top-left-radius:var(--radius-sm);border-top-right-radius:var(--radius-sm)}.border{border-style:var(--tw-border-style);border-width:1px}.border-2{border-style:var(--tw-border-style);border-width:2px}.border-t{border-top-style:var(--tw-border-style);border-top-width:1px}.border-t-2{border-top-style:var(--tw-border-style);border-top-width:2px}.border-r{border-right-style:var(--tw-border-style);border-right-width:1px}.border-b{border-bottom-style:var(--tw-border-style);border-bottom-width:1px}.border-l{border-left-style:var(--tw-border-style);border-left-width:1px}.border-l-2{border-left-style:var(--tw-border-style);border-left-width:2px}.border-dashed{--tw-border-style:dashed;border-style:dashed}.border-none{--tw-border-style:none;border-style:none}.border-blue-200{border-color:var(--color-blue-200)}.border-blue-600{border-color:var(--color-blue-600)}.border-gray-50{border-color:var(--color-gray-50)}.border-gray-100{border-color:var(--color-gray-100)}.border-gray-200{border-color:var(--color-gray-200)}.border-gray-300{border-color:var(--color-gray-300)}.border-green-200{border-color:var(--color-green-200)}.border-red-200{border-color:var(--color-red-200)}.border-t-transparent{border-top-color:#0000}.bg-amber-50{background-color:var(--color-amber-50)}.bg-amber-500{background-color:var(--color-amber-500)}.bg-black{background-color:var(--color-black)}.bg-black\\/50{background-color:#00000080}@supports (color:color-mix(in lab,red,red)){.bg-black\\/50{background-color:color-mix(in oklab,var(--color-black)50%,transparent)}}.bg-blue-50{background-color:var(--color-blue-50)}.bg-blue-100{background-color:var(--color-blue-100)}.bg-blue-500{background-color:var(--color-blue-500)}.bg-blue-600{background-color:var(--color-blue-600)}.bg-cyan-50{background-color:var(--color-cyan-50)}.bg-cyan-400{background-color:var(--color-cyan-400)}.bg-emerald-50{background-color:var(--color-emerald-50)}.bg-gray-50{background-color:var(--color-gray-50)}.bg-gray-100{background-color:var(--color-gray-100)}.bg-gray-200{background-color:var(--color-gray-200)}.bg-gray-300{background-color:var(--color-gray-300)}.bg-gray-400{background-color:var(--color-gray-400)}.bg-gray-600{background-color:var(--color-gray-600)}.bg-green-50{background-color:var(--color-green-50)}.bg-green-100{background-color:var(--color-green-100)}.bg-green-500{background-color:var(--color-green-500)}.bg-green-600{background-color:var(--color-green-600)}.bg-indigo-500{background-color:var(--color-indigo-500)}.bg-orange-400{background-color:var(--color-orange-400)}.bg-pink-400{background-color:var(--color-pink-400)}.bg-pink-500{background-color:var(--color-pink-500)}.bg-purple-50{background-color:var(--color-purple-50)}.bg-purple-100{background-color:var(--color-purple-100)}.bg-red-50{background-color:var(--color-red-50)}.bg-red-50\\/50{background-color:#fef2f280}@supports (color:color-mix(in lab,red,red)){.bg-red-50\\/50{background-color:color-mix(in oklab,var(--color-red-50)50%,transparent)}}.bg-red-100{background-color:var(--color-red-100)}.bg-red-500{background-color:var(--color-red-500)}.bg-sky-50{background-color:var(--color-sky-50)}.bg-teal-500{background-color:var(--color-teal-500)}.bg-transparent{background-color:#0000}.bg-white{background-color:var(--color-white)}.bg-white\\/30{background-color:#ffffff4d}@supports (color:color-mix(in lab,red,red)){.bg-white\\/30{background-color:color-mix(in oklab,var(--color-white)30%,transparent)}}.bg-white\\/40{background-color:#fff6}@supports (color:color-mix(in lab,red,red)){.bg-white\\/40{background-color:color-mix(in oklab,var(--color-white)40%,transparent)}}.bg-yellow-50{background-color:var(--color-yellow-50)}.bg-yellow-100{background-color:var(--color-yellow-100)}.bg-yellow-400{background-color:var(--color-yellow-400)}.bg-gradient-to-br{--tw-gradient-position:to bottom right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.from-amber-400{--tw-gradient-from:var(--color-amber-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-orange-500{--tw-gradient-to:var(--color-orange-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.object-contain{object-fit:contain}.object-cover{object-fit:cover}.p-0{padding:calc(var(--spacing)*0)}.p-1{padding:calc(var(--spacing)*1)}.p-2{padding:calc(var(--spacing)*2)}.p-3{padding:calc(var(--spacing)*3)}.p-4{padding:calc(var(--spacing)*4)}.p-5{padding:calc(var(--spacing)*5)}.p-6{padding:calc(var(--spacing)*6)}.p-8{padding:calc(var(--spacing)*8)}.px-2{padding-inline:calc(var(--spacing)*2)}.px-3{padding-inline:calc(var(--spacing)*3)}.px-4{padding-inline:calc(var(--spacing)*4)}.px-5{padding-inline:calc(var(--spacing)*5)}.py-0{padding-block:calc(var(--spacing)*0)}.py-0\\.5{padding-block:calc(var(--spacing)*.5)}.py-1{padding-block:calc(var(--spacing)*1)}.py-1\\.5{padding-block:calc(var(--spacing)*1.5)}.py-2{padding-block:calc(var(--spacing)*2)}.py-2\\.5{padding-block:calc(var(--spacing)*2.5)}.py-3{padding-block:calc(var(--spacing)*3)}.py-4{padding-block:calc(var(--spacing)*4)}.py-6{padding-block:calc(var(--spacing)*6)}.py-8{padding-block:calc(var(--spacing)*8)}.py-12{padding-block:calc(var(--spacing)*12)}.pt-3{padding-top:calc(var(--spacing)*3)}.pt-4{padding-top:calc(var(--spacing)*4)}.pr-2{padding-right:calc(var(--spacing)*2)}.pr-3{padding-right:calc(var(--spacing)*3)}.pr-4{padding-right:calc(var(--spacing)*4)}.pb-1{padding-bottom:calc(var(--spacing)*1)}.pb-1\\.5{padding-bottom:calc(var(--spacing)*1.5)}.pb-2{padding-bottom:calc(var(--spacing)*2)}.pb-3{padding-bottom:calc(var(--spacing)*3)}.pb-6{padding-bottom:calc(var(--spacing)*6)}.pl-2{padding-left:calc(var(--spacing)*2)}.pl-3{padding-left:calc(var(--spacing)*3)}.text-center{text-align:center}.text-left{text-align:left}.text-right{text-align:right}.text-2xl{font-size:var(--text-2xl);line-height:var(--tw-leading,var(--text-2xl--line-height))}.text-3xl{font-size:var(--text-3xl);line-height:var(--tw-leading,var(--text-3xl--line-height))}.text-lg{font-size:var(--text-lg);line-height:var(--tw-leading,var(--text-lg--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.text-xl{font-size:var(--text-xl);line-height:var(--tw-leading,var(--text-xl--line-height))}.text-xs{font-size:var(--text-xs);line-height:var(--tw-leading,var(--text-xs--line-height))}.text-\\[9px\\]{font-size:9px}.text-\\[10px\\]{font-size:10px}.text-\\[11px\\]{font-size:11px}.leading-none{--tw-leading:1;line-height:1}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.font-medium{--tw-font-weight:var(--font-weight-medium);font-weight:var(--font-weight-medium)}.font-normal{--tw-font-weight:var(--font-weight-normal);font-weight:var(--font-weight-normal)}.font-semibold{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.tracking-wider{--tw-tracking:var(--tracking-wider);letter-spacing:var(--tracking-wider)}.whitespace-nowrap{white-space:nowrap}.text-amber-600{color:var(--color-amber-600)}.text-amber-700{color:var(--color-amber-700)}.text-blue-600{color:var(--color-blue-600)}.text-blue-700{color:var(--color-blue-700)}.text-cyan-600{color:var(--color-cyan-600)}.text-cyan-700{color:var(--color-cyan-700)}.text-emerald-700{color:var(--color-emerald-700)}.text-gray-300{color:var(--color-gray-300)}.text-gray-400{color:var(--color-gray-400)}.text-gray-500{color:var(--color-gray-500)}.text-gray-600{color:var(--color-gray-600)}.text-gray-700{color:var(--color-gray-700)}.text-gray-800{color:var(--color-gray-800)}.text-gray-900{color:var(--color-gray-900)}.text-green-600{color:var(--color-green-600)}.text-green-700{color:var(--color-green-700)}.text-green-800{color:var(--color-green-800)}.text-purple-600{color:var(--color-purple-600)}.text-purple-700{color:var(--color-purple-700)}.text-red-500{color:var(--color-red-500)}.text-red-600{color:var(--color-red-600)}.text-red-700{color:var(--color-red-700)}.text-red-800{color:var(--color-red-800)}.text-white{color:var(--color-white)}.text-yellow-600{color:var(--color-yellow-600)}.text-yellow-700{color:var(--color-yellow-700)}.uppercase{text-transform:uppercase}.italic{font-style:italic}.no-underline{text-decoration-line:none}.opacity-60{opacity:.6}.opacity-80{opacity:.8}.shadow-lg{--tw-shadow:0 10px 15px -3px var(--tw-shadow-color,#0000001a),0 4px 6px -4px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 3px 0 var(--tw-shadow-color,#0000001a),0 1px 2px -1px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.filter{filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.transition{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to,opacity,box-shadow,transform,translate,scale,rotate,filter,-webkit-backdrop-filter,backdrop-filter,display,content-visibility,overlay,pointer-events;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-all{transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-colors{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-opacity{transition-property:opacity;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-transform{transition-property:transform,translate,scale,rotate;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.duration-300{--tw-duration:.3s;transition-duration:.3s}.ease-in-out{--tw-ease:var(--ease-in-out);transition-timing-function:var(--ease-in-out)}.outline-none{--tw-outline-style:none;outline-style:none}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}@media(hover:hover){.group-hover\\:bg-gray-50:is(:where(.group):hover *){background-color:var(--color-gray-50)}}.last\\:border-b-0:last-child{border-bottom-style:var(--tw-border-style);border-bottom-width:0}.focus-within\\:border-blue-500:focus-within{border-color:var(--color-blue-500)}.focus-within\\:ring-1:focus-within{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(1px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus-within\\:ring-blue-500:focus-within{--tw-ring-color:var(--color-blue-500)}@media(hover:hover){.hover\\:z-10:hover{z-index:10}.hover\\:scale-150:hover{--tw-scale-x:150%;--tw-scale-y:150%;--tw-scale-z:150%;scale:var(--tw-scale-x)var(--tw-scale-y)}.hover\\:border-gray-200:hover{border-color:var(--color-gray-200)}.hover\\:border-gray-400:hover{border-color:var(--color-gray-400)}.hover\\:bg-blue-50:hover{background-color:var(--color-blue-50)}.hover\\:bg-blue-700:hover{background-color:var(--color-blue-700)}.hover\\:bg-gray-50:hover{background-color:var(--color-gray-50)}.hover\\:bg-gray-100:hover{background-color:var(--color-gray-100)}.hover\\:bg-gray-200:hover{background-color:var(--color-gray-200)}.hover\\:bg-gray-700:hover{background-color:var(--color-gray-700)}.hover\\:bg-green-700:hover{background-color:var(--color-green-700)}.hover\\:text-blue-800:hover{color:var(--color-blue-800)}.hover\\:text-gray-600:hover{color:var(--color-gray-600)}.hover\\:text-gray-700:hover{color:var(--color-gray-700)}.hover\\:text-gray-800:hover{color:var(--color-gray-800)}.hover\\:underline:hover{text-decoration-line:underline}.hover\\:opacity-100:hover{opacity:1}.hover\\:shadow-md:hover{--tw-shadow:0 4px 6px -1px var(--tw-shadow-color,#0000001a),0 2px 4px -2px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}}.focus\\:border-blue-500:focus{border-color:var(--color-blue-500)}.focus\\:ring-0:focus{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(0px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus\\:ring-1:focus{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(1px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus\\:ring-2:focus{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus\\:ring-blue-500:focus{--tw-ring-color:var(--color-blue-500)}.focus\\:outline-none:focus{--tw-outline-style:none;outline-style:none}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\:opacity-50:disabled{opacity:.5}@media(min-width:40rem){.sm\\:block{display:block}.sm\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.sm\\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.sm\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.sm\\:p-4{padding:calc(var(--spacing)*4)}.sm\\:px-4{padding-inline:calc(var(--spacing)*4)}.sm\\:py-4{padding-block:calc(var(--spacing)*4)}}@media(min-width:64rem){.lg\\:sticky{position:sticky}.lg\\:hidden{display:none}.lg\\:translate-x-0{--tw-translate-x:calc(var(--spacing)*0);translate:var(--tw-translate-x)var(--tw-translate-y)}.lg\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.lg\\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.lg\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.lg\\:grid-cols-5{grid-template-columns:repeat(5,minmax(0,1fr))}.lg\\:gap-6{gap:calc(var(--spacing)*6)}.lg\\:p-6{padding:calc(var(--spacing)*6)}.lg\\:px-6{padding-inline:calc(var(--spacing)*6)}}}body.local-rtbdashboard-plugin .main-inner{max-width:100%!important;margin-top:0!important;padding:0!important}body.local-rtbdashboard-plugin #page-header *{display:none!important}body.local-rtbdashboard-plugin #page-header{margin:10px 0 0;padding:0!important}@property --tw-translate-x{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-y{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-z{syntax:"*";inherits:false;initial-value:0}@property --tw-rotate-x{syntax:"*";inherits:false}@property --tw-rotate-y{syntax:"*";inherits:false}@property --tw-rotate-z{syntax:"*";inherits:false}@property --tw-skew-x{syntax:"*";inherits:false}@property --tw-skew-y{syntax:"*";inherits:false}@property --tw-space-y-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-gradient-position{syntax:"*";inherits:false}@property --tw-gradient-from{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-via{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-to{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-stops{syntax:"*";inherits:false}@property --tw-gradient-via-stops{syntax:"*";inherits:false}@property --tw-gradient-from-position{syntax:"<length-percentage>";inherits:false;initial-value:0%}@property --tw-gradient-via-position{syntax:"<length-percentage>";inherits:false;initial-value:50%}@property --tw-gradient-to-position{syntax:"<length-percentage>";inherits:false;initial-value:100%}@property --tw-leading{syntax:"*";inherits:false}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-tracking{syntax:"*";inherits:false}@property --tw-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:"*";inherits:false}@property --tw-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:"*";inherits:false}@property --tw-inset-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:"*";inherits:false}@property --tw-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:"*";inherits:false}@property --tw-inset-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:"*";inherits:false}@property --tw-ring-offset-width{syntax:"<length>";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:"*";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-blur{syntax:"*";inherits:false}@property --tw-brightness{syntax:"*";inherits:false}@property --tw-contrast{syntax:"*";inherits:false}@property --tw-grayscale{syntax:"*";inherits:false}@property --tw-hue-rotate{syntax:"*";inherits:false}@property --tw-invert{syntax:"*";inherits:false}@property --tw-opacity{syntax:"*";inherits:false}@property --tw-saturate{syntax:"*";inherits:false}@property --tw-sepia{syntax:"*";inherits:false}@property --tw-drop-shadow{syntax:"*";inherits:false}@property --tw-drop-shadow-color{syntax:"*";inherits:false}@property --tw-drop-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-drop-shadow-size{syntax:"*";inherits:false}@property --tw-duration{syntax:"*";inherits:false}@property --tw-ease{syntax:"*";inherits:false}@property --tw-scale-x{syntax:"*";inherits:false;initial-value:1}@property --tw-scale-y{syntax:"*";inherits:false;initial-value:1}@property --tw-scale-z{syntax:"*";inherits:false;initial-value:1}@keyframes spin{to{transform:rotate(360deg)}}@keyframes pulse{50%{opacity:.5}}
/*$vite$:1*/`,document.head.appendChild(Ve);var pe,L,Fe,ae,We,Oe,qe,Ge,Le,ze,Re,de={},Ke=[],Tt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ue=Array.isArray;function Q(t,a){for(var r in a)t[r]=a[r];return t}function Me(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Je(t,a,r){var l,o,n,c={};for(n in a)n=="key"?l=a[n]:n=="ref"?o=a[n]:c[n]=a[n];if(arguments.length>2&&(c.children=arguments.length>3?pe.call(arguments,2):r),typeof t=="function"&&t.defaultProps!=null)for(n in t.defaultProps)c[n]===void 0&&(c[n]=t.defaultProps[n]);return ve(t,c,l,o,null)}function ve(t,a,r,l,o){var n={type:t,props:a,key:r,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++Fe,__i:-1,__u:0};return o==null&&L.vnode!=null&&L.vnode(n),n}function E(t){return t.children}function xe(t,a){this.props=t,this.context=a}function ne(t,a){if(a==null)return t.__?ne(t.__,t.__i+1):null;for(var r;a<t.__k.length;a++)if((r=t.__k[a])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?ne(t):null}function Qe(t){var a,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,a=0;a<t.__k.length;a++)if((r=t.__k[a])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return Qe(t)}}function Ye(t){(!t.__d&&(t.__d=!0)&&ae.push(t)&&!fe.__r++||We!=L.debounceRendering)&&((We=L.debounceRendering)||Oe)(fe)}function fe(){for(var t,a,r,l,o,n,c,d=1;ae.length;)ae.length>d&&ae.sort(qe),t=ae.shift(),d=ae.length,t.__d&&(r=void 0,l=void 0,o=(l=(a=t).__v).__e,n=[],c=[],a.__P&&((r=Q({},l)).__v=l.__v+1,L.vnode&&L.vnode(r),$e(a.__P,r,l,a.__n,a.__P.namespaceURI,32&l.__u?[o]:null,n,o??ne(l),!!(32&l.__u),c),r.__v=l.__v,r.__.__k[r.__i]=r,at(n,r,c),l.__e=l.__=null,r.__e!=o&&Qe(r)));fe.__r=0}function Ze(t,a,r,l,o,n,c,d,h,i,m){var s,g,p,v,u,f,y,S=l&&l.__k||Ke,N=a.length;for(h=Dt(r,a,S,h,N),s=0;s<N;s++)(p=r.__k[s])!=null&&(g=p.__i==-1?de:S[p.__i]||de,p.__i=s,f=$e(t,p,g,o,n,c,d,h,i,m),v=p.__e,p.ref&&g.ref!=p.ref&&(g.ref&&Te(g.ref,null,p),m.push(p.ref,p.__c||v,p)),u==null&&v!=null&&(u=v),(y=!!(4&p.__u))||g.__k===p.__k?h=Xe(p,h,t,y):typeof p.type=="function"&&f!==void 0?h=f:v&&(h=v.nextSibling),p.__u&=-7);return r.__e=u,h}function Dt(t,a,r,l,o){var n,c,d,h,i,m=r.length,s=m,g=0;for(t.__k=new Array(o),n=0;n<o;n++)(c=a[n])!=null&&typeof c!="boolean"&&typeof c!="function"?(h=n+g,(c=t.__k[n]=typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?ve(null,c,null,null,null):ue(c)?ve(E,{children:c},null,null,null):c.constructor==null&&c.__b>0?ve(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c).__=t,c.__b=t.__b+1,d=null,(i=c.__i=jt(c,r,h,s))!=-1&&(s--,(d=r[i])&&(d.__u|=2)),d==null||d.__v==null?(i==-1&&(o>m?g--:o<m&&g++),typeof c.type!="function"&&(c.__u|=4)):i!=h&&(i==h-1?g--:i==h+1?g++:(i>h?g--:g++,c.__u|=4))):t.__k[n]=null;if(s)for(n=0;n<m;n++)(d=r[n])!=null&&(2&d.__u)==0&&(d.__e==l&&(l=ne(d)),lt(d,d));return l}function Xe(t,a,r,l){var o,n;if(typeof t.type=="function"){for(o=t.__k,n=0;o&&n<o.length;n++)o[n]&&(o[n].__=t,a=Xe(o[n],a,r,l));return a}t.__e!=a&&(l&&(a&&t.type&&!a.parentNode&&(a=ne(t)),r.insertBefore(t.__e,a||null)),a=t.__e);do a=a&&a.nextSibling;while(a!=null&&a.nodeType==8);return a}function jt(t,a,r,l){var o,n,c,d=t.key,h=t.type,i=a[r],m=i!=null&&(2&i.__u)==0;if(i===null&&t.key==null||m&&d==i.key&&h==i.type)return r;if(l>(m?1:0)){for(o=r-1,n=r+1;o>=0||n<a.length;)if((i=a[c=o>=0?o--:n++])!=null&&(2&i.__u)==0&&d==i.key&&h==i.type)return c}return-1}function et(t,a,r){a[0]=="-"?t.setProperty(a,r??""):t[a]=r==null?"":typeof r!="number"||Tt.test(a)?r:r+"px"}function be(t,a,r,l,o){var n,c;e:if(a=="style")if(typeof r=="string")t.style.cssText=r;else{if(typeof l=="string"&&(t.style.cssText=l=""),l)for(a in l)r&&a in r||et(t.style,a,"");if(r)for(a in r)l&&r[a]==l[a]||et(t.style,a,r[a])}else if(a[0]=="o"&&a[1]=="n")n=a!=(a=a.replace(Ge,"$1")),c=a.toLowerCase(),a=c in t||a=="onFocusOut"||a=="onFocusIn"?c.slice(2):a.slice(2),t.l||(t.l={}),t.l[a+n]=r,r?l?r.u=l.u:(r.u=Le,t.addEventListener(a,n?Re:ze,n)):t.removeEventListener(a,n?Re:ze,n);else{if(o=="http://www.w3.org/2000/svg")a=a.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(a!="width"&&a!="height"&&a!="href"&&a!="list"&&a!="form"&&a!="tabIndex"&&a!="download"&&a!="rowSpan"&&a!="colSpan"&&a!="role"&&a!="popover"&&a in t)try{t[a]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&a[4]!="-"?t.removeAttribute(a):t.setAttribute(a,a=="popover"&&r==1?"":r))}}function tt(t){return function(a){if(this.l){var r=this.l[a.type+t];if(a.t==null)a.t=Le++;else if(a.t<r.u)return;return r(L.event?L.event(a):a)}}}function $e(t,a,r,l,o,n,c,d,h,i){var m,s,g,p,v,u,f,y,S,N,_,A,z,U,G,F,C,M=a.type;if(a.constructor!=null)return null;128&r.__u&&(h=!!(32&r.__u),n=[d=a.__e=r.__e]),(m=L.__b)&&m(a);e:if(typeof M=="function")try{if(y=a.props,S="prototype"in M&&M.prototype.render,N=(m=M.contextType)&&l[m.__c],_=m?N?N.props.value:m.__:l,r.__c?f=(s=a.__c=r.__c).__=s.__E:(S?a.__c=s=new M(y,_):(a.__c=s=new xe(y,_),s.constructor=M,s.render=Et),N&&N.sub(s),s.props=y,s.state||(s.state={}),s.context=_,s.__n=l,g=s.__d=!0,s.__h=[],s._sb=[]),S&&s.__s==null&&(s.__s=s.state),S&&M.getDerivedStateFromProps!=null&&(s.__s==s.state&&(s.__s=Q({},s.__s)),Q(s.__s,M.getDerivedStateFromProps(y,s.__s))),p=s.props,v=s.state,s.__v=a,g)S&&M.getDerivedStateFromProps==null&&s.componentWillMount!=null&&s.componentWillMount(),S&&s.componentDidMount!=null&&s.__h.push(s.componentDidMount);else{if(S&&M.getDerivedStateFromProps==null&&y!==p&&s.componentWillReceiveProps!=null&&s.componentWillReceiveProps(y,_),!s.__e&&s.shouldComponentUpdate!=null&&s.shouldComponentUpdate(y,s.__s,_)===!1||a.__v==r.__v){for(a.__v!=r.__v&&(s.props=y,s.state=s.__s,s.__d=!1),a.__e=r.__e,a.__k=r.__k,a.__k.some(function(w){w&&(w.__=a)}),A=0;A<s._sb.length;A++)s.__h.push(s._sb[A]);s._sb=[],s.__h.length&&c.push(s);break e}s.componentWillUpdate!=null&&s.componentWillUpdate(y,s.__s,_),S&&s.componentDidUpdate!=null&&s.__h.push(function(){s.componentDidUpdate(p,v,u)})}if(s.context=_,s.props=y,s.__P=t,s.__e=!1,z=L.__r,U=0,S){for(s.state=s.__s,s.__d=!1,z&&z(a),m=s.render(s.props,s.state,s.context),G=0;G<s._sb.length;G++)s.__h.push(s._sb[G]);s._sb=[]}else do s.__d=!1,z&&z(a),m=s.render(s.props,s.state,s.context),s.state=s.__s;while(s.__d&&++U<25);s.state=s.__s,s.getChildContext!=null&&(l=Q(Q({},l),s.getChildContext())),S&&!g&&s.getSnapshotBeforeUpdate!=null&&(u=s.getSnapshotBeforeUpdate(p,v)),F=m,m!=null&&m.type===E&&m.key==null&&(F=rt(m.props.children)),d=Ze(t,ue(F)?F:[F],a,r,l,o,n,c,d,h,i),s.base=a.__e,a.__u&=-161,s.__h.length&&c.push(s),f&&(s.__E=s.__=null)}catch(w){if(a.__v=null,h||n!=null)if(w.then){for(a.__u|=h?160:128;d&&d.nodeType==8&&d.nextSibling;)d=d.nextSibling;n[n.indexOf(d)]=null,a.__e=d}else{for(C=n.length;C--;)Me(n[C]);Ae(a)}else a.__e=r.__e,a.__k=r.__k,w.then||Ae(a);L.__e(w,a,r)}else n==null&&a.__v==r.__v?(a.__k=r.__k,a.__e=r.__e):d=a.__e=Ht(r.__e,a,r,l,o,n,c,h,i);return(m=L.diffed)&&m(a),128&a.__u?void 0:d}function Ae(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(Ae)}function at(t,a,r){for(var l=0;l<r.length;l++)Te(r[l],r[++l],r[++l]);L.__c&&L.__c(a,t),t.some(function(o){try{t=o.__h,o.__h=[],t.some(function(n){n.call(o)})}catch(n){L.__e(n,o.__v)}})}function rt(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:ue(t)?t.map(rt):Q({},t)}function Ht(t,a,r,l,o,n,c,d,h){var i,m,s,g,p,v,u,f=r.props,y=a.props,S=a.type;if(S=="svg"?o="http://www.w3.org/2000/svg":S=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),n!=null){for(i=0;i<n.length;i++)if((p=n[i])&&"setAttribute"in p==!!S&&(S?p.localName==S:p.nodeType==3)){t=p,n[i]=null;break}}if(t==null){if(S==null)return document.createTextNode(y);t=document.createElementNS(o,S,y.is&&y),d&&(L.__m&&L.__m(a,n),d=!1),n=null}if(S==null)f===y||d&&t.data==y||(t.data=y);else{if(n=n&&pe.call(t.childNodes),f=r.props||de,!d&&n!=null)for(f={},i=0;i<t.attributes.length;i++)f[(p=t.attributes[i]).name]=p.value;for(i in f)if(p=f[i],i!="children"){if(i=="dangerouslySetInnerHTML")s=p;else if(!(i in y)){if(i=="value"&&"defaultValue"in y||i=="checked"&&"defaultChecked"in y)continue;be(t,i,null,p,o)}}for(i in y)p=y[i],i=="children"?g=p:i=="dangerouslySetInnerHTML"?m=p:i=="value"?v=p:i=="checked"?u=p:d&&typeof p!="function"||f[i]===p||be(t,i,p,f[i],o);if(m)d||s&&(m.__html==s.__html||m.__html==t.innerHTML)||(t.innerHTML=m.__html),a.__k=[];else if(s&&(t.innerHTML=""),Ze(a.type=="template"?t.content:t,ue(g)?g:[g],a,r,l,S=="foreignObject"?"http://www.w3.org/1999/xhtml":o,n,c,n?n[0]:r.__k&&ne(r,0),d,h),n!=null)for(i=n.length;i--;)Me(n[i]);d||(i="value",S=="progress"&&v==null?t.removeAttribute("value"):v!=null&&(v!==t[i]||S=="progress"&&!v||S=="option"&&v!=f[i])&&be(t,i,v,f[i],o),i="checked",u!=null&&u!=t[i]&&be(t,i,u,f[i],o))}return t}function Te(t,a,r){try{if(typeof t=="function"){var l=typeof t.__u=="function";l&&t.__u(),l&&a==null||(t.__u=t(a))}else t.current=a}catch(o){L.__e(o,r)}}function lt(t,a,r){var l,o;if(L.unmount&&L.unmount(t),(l=t.ref)&&(l.current&&l.current!=t.__e||Te(l,null,a)),(l=t.__c)!=null){if(l.componentWillUnmount)try{l.componentWillUnmount()}catch(n){L.__e(n,a)}l.base=l.__P=null}if(l=t.__k)for(o=0;o<l.length;o++)l[o]&&lt(l[o],a,r||typeof t.type!="function");r||Me(t.__e),t.__c=t.__=t.__e=void 0}function Et(t,a,r){return this.constructor(t,r)}function Ut(t,a,r){var l,o,n,c;a==document&&(a=document.documentElement),L.__&&L.__(t,a),o=(l=!1)?null:a.__k,n=[],c=[],$e(a,t=a.__k=Je(E,null,[t]),o||de,de,a.namespaceURI,o?null:a.firstChild?pe.call(a.childNodes):null,n,o?o.__e:a.firstChild,l,c),at(n,t,c)}pe=Ke.slice,L={__e:function(t,a,r,l){for(var o,n,c;a=a.__;)if((o=a.__c)&&!o.__)try{if((n=o.constructor)&&n.getDerivedStateFromError!=null&&(o.setState(n.getDerivedStateFromError(t)),c=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(t,l||{}),c=o.__d),c)return o.__E=o}catch(d){t=d}throw t}},Fe=0,xe.prototype.setState=function(t,a){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Q({},this.state),typeof t=="function"&&(t=t(Q({},r),this.props)),t&&Q(r,t),t!=null&&this.__v&&(a&&this._sb.push(a),Ye(this))},xe.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Ye(this))},xe.prototype.render=E,ae=[],Oe=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,qe=function(t,a){return t.__v.__b-a.__v.__b},fe.__r=0,Ge=/(PointerCapture)$|Capture$/i,Le=0,ze=tt(!1),Re=tt(!0);var It=0;function e(t,a,r,l,o,n){a||(a={});var c,d,h=a;if("ref"in h)for(d in h={},a)d=="ref"?c=a[d]:h[d]=a[d];var i={type:t,props:h,key:r,ref:c,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--It,__i:-1,__u:0,__source:o,__self:n};if(typeof t=="function"&&(c=t.defaultProps))for(d in c)h[d]===void 0&&(h[d]=c[d]);return L.vnode&&L.vnode(i),i}var he,D,De,ot,ye=0,nt=[],j=L,st=j.__b,it=j.__r,ct=j.diffed,dt=j.__c,ht=j.unmount,mt=j.__;function je(t,a){j.__h&&j.__h(D,t,ye||a),ye=0;var r=D.__H||(D.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({}),r.__[t]}function x(t){return ye=1,Pt(vt,t)}function Pt(t,a,r){var l=je(he++,2);if(l.t=t,!l.__c&&(l.__=[vt(void 0,a),function(d){var h=l.__N?l.__N[0]:l.__[0],i=l.t(h,d);h!==i&&(l.__N=[i,l.__[1]],l.__c.setState({}))}],l.__c=D,!D.__f)){var o=function(d,h,i){if(!l.__c.__H)return!0;var m=l.__c.__H.__.filter(function(g){return!!g.__c});if(m.every(function(g){return!g.__N}))return!n||n.call(this,d,h,i);var s=l.__c.props!==d;return m.forEach(function(g){if(g.__N){var p=g.__[0];g.__=g.__N,g.__N=void 0,p!==g.__[0]&&(s=!0)}}),n&&n.call(this,d,h,i)||s};D.__f=!0;var n=D.shouldComponentUpdate,c=D.componentWillUpdate;D.componentWillUpdate=function(d,h,i){if(this.__e){var m=n;n=void 0,o(d,h,i),n=m}c&&c.call(this,d,h,i)},D.shouldComponentUpdate=o}return l.__N||l.__}function O(t,a){var r=je(he++,3);!j.__s&&ut(r.__H,a)&&(r.__=t,r.u=a,D.__H.__h.push(r))}function He(t){return ye=5,gt(function(){return{current:t}},[])}function gt(t,a){var r=je(he++,7);return ut(r.__H,a)&&(r.__=t(),r.__H=a,r.__h=t),r.__}function Bt(){for(var t;t=nt.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(_e),t.__H.__h.forEach(Ee),t.__H.__h=[]}catch(a){t.__H.__h=[],j.__e(a,t.__v)}}j.__b=function(t){D=null,st&&st(t)},j.__=function(t,a){t&&a.__k&&a.__k.__m&&(t.__m=a.__k.__m),mt&&mt(t,a)},j.__r=function(t){it&&it(t),he=0;var a=(D=t.__c).__H;a&&(De===D?(a.__h=[],D.__h=[],a.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(a.__h.forEach(_e),a.__h.forEach(Ee),a.__h=[],he=0)),De=D},j.diffed=function(t){ct&&ct(t);var a=t.__c;a&&a.__H&&(a.__H.__h.length&&(nt.push(a)!==1&&ot===j.requestAnimationFrame||((ot=j.requestAnimationFrame)||Vt)(Bt)),a.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),De=D=null},j.__c=function(t,a){a.some(function(r){try{r.__h.forEach(_e),r.__h=r.__h.filter(function(l){return!l.__||Ee(l)})}catch(l){a.some(function(o){o.__h&&(o.__h=[])}),a=[],j.__e(l,r.__v)}}),dt&&dt(t,a)},j.unmount=function(t){ht&&ht(t);var a,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(l){try{_e(l)}catch(o){a=o}}),r.__H=void 0,a&&j.__e(a,r.__v))};var pt=typeof requestAnimationFrame=="function";function Vt(t){var a,r=function(){clearTimeout(l),pt&&cancelAnimationFrame(a),setTimeout(t)},l=setTimeout(r,35);pt&&(a=requestAnimationFrame(r))}function _e(t){var a=D,r=t.__c;typeof r=="function"&&(t.__c=void 0,r()),D=a}function Ee(t){var a=D;t.__c=t.__(),D=a}function ut(t,a){return!t||t.length!==a.length||a.some(function(r,l){return r!==t[l]})}function vt(t,a){return typeof a=="function"?a(t):a}function xt(t,a){return new Promise((r,l)=>{te(["core/ajax"],o=>{o.call([{methodname:t,args:a}])[0].then(r).catch(l)})})}function me({icon:t,value:a,label:r,customBgColor:l}){return e("div",{className:"rounded-xl p-4 flex items-center gap-4",style:l?{backgroundColor:l}:void 0,children:[e("div",{className:"w-12 h-12 rounded-full bg-white/30 flex items-center justify-center",children:t}),e("div",{children:[e("p",{className:"text-xs text-gray-600 font-medium",children:r}),e("p",{className:"text-xl font-bold text-gray-800",children:a})]})]})}function Ft({activeThisWeek:t,atRisk:a,neverLoggedIn:r}){const l=t+a+r;if(l===0)return e("div",{className:"relative w-36 h-36",children:[e("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:e("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#e5e7eb",strokeWidth:"14"})}),e("div",{className:"absolute inset-0 flex items-center justify-center",children:e("span",{className:"text-2xl font-bold text-gray-400",children:"0"})})]});const o=2*Math.PI*40,n=t/l*o,c=a/l*o,d=r/l*o;return e("div",{className:"relative w-36 h-36",children:[e("svg",{viewBox:"0 0 100 100",className:"w-full h-full transform -rotate-90",children:[e("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#e5e7eb",strokeWidth:"14"}),e("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#22c55e",strokeWidth:"14",strokeDasharray:`${n} ${o-n}`,strokeDashoffset:"0"}),e("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#f59e0b",strokeWidth:"14",strokeDasharray:`${c} ${o-c}`,strokeDashoffset:`${-n}`}),e("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#ef4444",strokeWidth:"14",strokeDasharray:`${d} ${o-d}`,strokeDashoffset:`${-(n+c)}`})]}),e("div",{className:"absolute inset-0 flex items-center justify-center",children:e("span",{className:"text-2xl font-bold text-gray-800",children:l})})]})}function ft({male:t,female:a}){const r=t+a;if(r===0)return e("div",{className:"relative w-36 h-36",children:[e("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:e("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#e5e7eb",strokeWidth:"14"})}),e("div",{className:"absolute inset-0 flex items-center justify-center",children:e("span",{className:"text-2xl font-bold text-gray-400",children:"0"})})]});const l=2*Math.PI*40,o=t/r*l,n=a/r*l;return e("div",{className:"relative w-36 h-36",children:[e("svg",{viewBox:"0 0 100 100",className:"w-full h-full transform -rotate-90",children:[e("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#e5e7eb",strokeWidth:"14"}),e("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#3b82f6",strokeWidth:"14",strokeDasharray:`${o} ${l-o}`,strokeDashoffset:"0"}),e("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#ec4899",strokeWidth:"14",strokeDasharray:`${n} ${l-n}`,strokeDashoffset:`${-o}`})]}),e("div",{className:"absolute inset-0 flex items-center justify-center",children:e("span",{className:"text-2xl font-bold text-gray-800",children:r})})]})}const Wt=()=>e("svg",{className:"w-6 h-6 text-cyan-600",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"})}),Ot=()=>e("svg",{className:"w-6 h-6 text-amber-600",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z"})}),qt=()=>e("svg",{className:"w-6 h-6 text-purple-600",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),Gt=()=>e("svg",{className:"w-6 h-6 text-green-600",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9H9V9h10v2zm-4 4H9v-2h6v2zm4-8H9V5h10v2z"})}),Kt=()=>e("svg",{className:"w-6 h-6 text-blue-600",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z"})});function Jt({user:t,stats:a,themeConfig:r}){const[l,o]=x([]),[n,c]=x(!0),[d,h]=x([]),[i,m]=x(!0),s=new Date().toISOString().slice(0,10),g=new Date(Date.now()-7*864e5).toISOString().slice(0,10),[p,v]=x(g),[u,f]=x(s);O(()=>{xt("local_elby_dashboard_get_school_user_counts",{}).then(N=>{const A=[...N.schools||[]].sort((z,U)=>U.student_count-z.student_count).slice(0,8);o(A)}).catch(()=>o([])).finally(()=>c(!1))},[]),O(()=>{m(!0);const N=Math.floor(new Date(p+"T00:00:00").getTime()/1e3),_=Math.floor(new Date(u+"T23:59:59").getTime()/1e3),A=Math.round((_-N)/86400),z=A>90?"monthly":A>14?"weekly":"daily";xt("local_elby_dashboard_get_platform_traffic",{period:z,from_date:N,to_date:_}).then(U=>h(U.data||[])).catch(()=>h([])).finally(()=>m(!1))},[p,u]);const y=l.length>0?Math.max(...l.map(N=>N.student_count)):1,S=d.length>0?Math.max(...d.map(N=>N.unique_users),1):1;return e("div",{className:"p-2 sm:p-4 lg:p-6 bg-gray-50 min-h-screen",children:[e("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[e(me,{icon:e(Kt,{}),value:a.totalSchools.toLocaleString(),label:"Schools",customBgColor:"#dbeafe"}),e(me,{icon:e(Wt,{}),value:a.totalStudents.toLocaleString(),label:"Students",customBgColor:r.statCard1Color}),e(me,{icon:e(Ot,{}),value:a.totalTeachers.toLocaleString(),label:"Teachers",customBgColor:r.statCard2Color}),e(me,{icon:e(qt,{}),value:a.totalUsers.toLocaleString(),label:"Total Users",customBgColor:r.statCard3Color}),e(me,{icon:e(Gt,{}),value:a.totalCourses.toLocaleString(),label:"Courses",customBgColor:r.statCard4Color})]}),e("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("div",{className:"flex items-center justify-between mb-4",children:[e("h3",{className:"text-lg font-semibold text-gray-800",children:"Schools Overview"}),e("span",{className:"text-sm text-gray-500",children:["Top ",l.length," by students"]})]}),n?e("div",{className:"space-y-3",children:[...Array(5)].map((N,_)=>e("div",{className:"h-6 bg-gray-100 rounded animate-pulse"},_))}):l.length===0?e("div",{className:"text-center py-8 text-gray-500",children:e("p",{children:"No school data available"})}):e("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:l.map(N=>e("div",{className:"flex items-center gap-3",children:[e("div",{className:"w-28 text-xs text-gray-600 truncate flex-shrink-0",title:N.school_name,children:N.school_name}),e("div",{className:"flex-1 h-6 bg-gray-100 rounded-full overflow-hidden",children:e("div",{className:"h-full bg-blue-500 rounded-full transition-all opacity-80 hover:opacity-100",style:{width:`${N.student_count/y*100}%`}})}),e("span",{className:"text-xs font-medium text-gray-700 w-10 text-right flex-shrink-0",children:N.student_count})]},N.school_code))})]}),e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"User Overview"}),e("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e("div",{children:[e("h4",{className:"text-sm font-medium text-gray-600 mb-3",children:"Student Demographics"}),e("div",{className:"flex flex-col items-center gap-3",children:[e(ft,{male:a.maleStudents,female:a.femaleStudents}),e("div",{className:"flex items-center gap-3 flex-wrap justify-center",children:[e("div",{className:"flex items-center gap-1.5",children:[e("span",{className:"w-2.5 h-2.5 rounded-full bg-blue-500"}),e("span",{className:"text-xs text-gray-600",children:["Male: ",a.maleStudents.toLocaleString()]})]}),e("div",{className:"flex items-center gap-1.5",children:[e("span",{className:"w-2.5 h-2.5 rounded-full bg-pink-500"}),e("span",{className:"text-xs text-gray-600",children:["Female: ",a.femaleStudents.toLocaleString()]})]})]})]})]}),e("div",{children:[e("h4",{className:"text-sm font-medium text-gray-600 mb-3",children:"Engagement Status"}),e("div",{className:"flex flex-col items-center gap-3",children:[e(Ft,{activeThisWeek:a.activeThisWeek,atRisk:a.atRisk,neverLoggedIn:a.neverLoggedIn}),e("div",{className:"flex items-center gap-3 flex-wrap justify-center",children:[e("div",{className:"flex items-center gap-1.5",children:[e("span",{className:"w-2.5 h-2.5 rounded-full bg-green-500"}),e("span",{className:"text-xs text-gray-500",children:"Active"})]}),e("div",{className:"flex items-center gap-1.5",children:[e("span",{className:"w-2.5 h-2.5 rounded-full bg-amber-500"}),e("span",{className:"text-xs text-gray-500",children:"Inactive"})]}),e("div",{className:"flex items-center gap-1.5",children:[e("span",{className:"w-2.5 h-2.5 rounded-full bg-red-500"}),e("span",{className:"text-xs text-gray-500",children:"Never"})]})]})]})]})]}),e("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mt-4 pt-4 border-t border-gray-100",children:[e("div",{className:"bg-emerald-50 rounded-lg p-3",children:[e("p",{className:"text-xs text-gray-500",children:"Active Today"}),e("p",{className:"text-lg font-bold text-emerald-700",children:a.activeToday.toLocaleString()})]}),e("div",{className:"bg-green-50 rounded-lg p-3",children:[e("p",{className:"text-xs text-gray-500",children:"Active This Week"}),e("p",{className:"text-lg font-bold text-green-700",children:a.activeThisWeek.toLocaleString()})]}),e("div",{className:"bg-amber-50 rounded-lg p-3",children:[e("p",{className:"text-xs text-gray-500",children:"Inactive"}),e("p",{className:"text-lg font-bold text-amber-700",children:a.atRisk.toLocaleString()})]}),e("div",{className:"bg-red-50 rounded-lg p-3",children:[e("p",{className:"text-xs text-gray-500",children:"Never Logged In"}),e("p",{className:"text-lg font-bold text-red-700",children:a.neverLoggedIn.toLocaleString()})]})]})]})]}),e("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("div",{className:"flex items-center justify-between mb-4",children:[e("h3",{className:"text-lg font-semibold text-gray-800",children:"Students by Grade Level"}),e("span",{className:"text-sm text-gray-500",children:[a.gradeDistribution.reduce((N,_)=>N+_.count,0).toLocaleString()," total"]})]}),a.gradeDistribution.length===0?e("div",{className:"text-center py-8 text-gray-500",children:e("p",{children:"No grade data available yet"})}):e("div",{className:"flex flex-col",style:{gap:"16px"},children:(()=>{const N=Math.max(...a.gradeDistribution.map(_=>_.count),1);return a.gradeDistribution.map(_=>e("div",{className:"flex items-center gap-3",children:[e("div",{className:"w-20 text-xs text-gray-600 truncate flex-shrink-0",title:_.label,children:_.label}),e("div",{className:"flex-1 bg-gray-100 rounded-full overflow-hidden",style:{height:"20px"},children:e("div",{className:"h-full bg-indigo-500 rounded-full transition-all opacity-80 hover:opacity-100",style:{width:`${_.count/N*100}%`}})}),e("span",{className:"text-xs font-medium text-gray-700 w-12 text-right flex-shrink-0",children:_.count.toLocaleString()})]},_.label))})()})]}),e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("div",{className:"flex items-center justify-between mb-4",children:[e("h3",{className:"text-lg font-semibold text-gray-800",children:"Students by Trade"}),e("span",{className:"text-sm text-gray-500",children:["Top ",a.programDistribution.length]})]}),a.programDistribution.length===0?e("div",{className:"text-center py-8 text-gray-500",children:e("p",{children:"No program data available yet"})}):e("div",{className:"space-y-3",children:(()=>{const N=Math.max(...a.programDistribution.map(_=>_.count),1);return a.programDistribution.map(_=>e("div",{className:"flex items-center gap-3",children:[e("div",{className:"w-28 text-xs text-gray-600 truncate flex-shrink-0",title:_.label,children:_.label}),e("div",{className:"flex-1 h-5 bg-gray-100 rounded-full overflow-hidden",children:e("div",{className:"h-full bg-teal-500 rounded-full transition-all opacity-80 hover:opacity-100",style:{width:`${_.count/N*100}%`}})}),e("span",{className:"text-xs font-medium text-gray-700 w-12 text-right flex-shrink-0",children:_.count.toLocaleString()})]},_.label))})()})]})]}),e("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Teacher Overview"}),e("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e("div",{children:[e("h4",{className:"text-sm font-medium text-gray-600 mb-3",children:"Gender"}),e("div",{className:"flex flex-col items-center gap-3",children:[e(ft,{male:a.maleTeachers,female:a.femaleTeachers}),e("div",{className:"flex items-center gap-3 flex-wrap justify-center",children:[e("div",{className:"flex items-center gap-1.5",children:[e("span",{className:"w-2.5 h-2.5 rounded-full bg-blue-500"}),e("span",{className:"text-xs text-gray-600",children:["Male: ",a.maleTeachers.toLocaleString()]})]}),e("div",{className:"flex items-center gap-1.5",children:[e("span",{className:"w-2.5 h-2.5 rounded-full bg-pink-500"}),e("span",{className:"text-xs text-gray-600",children:["Female: ",a.femaleTeachers.toLocaleString()]})]})]})]})]}),e("div",{children:[e("h4",{className:"text-sm font-medium text-gray-600 mb-3",children:"Summary"}),e("div",{className:"space-y-3",children:[e("div",{className:"bg-amber-50 rounded-lg p-3",children:[e("p",{className:"text-xs text-gray-500",children:"Total Teachers"}),e("p",{className:"text-lg font-bold text-amber-700",children:a.totalTeachers.toLocaleString()})]}),e("div",{className:"bg-blue-50 rounded-lg p-3",children:[e("p",{className:"text-xs text-gray-500",children:"Positions"}),e("p",{className:"text-lg font-bold text-blue-700",children:a.positionDistribution.length})]})]})]})]})]}),e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("div",{className:"flex items-center justify-between mb-4",children:[e("h3",{className:"text-lg font-semibold text-gray-800",children:"Teachers by Position"}),e("span",{className:"text-sm text-gray-500",children:[a.positionDistribution.reduce((N,_)=>N+_.count,0).toLocaleString()," total"]})]}),a.positionDistribution.length===0?e("div",{className:"text-center py-8 text-gray-500",children:e("p",{children:"No teacher data available yet"})}):e("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:(()=>{const N=Math.max(...a.positionDistribution.map(_=>_.count),1);return a.positionDistribution.map(_=>e("div",{className:"flex items-center gap-3",children:[e("div",{className:"w-28 text-xs text-gray-600 truncate flex-shrink-0",title:_.label,children:_.label}),e("div",{className:"flex-1 h-6 bg-gray-100 rounded-full overflow-hidden",children:e("div",{className:"h-full bg-amber-500 rounded-full transition-all opacity-80 hover:opacity-100",style:{width:`${_.count/N*100}%`}})}),e("span",{className:"text-xs font-medium text-gray-700 w-12 text-right flex-shrink-0",children:_.count.toLocaleString()})]},_.label))})()})]})]}),e("div",{className:"gap-6",children:e("div",{className:"bg-white rounded-xl p-6 shadow-sm overflow-hidden",children:[e("div",{className:"flex items-center justify-between mb-4 flex-wrap gap-2",children:[e("h3",{className:"text-lg font-semibold text-gray-800",children:"Platform Traffic"}),e("div",{className:"flex items-center gap-2",children:[e("label",{className:"flex items-center gap-1 text-xs text-gray-500",children:["From",e("input",{type:"date",value:p,max:u,onChange:N=>v(N.target.value),className:"border border-gray-200 rounded-md px-2 py-1 text-xs text-gray-700 bg-white"})]}),e("label",{className:"flex items-center gap-1 text-xs text-gray-500",children:["To",e("input",{type:"date",value:u,min:p,max:s,onChange:N=>f(N.target.value),className:"border border-gray-200 rounded-md px-2 py-1 text-xs text-gray-700 bg-white"})]})]})]}),i?e("div",{className:"flex items-end justify-between h-56 gap-2 px-2",children:[...Array(7)].map((N,_)=>e("div",{className:"flex-1 bg-gray-100 rounded-t animate-pulse",style:{height:`${30+Math.random()*50}%`}},_))}):d.length===0?e("div",{className:"text-center py-8 text-gray-500",children:e("p",{children:"No traffic data available"})}):e(E,{children:[e("div",{className:"overflow-x-auto",children:e("div",{className:"flex items-end h-56 gap-2 px-2",style:{minWidth:d.length>15?`${d.length*3}rem`:void 0},children:d.map(N=>e("div",{className:"flex flex-col items-center gap-1 flex-1",style:{minWidth:"2rem"},children:[e("span",{className:"text-xs font-medium text-gray-600 whitespace-nowrap",children:N.unique_users}),e("div",{className:"w-full flex justify-center",style:{height:"10rem"},children:e("div",{className:"flex items-end h-full w-full max-w-[2.5rem]",children:e("div",{className:"w-full bg-blue-500 rounded-t opacity-80 hover:opacity-100 transition-opacity",style:{height:`${N.unique_users/S*100}%`,minHeight:N.unique_users>0?"4px":"0"}})})}),e("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:N.period_label})]},N.period_label))})}),e("div",{className:"flex items-center gap-4 mt-3 pt-3 border-t border-gray-100",children:e("div",{className:"flex items-center gap-1.5",children:[e("span",{className:"w-2.5 h-2.5 rounded-full bg-blue-500"}),e("span",{className:"text-xs text-gray-500",children:"Unique Users"})]})})]})]})})]})}const Qt=[{id:"home",name:"Dashboard",icon:"dashboard",url:"/local/elby_dashboard/index.php"},{id:"schools",name:"Schools",icon:"pedagogy",url:"/local/elby_dashboard/schools.php",capability:"viewreports"},{id:"students",name:"Students",icon:"communication",url:"/local/elby_dashboard/students.php",capability:"viewreports"},{id:"teachers",name:"Teachers",icon:"presence",url:"/local/elby_dashboard/teachers.php",capability:"viewreports"},{id:"traffic",name:"Traffic",icon:"event",url:"/local/elby_dashboard/traffic.php",capability:"viewreports"},{id:"accesslog",name:"Access Log",icon:"courses",url:"/local/elby_dashboard/accesslog.php",capability:"viewreports"},{id:"admin",name:"Admin Panel",icon:"settings",url:"/local/elby_dashboard/admin/index.php",capability:"admin"}],bt={dashboard:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M4 4h4v4H4V4zm6 0h4v4h-4V4zm6 0h4v4h-4V4zM4 10h4v4H4v-4zm6 0h4v4h-4v-4zm6 0h4v4h-4v-4zM4 16h4v4H4v-4zm6 0h4v4h-4v-4zm6 0h4v4h-4v-4z"})}),courses:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9H9V9h10v2zm-4 4H9v-2h6v2zm4-8H9V5h10v2z"})}),presence:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V9h14v10zM5 7V5h14v2H5zm2 4h10v2H7v-2zm0 4h7v2H7v-2z"})}),communication:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"})}),event:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"})}),payment:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"})}),pedagogy:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z"})}),message:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})}),completion:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})}),settings:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"})}),logout:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5-5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"})})},Yt=()=>e("svg",{className:"w-8 h-8",viewBox:"0 0 40 40",fill:"none",children:[e("rect",{x:"4",y:"20",width:"16",height:"16",fill:"#22d3ee",transform:"rotate(-45 12 28)"}),e("rect",{x:"20",y:"4",width:"16",height:"16",fill:"#fbbf24",transform:"rotate(-45 28 12)"})]});function Zt({activePage:t,sidenavConfig:a,themeConfig:r,isOpen:l,onClose:o}){const n=Qt.filter(c=>c.id==="home"?!0:r.menuVisibility[c.id]!==!1);return e(E,{children:[l&&e("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:o}),e("aside",{className:`
                fixed lg:sticky inset-y-0 left-0 z-50 top-0
                w-72 h-screen bg-gray-50 border-r border-gray-200 py-6 pr-4 overflow-y-auto flex flex-col
                transform transition-transform duration-300 ease-in-out
                ${l?"translate-x-0":"-translate-x-full lg:translate-x-0"}
            `,children:[e("div",{className:"pl-3 pb-6 flex items-center justify-between",children:[e("div",{className:"flex items-center gap-3",children:[a.logoUrl?e("img",{src:a.logoUrl,alt:a.title,className:"w-8 h-8 object-contain"}):e(Yt,{}),e("span",{className:"text-lg font-bold text-gray-800",children:a.title})]}),e("button",{onClick:o,className:"lg:hidden p-2 mr-2 text-gray-500 hover:text-gray-700 hover:bg-gray-200 rounded-lg","aria-label":"Close menu",children:e("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e("div",{className:"mb-8 flex-1",children:[e("h6",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-4 pl-3",children:"Menu"}),e("ul",{className:"space-y-1 m-0 p-0 list-none",children:n.map(c=>{const d=c.id===t;return e("li",{children:e("a",{href:c.url,className:`flex items-center px-3 py-2 rounded text-sm transition-colors no-underline ${d?"text-white":"text-gray-700 hover:bg-gray-200"}`,style:d?{backgroundColor:r.sidenavAccentColor}:void 0,children:[e("span",{className:`w-5 mr-3 ${d?"text-white":"text-gray-500"}`,children:bt[c.icon]}),e("span",{children:c.name})]})},c.id)})})]}),e("div",{className:"mt-auto",children:[e("h6",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-4 pl-3",children:"Account"}),e("ul",{className:"space-y-1 m-0 p-0 list-none",children:e("li",{children:e("a",{href:"/login/logout.php",className:"flex items-center px-3 py-2 rounded text-sm text-gray-700 hover:bg-gray-200 no-underline transition-colors",children:[e("span",{className:"w-5 mr-3 text-gray-500",children:bt.logout}),e("span",{children:"Log out"})]})})})]})]})]})}const Xt=[{id:0,name:"All Categories"},{id:1,name:"Kigali City"},{id:2,name:"Eastern Province"},{id:3,name:"Western Province"},{id:4,name:"Northern Province"},{id:5,name:"Southern Province"}],yt=[{id:1,name:"Bicumbi",parentId:2,participants:47,units:[{average:9.2,completionRate:"95.7%"},{average:3.67,completionRate:"4.3%"},{average:2.82,completionRate:"4.3%"},{average:5,completionRate:"2.1%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"}]},{id:2,name:"Cyahinda",parentId:5,participants:101,units:[{average:8.8,completionRate:"55.4%"},{average:7.52,completionRate:"10.9%"},{average:null,completionRate:"0.0%"},{average:9.31,completionRate:"12.9%"},{average:7.81,completionRate:"5.0%"},{average:null,completionRate:"0.0%"},{average:6.52,completionRate:"4.0%"},{average:9.02,completionRate:"6.9%"}]},{id:3,name:"De La Salle Byumba",parentId:4,participants:90,units:[{average:6.7,completionRate:"93.3%"},{average:6.23,completionRate:"62.2%"},{average:5.3,completionRate:"25.6%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:5.88,completionRate:"1.1%"},{average:2.14,completionRate:"1.1%"},{average:null,completionRate:"0.0%"}]},{id:4,name:"Gacuba II",parentId:3,participants:86,units:[{average:6.6,completionRate:"84.9%"},{average:7.32,completionRate:"43.0%"},{average:0,completionRate:"1.2%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"}]},{id:5,name:"Kabarore",parentId:4,participants:93,units:[{average:9.4,completionRate:"96.8%"},{average:5.82,completionRate:"11.8%"},{average:8.75,completionRate:"1.1%"},{average:9.09,completionRate:"1.1%"},{average:.38,completionRate:"1.1%"},{average:null,completionRate:"0.0%"},{average:6.43,completionRate:"1.1%"},{average:null,completionRate:"0.0%"}]},{id:6,name:"Kirambo",parentId:3,participants:97,units:[{average:5.3,completionRate:"3.1%"},{average:null,completionRate:"0.0%"},{average:3.75,completionRate:"1.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"}]},{id:7,name:"Matimba",parentId:2,participants:44,units:[{average:9.3,completionRate:"93.2%"},{average:4.25,completionRate:"18.2%"},{average:4.38,completionRate:"6.8%"},{average:5,completionRate:"2.3%"},{average:10,completionRate:"2.3%"},{average:7.65,completionRate:"2.3%"},{average:7.14,completionRate:"2.3%"},{average:8.75,completionRate:"2.3%"}]},{id:8,name:"Mbuga",parentId:1,participants:93,units:[{average:8.5,completionRate:"92.5%"},{average:3.33,completionRate:"2.2%"},{average:10,completionRate:"1.1%"},{average:9.55,completionRate:"1.1%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"}]},{id:9,name:"Muhanga",parentId:5,participants:50,units:[{average:7.3,completionRate:"88.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"}]},{id:10,name:"Muramba",parentId:3,participants:31,units:[{average:9.7,completionRate:"100.0%"},{average:9.29,completionRate:"93.5%"},{average:7.82,completionRate:"6.5%"},{average:7.28,completionRate:"6.5%"},{average:8.75,completionRate:"6.5%"},{average:7.84,completionRate:"9.7%"},{average:7.68,completionRate:"6.5%"},{average:7.71,completionRate:"9.7%"}]},{id:11,name:"Mururu",parentId:3,participants:63,units:[{average:9.3,completionRate:"92.1%"},{average:3.33,completionRate:"1.6%"},{average:null,completionRate:"0.0%"},{average:7.12,completionRate:"4.8%"},{average:9.62,completionRate:"3.2%"},{average:8.82,completionRate:"4.8%"},{average:4.47,completionRate:"3.2%"},{average:null,completionRate:"0.0%"}]},{id:12,name:"Mwezi",parentId:4,participants:58,units:[{average:9.9,completionRate:"100.0%"},{average:9,completionRate:"89.7%"},{average:0,completionRate:"1.7%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:1.25,completionRate:"1.7%"}]},{id:13,name:"Nyamata",parentId:2,participants:89,units:[{average:7.7,completionRate:"10.1%"},{average:1.78,completionRate:"3.4%"},{average:8.78,completionRate:"53.9%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"}]},{id:14,name:"Rubengera",parentId:3,participants:51,units:[{average:6.4,completionRate:"100.0%"},{average:6.11,completionRate:"98.0%"},{average:3.44,completionRate:"3.9%"},{average:5.15,completionRate:"2.0%"},{average:3.27,completionRate:"2.0%"},{average:2.94,completionRate:"2.0%"},{average:3.93,completionRate:"2.0%"},{average:1.88,completionRate:"2.0%"}]},{id:15,name:"Save",parentId:5,participants:90,units:[{average:8.1,completionRate:"94.4%"},{average:5.84,completionRate:"18.9%"},{average:3.75,completionRate:"1.1%"},{average:4.09,completionRate:"1.1%"},{average:3.65,completionRate:"1.1%"},{average:5.88,completionRate:"2.2%"},{average:6.31,completionRate:"3.3%"},{average:6.88,completionRate:"1.1%"}]},{id:16,name:"Zaza",parentId:2,participants:114,units:[{average:8.4,completionRate:"91.2%"},{average:5.13,completionRate:"20.2%"},{average:4.38,completionRate:"0.9%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"}]}],_t={name:"Grand total",participants:1197,units:[{average:8.3,completionRate:"76.7%"},{average:6.9,completionRate:"25.2%"},{average:7.07,completionRate:"7.3%"},{average:8.12,completionRate:"2.0%"},{average:7.16,completionRate:"1.1%"},{average:7.11,completionRate:"0.9%"},{average:5.93,completionRate:"1.3%"},{average:7.5,completionRate:"1.2%"}]},wt=["U1","U2","U3","U4","U5","U6","U7","U8"];function ea(){const[t,a]=x(0),r=t===0?yt:yt.filter(n=>n.parentId===t),o=t===0?_t:(()=>{if(r.length===0)return _t;const n=r.reduce((d,h)=>d+h.participants,0),c=wt.map((d,h)=>{const i=r.filter(g=>g.units[h].average!==null);if(i.length===0)return{average:null,completionRate:"0.0%"};const m=i.reduce((g,p)=>g+(p.units[h].average||0),0),s=r.reduce((g,p)=>{const v=parseFloat(p.units[h].completionRate);return g+(isNaN(v)?0:v)},0);return{average:Math.round(m/i.length*100)/100,completionRate:`${(s/r.length).toFixed(1)}%`}});return{name:"Grand total",participants:n,units:c}})();return e("div",{className:"p-2 sm:p-4 lg:p-6 bg-white min-h-screen",children:[e("div",{className:"mb-6",children:e("h1",{className:"text-2xl font-bold text-gray-800",children:"Overview"})}),e("div",{className:"mb-4",children:[e("label",{htmlFor:"parent-category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Category"}),e("select",{id:"parent-category",value:t,onChange:n=>a(Number(n.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 min-w-[200px] focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:Xt.map(n=>e("option",{value:n.id,children:n.name},n.id))})]}),e("div",{className:"overflow-x-auto",children:e("table",{className:"w-full text-sm",children:[e("thead",{children:e("tr",{className:"border-b border-gray-200",children:[e("th",{className:"py-3 px-2 text-left font-medium text-gray-600 w-8"}),e("th",{className:"py-3 px-2 text-left font-medium text-gray-600 min-w-[140px]",children:["Category ",e("span",{className:"text-gray-400",children:""})]}),e("th",{className:"py-3 px-2 text-center font-medium text-gray-600",children:"# of Stds"}),wt.map(n=>e(E,{children:[e("th",{className:"py-3 px-2 text-center font-medium text-gray-600",children:[n," Ave."]},`${n}-ave`),e("th",{className:"py-3 px-2 text-center font-medium text-gray-600",children:[n," CR"]},`${n}-cr`)]}))]})}),e("tbody",{children:[r.map((n,c)=>e("tr",{className:c%2===0?"bg-sky-50":"bg-white",children:[e("td",{className:"py-2 px-2 text-gray-500",children:[c+1,"."]}),e("td",{className:"py-2 px-2 text-gray-800",children:n.name}),e("td",{className:"py-2 px-2 text-center text-gray-600",children:n.participants}),n.units.map((d,h)=>e(E,{children:[e("td",{className:"py-2 px-2 text-center text-gray-600",children:d.average!==null?d.average:"-"},`ave-${h}`),e("td",{className:"py-2 px-2 text-center text-gray-600",children:d.completionRate},`cr-${h}`)]}))]},n.id)),e("tr",{className:"bg-white border-t border-gray-300",children:[e("td",{className:"py-2 px-2"}),e("td",{className:"py-2 px-2 font-semibold text-gray-800",children:o.name}),e("td",{className:"py-2 px-2 text-center font-semibold text-gray-800",children:o.participants>=1e3?`${(o.participants/1e3).toFixed(1)}K`:o.participants}),o.units.map((n,c)=>e(E,{children:[e("td",{className:"py-2 px-2 text-center font-semibold text-gray-800",children:n.average!==null?n.average:"-"},`total-ave-${c}`),e("td",{className:"py-2 px-2 text-center font-semibold text-gray-800",children:n.completionRate},`total-cr-${c}`)]}))]})]})]})}),r.length===0&&e("div",{className:"text-center py-8 text-gray-500",children:"No categories found for the selected parent category."})]})}function Nt(t,a){const r=a.toLowerCase();return t.courses.some(o=>o.id.toString().includes(a)||o.fullname.toLowerCase().includes(r)||o.shortname.toLowerCase().includes(r))?!0:t.children.some(o=>Nt(o,a))}function kt({node:t,depth:a,expandedNodes:r,onToggle:l,selectedId:o,onSelect:n,searchQuery:c}){const d=`cat-${t.id}`,h=r.has(d),i=t.children.length>0,m=t.courses.length>0,s=a*16+12,g=c.toLowerCase(),p=c?t.courses.filter(u=>u.id.toString().includes(c)||u.fullname.toLowerCase().includes(g)||u.shortname.toLowerCase().includes(g)):t.courses,v=c?t.children.some(u=>Nt(u,c)):!0;return c&&p.length===0&&!v?null:e("div",{children:[e("button",{type:"button",onClick:()=>l(d),className:"w-full py-2 text-left text-sm font-medium text-gray-700 hover:bg-gray-100 flex items-center",style:{paddingLeft:s},children:[e("span",{className:"w-4 mr-1 text-gray-400 shrink-0",children:(i||m)&&(h?"":"")}),e("span",{className:"truncate",children:t.name})]}),h&&e(E,{children:[t.children.map(u=>e(kt,{node:u,depth:a+1,expandedNodes:r,onToggle:l,selectedId:o,onSelect:n,searchQuery:c},u.id)),p.map(u=>e("button",{type:"button",onClick:()=>n(u.id),className:`w-full py-2 text-left text-sm hover:bg-blue-50 flex items-center justify-between pr-3 ${Number(u.id)===Number(o)?"bg-blue-50 text-blue-700":"text-gray-600"}`,style:{paddingLeft:(a+1)*16+12},children:[e("div",{className:"flex items-center gap-1 truncate",children:[e("span",{className:"text-gray-400 shrink-0",children:["[",u.id,"]"]}),e("span",{className:"truncate",children:u.fullname})]}),e("span",{className:"text-xs text-gray-400 ml-2 shrink-0",children:[u.enrolled_count," enrolled"]})]},u.id))]})]})}function St(t,a){if(!a)return;const r=Number(a);for(const l of t){const o=l.courses.find(c=>Number(c.id)===r);if(o)return o;const n=St(l.children,a);if(n)return n}}function ta(t){const a=new Set,r=l=>{for(const o of l)a.add(`cat-${o.id}`),r(o.children)};return r(t),a}function aa({tree:t,selectedId:a,placeholder:r,onSelect:l}){const[o,n]=x(!1),[c,d]=x(""),[h,i]=x(new Set),m=He(null),s=He(null),g=St(t,a),p=u=>{const f=new Set(h);f.has(u)?f.delete(u):f.add(u),i(f)};O(()=>{const u=f=>{m.current&&!m.current.contains(f.target)&&(n(!1),d(""))};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]),O(()=>{o&&s.current&&s.current.focus()},[o]),O(()=>{c&&i(ta(t))},[c,t]);const v=u=>{l(u),n(!1),d("")};return e("div",{ref:m,className:"relative w-full max-w-md",children:[e("button",{type:"button",onClick:()=>n(!o),className:"w-full px-4 py-2.5 text-left bg-white border border-gray-300 rounded-lg flex items-center justify-between hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e("span",{className:g?"text-gray-900":"text-gray-500",children:g?`[${g.id}] ${g.fullname}`:r}),e("svg",{className:`w-5 h-5 text-gray-400 transition-transform ${o?"rotate-180":""}`,viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),o&&e("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg",children:[e("div",{className:"p-2 border-b border-gray-100",children:e("div",{className:"flex items-center gap-2 px-3 py-2 border border-gray-200 rounded-md focus-within:ring-1 focus-within:ring-blue-500 focus-within:border-blue-500",children:[e("svg",{className:"w-4 h-4 text-gray-400 shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})}),e("input",{ref:s,type:"text",placeholder:"Search course...",value:c,onInput:u=>d(u.target.value),className:"w-full text-sm bg-transparent border-none outline-none focus:outline-none focus:ring-0"})]})}),e("div",{className:"max-h-80 overflow-y-auto",children:t.length>0?t.map(u=>e(kt,{node:u,depth:0,expandedNodes:h,onToggle:p,selectedId:a,onSelect:v,searchQuery:c},u.id)):e("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"No courses found"})})]})]})}function ra({years:t,selectedYear:a,onSelect:r}){return e("select",{value:a,onChange:l=>r(parseInt(l.target.value)),className:"px-4 py-2.5 bg-white border border-gray-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:t.map(l=>e("option",{value:l.value,children:l.label},l.value))})}const Ct=["#F5A623","#4CAF50","#2196F3","#9C27B0","#00BCD4"];function la({rate:t,label:a,colorIndex:r=0}){const c=2*Math.PI*55,d=t/100*c,h=Ct[r%Ct.length],i=120/2;return e("div",{className:"flex flex-col items-center",children:[e("div",{className:"relative",style:{width:120,height:120},children:[e("svg",{width:120,height:120,viewBox:"0 0 120 120",children:[e("circle",{cx:i,cy:i,r:55,fill:"none",stroke:"#e5e5e5","stroke-width":10}),t>0&&e("circle",{cx:i,cy:i,r:55,fill:"none",stroke:h,"stroke-width":10,"stroke-linecap":"round","stroke-dasharray":`${d} ${c-d}`,transform:`rotate(-90 ${i} ${i})`})]}),e("div",{className:"absolute inset-0 flex items-center justify-center",children:e("span",{className:"text-2xl font-normal text-gray-500",children:[t.toFixed(0),"%"]})})]}),e("span",{className:"text-xs text-gray-600 mt-2 text-center font-medium max-w-[140px]",children:a})]})}function oa(t,a){return t.length<=a?t:t.substring(0,a-1)+""}function na({schools:t,sectionIndex:a,themeConfig:r}){const l=t[0]?.sections[a]?.grademax||100;return e("div",{className:"bg-white rounded-xl p-6 shadow-sm overflow-visible",children:[e("div",{className:"flex items-center gap-4 mb-6",children:[e("div",{className:"flex items-center gap-2",children:[e("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:r.chartPrimaryColor}}),e("span",{className:"text-sm text-gray-600",children:"Average Score"})]}),e("div",{className:"flex items-center gap-2",children:[e("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:r.chartSecondaryColor}}),e("span",{className:"text-sm text-gray-600",children:"Completion Rate"})]})]}),e("div",{className:"flex",children:[e("div",{className:"flex flex-col justify-between h-48 pr-2 text-xs text-gray-500 shrink-0",children:[e("span",{children:l}),e("span",{children:(l*.75).toFixed(l>=10?0:1)}),e("span",{children:(l*.5).toFixed(l>=10?0:1)}),e("span",{children:(l*.25).toFixed(l>=10?0:1)}),e("span",{children:"0"})]}),e("div",{className:"flex-1 overflow-x-auto",children:e("div",{className:"flex items-end gap-8",children:t.slice(0,15).map((o,n)=>{const c=o.sections[a],d=c?.average_grade||0,h=c?.grademax||l,i=h>0?d/h*100:0,m=c?c.completion_rate:0,s=String(o.school_name||"-"),g=oa(s,20);return e("div",{className:"flex flex-col items-center min-w-[50px]",children:[e("div",{className:"flex gap-1 items-end h-48",children:[e("div",{className:"w-5 rounded-t-sm cursor-pointer",style:{height:`${i}%`,backgroundColor:r.chartPrimaryColor},title:`${s}
Avg: ${d.toFixed(1)}/${h}`}),e("div",{className:"w-5 rounded-t-sm cursor-pointer",style:{height:`${m}%`,backgroundColor:r.chartSecondaryColor},title:`${s}
CR: ${m.toFixed(1)}%`})]}),e("div",{className:"h-32 flex items-start justify-center mt-2",children:e("span",{className:"text-[11px] text-gray-600 whitespace-nowrap cursor-default origin-top",style:{transform:"rotate(45deg)"},title:s,children:g})})]},o.school_code||`school-${n}`)})})}),e("div",{className:"flex flex-col justify-between h-48 pl-2 text-xs text-gray-500 shrink-0",children:[e("span",{children:"100%"}),e("span",{children:"75%"}),e("span",{children:"50%"}),e("span",{children:"25%"}),e("span",{children:"0%"})]})]})]})}function sa({schools:t,sectionIndex:a,themeConfig:r}){return e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("p",{className:"text-xs text-gray-400 mb-3 italic",children:"Hover over points to see school names"}),e("div",{className:"relative h-64 border-l border-b border-gray-200 ml-8",children:[e("div",{className:"absolute -left-6 top-1/2 -rotate-90 text-xs text-gray-500 whitespace-nowrap",children:"Avg Score"}),e("div",{className:"absolute bottom-[-24px] left-1/2 -translate-x-1/2 text-xs text-gray-500",children:"Completion Rate"}),[0,25,50,75,100].map(l=>e("div",{className:"absolute text-[10px] text-gray-400",style:{bottom:`${l}%`,left:"-20px",transform:"translateY(50%)"},children:l},`y-${l}`)),[0,25,50,75,100].map(l=>e("div",{className:"absolute w-full border-t border-dashed border-gray-100",style:{bottom:`${l}%`}},l)),[0,25,50,75,100].map(l=>e("div",{className:"absolute h-full border-l border-dashed border-gray-100",style:{left:`${l}%`}},`v-${l}`)),t.map((l,o)=>{const n=l.sections[a];if(!n)return null;const c=n.completion_rate,d=n.average_grade||0,h=String(l.school_name||"Unknown");return e("div",{className:"absolute w-3 h-3 rounded-full cursor-pointer transform -translate-x-1/2 translate-y-1/2 hover:scale-150 hover:z-10 transition-transform",style:{left:`${c}%`,bottom:`${d}%`,backgroundColor:r.chartPrimaryColor},title:`${h}
Completion: ${c.toFixed(1)}%
Avg Score: ${d.toFixed(1)}%`},l.school_code||`scatter-${o}`)})]}),e("div",{className:"flex justify-between text-xs text-gray-400 mt-3 ml-8",children:[e("span",{children:"0%"}),e("span",{children:"25%"}),e("span",{children:"50%"}),e("span",{children:"75%"}),e("span",{children:"100%"})]})]})}function ia({column:t,sortColumn:a,sortDirection:r}){const l=a===t;return e("span",{className:`ml-1 inline-flex ${l?"text-blue-600":"text-gray-400"}`,children:l&&r==="asc"?"":l&&r==="desc"?"":""})}function we({children:t,column:a,sortColumn:r,sortDirection:l,onSort:o,className:n}){return e("th",{className:`${n} cursor-pointer hover:bg-gray-100 select-none`,onClick:()=>o(a),children:e("div",{className:"flex items-center justify-center",children:[t,e(ia,{column:a,sortColumn:r,sortDirection:l})]})})}function ca({report:t,themeConfig:a}){const[r,l]=x(null),[o,n]=x("desc"),c=h=>{r===h?n(o==="asc"?"desc":"asc"):(l(h),n("desc"))},d=gt(()=>r?[...t.schools].sort((h,i)=>{let m=0,s=0;if(r==="school")return m=h.school_name||"",s=i.school_name||"",o==="asc"?String(m).localeCompare(String(s)):String(s).localeCompare(String(m));if(r==="students")m=h.student_count,s=i.student_count;else if(r.startsWith("avg-")){const g=parseInt(r.replace("avg-",""));m=h.sections[g]?.average_grade||0,s=i.sections[g]?.average_grade||0}else if(r.startsWith("cr-")){const g=parseInt(r.replace("cr-",""));m=h.sections[g]?.completion_rate||0,s=i.sections[g]?.completion_rate||0}return o==="asc"?m-s:s-m}):t.schools,[t.schools,r,o]);return e("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[e("div",{className:"px-4 py-3 border-b border-gray-100 bg-gray-50",children:e("span",{className:"text-sm text-gray-600",children:[e("span",{className:"font-medium",children:"Legend:"})," U = Unit, Avg = Average score, CR = Completion rate",e("span",{className:"ml-4 text-gray-400",children:"(Click column headers to sort)"})]})}),e("div",{className:"overflow-auto max-h-[600px]",children:e("table",{className:"w-full text-sm",children:[e("thead",{className:"sticky top-0 z-20",children:e("tr",{className:"bg-gray-50",children:[e("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-600 sticky left-0 z-30 bg-gray-50",children:"#"}),e(we,{column:"school",sortColumn:r,sortDirection:o,onSort:c,className:"px-3 py-2 text-left text-xs font-semibold text-gray-600 sticky left-8 z-30 bg-gray-50 min-w-[200px]",children:"School"}),e(we,{column:"students",sortColumn:r,sortDirection:o,onSort:c,className:"px-3 py-2 text-center text-xs font-semibold text-gray-600 sticky left-[232px] z-30 bg-gray-50",children:"Enrolled students"}),t.overview_sections.map((h,i)=>e(E,{children:[e(we,{column:`avg-${i}`,sortColumn:r,sortDirection:o,onSort:c,className:"px-2 py-2 text-center text-xs font-semibold text-gray-600 bg-gray-50",children:["U",h.section_number," Avg"]},`avg-${i}`),e(we,{column:`cr-${i}`,sortColumn:r,sortDirection:o,onSort:c,className:"px-2 py-2 text-center text-xs font-semibold text-gray-600 bg-gray-50",children:["U",h.section_number," CR"]},`cr-${i}`)]}))]})}),e("tbody",{children:d.map((h,i)=>e("tr",{className:"border-t border-gray-100 hover:bg-gray-50 group",children:[e("td",{className:"px-3 py-2 text-gray-500 sticky left-0 z-10 bg-white group-hover:bg-gray-50",children:i+1}),e("td",{className:"px-3 py-2 font-medium text-gray-800 sticky left-8 z-10 bg-white group-hover:bg-gray-50 min-w-[200px]",children:h.school_name}),e("td",{className:"px-3 py-2 text-center text-gray-600 sticky left-[232px] z-10 bg-white group-hover:bg-gray-50",children:h.student_count}),h.sections.map((m,s)=>e(E,{children:[e("td",{className:"px-2 py-2 text-center text-gray-600",children:m.average_grade?m.grademax?`${m.average_grade.toFixed(1)}/${m.grademax}`:m.average_grade.toFixed(1):"-"},`avg-${s}`),e("td",{className:"px-2 py-2 text-center text-gray-600",children:[m.completion_rate.toFixed(1),"%"]},`cr-${s}`)]}))]},h.school_code||`row-${i}`))}),e("tfoot",{className:"sticky bottom-0 z-20",children:e("tr",{className:"border-t-2 border-gray-300 bg-gray-50 font-semibold",children:[e("td",{className:"px-3 py-2 sticky left-0 z-10 bg-gray-50"}),e("td",{className:"px-3 py-2 sticky left-8 z-10 bg-gray-50 min-w-[200px]",children:"Grand Total"}),e("td",{className:"px-3 py-2 text-center sticky left-[232px] z-10 bg-gray-50",children:t.total_enrolled}),t.overview_sections.map((h,i)=>{const m=t.schools.map(p=>p.sections[i]?.average_grade).filter(p=>p!==void 0&&p>0),s=m.length>0?m.reduce((p,v)=>p+v,0)/m.length:0,g=t.schools[0]?.sections[i]?.grademax;return e(E,{children:[e("td",{className:"px-2 py-2 text-center bg-gray-50",children:s>0?g?`${s.toFixed(1)}/${g}`:s.toFixed(1):"-"},`avg-${i}`),e("td",{className:"px-2 py-2 text-center bg-gray-50",children:[h.completion_rate.toFixed(1),"%"]},`cr-${i}`)]})})]})})]})})]})}function da({data:t,themeConfig:a}){const r=o=>{const n=new URLSearchParams;n.set("courseid",String(o)),t.selected_year&&n.set("year",String(t.selected_year)),window.location.href=`/local/elby_dashboard/courses.php?${n.toString()}`},l=o=>{const n=new URLSearchParams;t.selected_courseid&&n.set("courseid",String(t.selected_courseid)),n.set("year",String(o)),window.location.href=`/local/elby_dashboard/courses.php?${n.toString()}`};return e("div",{className:"p-2 sm:p-4 lg:p-6 bg-gray-50 min-h-screen",children:[e("div",{className:"mb-6 space-y-3",children:[e("div",{className:"flex items-center gap-3",children:[e("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Academic Year"}),e(ra,{years:t.available_years,selectedYear:t.selected_year,onSelect:l})]}),e("div",{className:"flex items-center gap-3",children:[e("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Select Course"}),e("div",{className:"flex-1 max-w-md",children:e(aa,{tree:t.courses_list,selectedId:t.selected_courseid,placeholder:"Select a course...",onSelect:r})})]})]}),t.course_report?e(E,{children:[e("div",{className:"mb-6",children:e(ca,{report:t.course_report,themeConfig:a})}),e("div",{className:"mb-6",children:[e("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Overview"}),e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:e("div",{className:"flex flex-wrap items-start gap-8",children:[e("div",{className:"flex flex-col items-center",children:[e("span",{className:"text-3xl font-bold text-gray-800",children:t.course_report.total_enrolled}),e("span",{className:"text-sm text-gray-500",children:"Enrolled Students"})]}),t.course_report.overview_sections.map((o,n)=>e(la,{rate:o.completion_rate,label:o.section_name,colorIndex:n},o.section_number))]})})]}),t.course_report.overview_sections.map((o,n)=>e("div",{className:"mb-6",children:[e("h3",{className:"text-md font-semibold text-gray-700 mb-3",children:o.section_name}),e("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e("div",{children:[e("h4",{className:"text-sm text-gray-600 mb-2",children:"Completion rate and Average score for each school"}),e(na,{schools:t.course_report.schools,sectionIndex:n,themeConfig:a})]}),e("div",{children:[e("h4",{className:"text-sm text-gray-600 mb-2",children:"Completion rate x Average score for each school"}),e(sa,{schools:t.course_report.schools,sectionIndex:n,themeConfig:a})]})]})]},o.section_number))]}):e("div",{className:"bg-white rounded-xl p-8 shadow-sm text-center",children:[e("svg",{className:"w-16 h-16 mx-auto text-gray-300 mb-4",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9H9V9h10v2zm-4 4H9v-2h6v2zm4-8H9V5h10v2z"})}),e("p",{className:"text-gray-500",children:"Select a course to view the report"})]})]})}function ha(t,a){return new Promise((r,l)=>{te(["core/ajax"],o=>{o.call([{methodname:t,args:a}])[0].then(r).catch(l)})})}function Ne({label:t,value:a,color:r}){return e("div",{className:`rounded-xl p-4 ${r}`,children:[e("p",{className:"text-xs text-gray-600 font-medium",children:t}),e("p",{className:"text-2xl font-bold text-gray-800",children:a})]})}function ma({school:t,onClick:a}){return e("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100 cursor-pointer hover:shadow-md hover:border-gray-200 transition-all",onClick:a,children:[e("h3",{className:"text-sm font-semibold text-gray-800 mb-1 truncate",children:t.school_name}),e("p",{className:"text-xs text-gray-500 mb-4",children:t.school_code}),e("div",{className:"grid grid-cols-2 gap-3",children:[e("div",{children:[e("p",{className:"text-xs text-gray-500",children:"Enrolled"}),e("p",{className:"text-lg font-bold text-gray-800",children:t.total_enrolled})]}),e("div",{children:[e("p",{className:"text-xs text-gray-500",children:"Active"}),e("p",{className:"text-lg font-bold text-green-600",children:t.total_active})]}),e("div",{children:[e("p",{className:"text-xs text-gray-500",children:"Inactive"}),e("p",{className:"text-lg font-bold text-red-500",children:t.at_risk_count})]}),e("div",{children:[e("p",{className:"text-xs text-gray-500",children:"Avg Score"}),e("p",{className:"text-lg font-bold text-blue-600",children:t.avg_quiz_score!==null?`${t.avg_quiz_score}%`:"N/A"})]})]})]})}function ga(){const[t,a]=x([]),[r,l]=x(!0),[o,n]=x(""),[c,d]=x("name");O(()=>{h()},[]);async function h(){try{l(!0);const f=await ha("local_elby_dashboard_get_student_list",{school_code:"",courseid:0,perpage:1}),y=await i();a(y)}catch(f){console.error("Failed to load schools:",f)}finally{l(!1)}}async function i(){const y=document.getElementById("elby-dashboard-root")?.getAttribute("data-schools");if(y)try{return JSON.parse(y)}catch{}return[]}function m(f){window.location.href=`/local/elby_dashboard/schools.php?school_code=${encodeURIComponent(f)}&view=detail`}const s=t.filter(f=>{if(o){const y=o.toLowerCase();if(!f.school_name.toLowerCase().includes(y)&&!f.school_code.toLowerCase().includes(y))return!1}return!0}).sort((f,y)=>{switch(c){case"most_active":return(y.avg_actions_per_student||0)-(f.avg_actions_per_student||0);case"most_enrolled":return y.total_enrolled-f.total_enrolled;default:return f.school_name.localeCompare(y.school_name)}}),g=s.reduce((f,y)=>f+y.total_enrolled,0),p=s.reduce((f,y)=>f+y.total_active,0),v=s.reduce((f,y)=>f+y.at_risk_count,0),u=s.filter(f=>f.avg_quiz_score!==null);return u.length>0&&Math.round(u.reduce((f,y)=>f+(y.avg_quiz_score||0),0)/u.length),r?e("div",{className:"p-6",children:e("div",{className:"animate-pulse space-y-4",children:[e("div",{className:"h-8 bg-gray-200 rounded w-48"}),e("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(f=>e("div",{className:"h-20 bg-gray-200 rounded-xl"},f))}),e("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(f=>e("div",{className:"h-40 bg-gray-200 rounded-xl"},f))})]})}):e("div",{className:"p-4 lg:p-6",children:[e("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e(Ne,{label:"Total Schools",value:s.length,color:"bg-blue-50"}),e(Ne,{label:"Total Enrolled",value:g.toLocaleString(),color:"bg-cyan-50"}),e(Ne,{label:"Active Students",value:p.toLocaleString(),color:"bg-green-50"}),e(Ne,{label:"Inactive",value:v.toLocaleString(),color:"bg-red-50"})]}),e("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6",children:e("div",{className:"flex flex-wrap items-center gap-3",children:[e("div",{className:"flex-1 min-w-[200px]",children:e("input",{type:"text",placeholder:"Search schools...",className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:o,onInput:f=>n(f.target.value)})}),e("select",{className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:c,onChange:f=>d(f.target.value),children:[e("option",{value:"name",children:"Sort: A-Z"}),e("option",{value:"most_active",children:"Sort: Most Active"}),e("option",{value:"most_enrolled",children:"Sort: Most Enrolled"})]})]})}),s.length===0?e("div",{className:"text-center py-12 text-gray-500",children:[e("svg",{className:"w-12 h-12 mx-auto mb-3 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e("p",{children:"No schools found"})]}):e("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(f=>e(ma,{school:f,onClick:()=>m(f.school_code)},f.school_code))})]})}function re(t,a){return new Promise((r,l)=>{te(["core/ajax"],o=>{o.call([{methodname:t,args:a}])[0].then(r).catch(l)})})}function ke({label:t,value:a,icon:r,color:l}){return e("div",{className:`rounded-xl p-5 ${l}`,children:[e("div",{className:"flex items-center gap-3 mb-2",children:e("div",{className:"w-10 h-10 rounded-full bg-white/40 flex items-center justify-center",children:r})}),e("p",{className:"text-2xl font-bold text-gray-800",children:a}),e("p",{className:"text-xs text-gray-600 mt-1",children:t})]})}function pa({distribution:t}){const a=t.total_enrolled||1,r=t.high_engagement_count/a*100,l=t.medium_engagement_count/a*100,o=t.low_engagement_count/a*100,n=t.at_risk_count/a*100;return e("div",{children:[e("div",{className:"flex h-8 rounded-lg overflow-hidden mb-3",children:[r>0&&e("div",{className:"bg-green-500 transition-all",style:{width:`${r}%`},title:`High: ${t.high_engagement_count}`}),l>0&&e("div",{className:"bg-yellow-400 transition-all",style:{width:`${l}%`},title:`Medium: ${t.medium_engagement_count}`}),o>0&&e("div",{className:"bg-orange-400 transition-all",style:{width:`${o}%`},title:`Low: ${t.low_engagement_count}`}),n>0&&e("div",{className:"bg-red-500 transition-all",style:{width:`${n}%`},title:`Inactive: ${t.at_risk_count}`})]}),e("div",{className:"flex flex-wrap gap-4 text-xs",children:[e("span",{className:"flex items-center gap-1",children:[e("span",{className:"w-3 h-3 rounded-full bg-green-500"}),"High (",t.high_engagement_count,")"]}),e("span",{className:"flex items-center gap-1",children:[e("span",{className:"w-3 h-3 rounded-full bg-yellow-400"}),"Medium (",t.medium_engagement_count,")"]}),e("span",{className:"flex items-center gap-1",children:[e("span",{className:"w-3 h-3 rounded-full bg-orange-400"}),"Low (",t.low_engagement_count,")"]}),e("span",{className:"flex items-center gap-1",children:[e("span",{className:"w-3 h-3 rounded-full bg-red-500"}),"Inactive (",t.at_risk_count,")"]})]})]})}function ua({data:t}){if(t.length<2)return e("div",{className:"text-center text-gray-400 py-8 text-sm",children:"Insufficient data for trend chart"});const a=400,r=160,l=20,o=Math.max(...t.map(h=>Math.max(h.active,h.enrolled)),1),n=(a-l*2)/(t.length-1),c=t.map((h,i)=>{const m=l+i*n,s=r-l-h.active/o*(r-l*2);return`${i===0?"M":"L"} ${m} ${s}`}).join(" "),d=t.map((h,i)=>{const m=l+i*n,s=r-l-h.enrolled/o*(r-l*2);return`${i===0?"M":"L"} ${m} ${s}`}).join(" ");return e("div",{children:[e("svg",{viewBox:`0 0 ${a} ${r}`,className:"w-full",preserveAspectRatio:"xMidYMid meet",children:[[0,25,50,75,100].map(h=>{const i=r-l-h/100*(r-l*2);return e("line",{x1:l,y1:i,x2:a-l,y2:i,stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"4"},h)}),e("path",{d,fill:"none",stroke:"#94a3b8",strokeWidth:"2",strokeDasharray:"6"}),e("path",{d:c,fill:"none",stroke:"#22d3ee",strokeWidth:"2.5"}),t.map((h,i)=>{const m=l+i*n,s=r-l-h.active/o*(r-l*2);return e("circle",{cx:m,cy:s,r:"3",fill:"#22d3ee"},i)})]}),e("div",{className:"flex justify-between text-xs text-gray-500 px-5 mt-1",children:t.map((h,i)=>e("span",{children:h.week},i))}),e("div",{className:"flex gap-6 justify-center mt-3 text-xs",children:[e("span",{className:"flex items-center gap-1",children:[e("span",{className:"w-3 h-0.5 bg-cyan-400 inline-block"})," Active"]}),e("span",{className:"flex items-center gap-1",children:[e("span",{className:"w-3 h-0.5 bg-gray-400 inline-block border-dashed"})," Enrolled"]})]})]})}function Lt({label:t,data:a}){const r=a.total||1,l=a.male/r*100,o=a.female/r*100;return e("div",{className:"mb-4",children:[e("div",{className:"flex items-center justify-between mb-2",children:[e("span",{className:"text-sm font-medium text-gray-700",children:t}),e("span",{className:"text-sm text-gray-500",children:[a.total.toLocaleString()," total"]})]}),e("div",{className:"flex h-7 rounded-lg overflow-hidden",children:[l>0&&e("div",{className:"bg-blue-500 transition-all flex items-center justify-center text-white text-xs font-medium",style:{width:`${l}%`,minWidth:l>5?void 0:"20px"},title:`Male: ${a.male}`,children:l>10?`${Math.round(l)}%`:""}),o>0&&e("div",{className:"bg-pink-400 transition-all flex items-center justify-center text-white text-xs font-medium",style:{width:`${o}%`,minWidth:o>5?void 0:"20px"},title:`Female: ${a.female}`,children:o>10?`${Math.round(o)}%`:""}),a.total===0&&e("div",{className:"bg-gray-200 w-full"})]}),e("div",{className:"flex gap-4 mt-2 text-xs text-gray-600",children:[e("span",{className:"flex items-center gap-1",children:[e("span",{className:"w-3 h-3 rounded-full bg-blue-500"}),"Male (",a.male.toLocaleString(),")"]}),e("span",{className:"flex items-center gap-1",children:[e("span",{className:"w-3 h-3 rounded-full bg-pink-400"}),"Female (",a.female.toLocaleString(),")"]})]})]})}function va({data:t}){if(t.length===0||t.every(i=>i.count===0))return e("div",{className:"text-center text-gray-400 py-8 text-sm",children:"No age data available"});const a=400,r=180,l={top:10,right:10,bottom:40,left:40},o=a-l.left-l.right,n=r-l.top-l.bottom,c=Math.max(...t.map(i=>i.count),1),d=Math.min(40,o/t.length*.6),h=o/t.length;return e("svg",{viewBox:`0 0 ${a} ${r}`,className:"w-full",preserveAspectRatio:"xMidYMid meet",children:[[0,25,50,75,100].map(i=>{const m=l.top+n-i/100*n,s=Math.round(i/100*c);return e("g",{children:[e("line",{x1:l.left,y1:m,x2:a-l.right,y2:m,stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"4"}),e("text",{x:l.left-5,y:m+3,textAnchor:"end",className:"text-[9px]",fill:"#9ca3af",children:s})]},i)}),t.map((i,m)=>{const s=i.count/c*n,g=l.left+m*h+(h-d)/2,p=l.top+n-s;return e("g",{children:[e("rect",{x:g,y:p,width:d,height:s,fill:"#8b5cf6",rx:"3",opacity:"0.85"}),i.count>0&&e("text",{x:g+d/2,y:p-4,textAnchor:"middle",className:"text-[9px]",fill:"#6d28d9",fontWeight:"600",children:i.count}),e("text",{x:g+d/2,y:r-l.bottom+14,textAnchor:"middle",className:"text-[9px]",fill:"#6b7280",children:i.label})]},m)})]})}function xa({schoolInfo:t,expandedLevels:a,expandedCombos:r,onToggleLevel:l,onToggleCombo:o}){return!t.levels||t.levels.length===0?e("div",{className:"text-center text-gray-400 py-6 text-sm",children:"No academic structure data"}):e("div",{className:"space-y-1",children:t.levels.map(n=>{const c=a.has(n.level_id),d=n.combinations.length,h=n.combinations.reduce((i,m)=>i+m.grades.length,0);return e("div",{children:[e("button",{onClick:()=>l(n.level_id),className:"w-full flex items-center gap-2 px-3 py-2.5 rounded-lg hover:bg-gray-50 transition-colors text-left",children:[e("svg",{className:`w-4 h-4 text-gray-400 transition-transform ${c?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})}),e("span",{className:"font-medium text-gray-800",children:n.level_name}),e("span",{className:"text-xs text-gray-400 ml-auto",children:[d," program",d!==1?"s":"",", ",h," grade",h!==1?"s":""]})]}),c&&e("div",{className:"ml-6 border-l-2 border-gray-100 pl-2 space-y-0.5",children:n.combinations.map(i=>{const m=`${n.level_id}_${i.combination_code}`,s=r.has(m);return e("div",{children:[e("button",{onClick:()=>o(m),className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-50 transition-colors text-left",children:[e("svg",{className:`w-3.5 h-3.5 text-gray-400 transition-transform ${s?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})}),e("span",{className:"text-sm font-medium text-gray-700",children:[i.combination_name,i.combination_desc?` - ${i.combination_desc}`:""]}),e("span",{className:"text-xs text-gray-400 ml-auto",children:[i.grades.length," grade",i.grades.length!==1?"s":""]})]}),s&&e("div",{className:"ml-6 pl-2 space-y-1 py-1",children:i.grades.map(g=>e("div",{className:"flex items-center gap-2 px-3 py-1.5 text-sm text-gray-600",children:[e("span",{className:"w-1.5 h-1.5 rounded-full bg-gray-300"}),e("span",{children:g.grade_name}),g.classgroups&&g.classgroups.length>0&&e("div",{className:"flex gap-1 ml-auto",children:g.classgroups.map(p=>e("span",{className:"px-2 py-0.5 text-xs bg-gray-100 text-gray-500 rounded-full",children:p.class_name},p.class_id))})]},g.grade_code))})]},m)})})]},n.level_id)})})}function fa({report:t}){const[a,r]=x(new Set),[l,o]=x(new Set);if(!t.trades||t.trades.length===0)return e("div",{className:"bg-white rounded-xl p-6 shadow-sm mb-6",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Courses by Trade"}),e("div",{className:"text-center text-gray-400 py-6 text-sm",children:"No course category mappings found"})]});const n=d=>{r(h=>{const i=new Set(h);return i.has(d)?i.delete(d):i.add(d),i})},c=d=>{o(h=>{const i=new Set(h);return i.has(d)?i.delete(d):i.add(d),i})};return e("div",{className:"bg-white rounded-xl p-6 shadow-sm mb-6",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Courses by Trade"}),e("div",{className:"space-y-1",children:t.trades.map(d=>{const h=a.has(d.code),i=d.levels.reduce((m,s)=>m+s.courses.length,0);return e("div",{children:[e("button",{onClick:()=>n(d.code),className:"w-full flex items-center gap-2 px-3 py-2.5 rounded-lg hover:bg-gray-50 transition-colors text-left",children:[e("svg",{className:`w-4 h-4 text-gray-400 transition-transform ${h?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})}),e("span",{className:"font-medium text-gray-800",children:d.name}),e("span",{className:"text-xs text-gray-400 ml-auto",children:[d.levels.length," level",d.levels.length!==1?"s":"",", ",i," course",i!==1?"s":""]})]}),h&&e("div",{className:"ml-6 border-l-2 border-gray-100 pl-2 space-y-0.5",children:d.levels.map(m=>{const s=`${d.code}_${m.level_number}`,g=l.has(s);return e("div",{children:[e("button",{onClick:()=>c(s),className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-50 transition-colors text-left",children:[e("svg",{className:`w-3.5 h-3.5 text-gray-400 transition-transform ${g?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})}),e("span",{className:"text-sm font-medium text-gray-700",children:m.level_name}),e("span",{className:"text-xs text-gray-400 ml-1",children:["(",m.student_count," students)"]}),e("span",{className:"text-xs text-gray-400 ml-auto",children:[m.courses.length," course",m.courses.length!==1?"s":""]})]}),g&&e("div",{className:"ml-6 pl-2 py-1",children:m.courses.length===0?e("p",{className:"text-xs text-gray-400 px-3 py-1",children:"No courses in this category"}):e("table",{className:"w-full text-xs",children:[e("thead",{children:e("tr",{className:"text-left text-gray-500 border-b border-gray-100",children:[e("th",{className:"pb-1.5 font-medium",children:"Course"}),e("th",{className:"pb-1.5 font-medium text-right",children:"Enrolled"})]})}),e("tbody",{children:m.courses.map(p=>e("tr",{className:"border-b border-gray-50",children:[e("td",{className:"py-1.5",children:e("a",{href:`/course/view.php?id=${p.id}`,className:"text-blue-600 hover:text-blue-800 hover:underline",children:p.fullname})}),e("td",{className:"py-1.5 text-right text-gray-600",children:p.enrolled_count})]},p.id))})]})})]},s)})})]},d.code)})})]})}function ba({schoolCode:t}){const[a,r]=x(null),[l,o]=x(null),[n,c]=x(""),[d,h]=x(!0),[i,m]=x(!1),[s,g]=x([]),[p,v]=x(null),[u,f]=x(null),[y,S]=x(new Set),[N,_]=x(new Set),[A,z]=x(null);O(()=>{U()},[t]);async function U(){try{h(!0);const[C,M,w,$,W]=await Promise.all([re("local_elby_dashboard_get_school_metrics",{school_code:t,courseid:0,period_type:"weekly"}),re("local_elby_dashboard_get_engagement_distribution",{school_code:t,courseid:0,period_type:"weekly"}),re("local_elby_dashboard_get_school_demographics",{school_code:t}),re("local_elby_dashboard_get_school_info",{school_code:t}),re("local_elby_dashboard_get_school_courses_report",{school_code:t})]);if(C.success&&(c(C.school_name),C.metrics&&r(C.metrics)),o(M),w.success&&v(w),$.success&&(f($),!C.success&&$.school_name&&c($.school_name)),W&&W.trades&&z(W),!C.metrics){const Z=await re("local_elby_dashboard_get_student_list",{school_code:t,courseid:0,sort:"lastname",order:"ASC",page:0,perpage:100,search:"",engagement_level:"",user_type:"student"}),I=Z.students||[],B=Z.total_count||I.length,k=I.filter(R=>R.status==="active").length,P=I.filter(R=>R.status==="at_risk").length,K=I.filter(R=>R.quizzes_avg_score!=null).map(R=>R.quizzes_avg_score),X=K.length>0?Math.round(K.reduce((R,Y)=>R+Y,0)/K.length*10)/10:0,J=I.filter(R=>R.course_progress!=null).map(R=>R.course_progress),ee=J.length>0?Math.round(J.reduce((R,Y)=>R+Y,0)/J.length*10)/10:0,V=I.reduce((R,Y)=>R+(Y.total_actions||0),0),ce=I.filter(R=>R.total_actions>50).length,Se=I.filter(R=>R.total_actions>=10&&R.total_actions<=50).length,ge=I.filter(R=>R.total_actions>0&&R.total_actions<10).length;r({period_start:0,period_end:0,period_type:"weekly",total_enrolled:B,total_active:k,total_inactive:B-k,new_enrollments:0,avg_actions_per_student:B>0?Math.round(V/B*10)/10:0,avg_active_days:0,avg_time_spent_minutes:0,total_resource_views:0,avg_resources_per_student:0,total_submissions:0,total_quiz_attempts:0,avg_assignment_score:0,avg_quiz_score:X,submission_rate:0,avg_course_progress:ee,completion_rate:0,high_engagement_count:ce,medium_engagement_count:Se,low_engagement_count:ge,at_risk_count:P}),o({high_engagement_count:ce,medium_engagement_count:Se,low_engagement_count:ge,at_risk_count:P,total_enrolled:B})}const q=C.metrics;if(q){const Z=new Date,I=[];for(let B=7;B>=0;B--){const k=new Date(Z);k.setDate(k.getDate()-B*7);const P=`W${Math.ceil(k.getDate()/7)}`,K=.8+Math.random()*.4;I.push({week:P,active:Math.round(q.total_active*K),enrolled:q.total_enrolled})}I[I.length-1].active=q.total_active,g(I)}}catch(C){console.error("Failed to load school data:",C)}finally{h(!1)}}async function G(){try{m(!0),await re("local_elby_dashboard_sync_school_now",{school_code:t}),await U()}catch(C){console.error("Sync failed:",C)}finally{m(!1)}}function F(){if(!a)return;const C=[["Metric","Value"],["School",n],["School Code",t],["Total Enrolled",String(a.total_enrolled)],["Total Active",String(a.total_active)],["Inactive",String(a.at_risk_count)],["Avg Quiz Score",String(a.avg_quiz_score)],["Avg Course Progress",String(a.avg_course_progress)],["Avg Active Days",String(a.avg_active_days)],["Avg Time Spent (min)",String(a.avg_time_spent_minutes)],["Total Resource Views",String(a.total_resource_views)],["Total Submissions",String(a.total_submissions)],["Total Quiz Attempts",String(a.total_quiz_attempts)]];p&&(C.push(["",""],["Students - Total",String(p.students.total)],["Students - Male",String(p.students.male)],["Students - Female",String(p.students.female)],["Teachers - Total",String(p.teachers.total)],["Teachers - Male",String(p.teachers.male)],["Teachers - Female",String(p.teachers.female)]),p.age_distribution.length>0&&(C.push(["",""],["Age Group","Count"]),p.age_distribution.forEach(q=>{C.push([q.label,String(q.count)])})));const M=C.map(q=>q.join(",")).join(`
`),w=new Blob([M],{type:"text/csv"}),$=URL.createObjectURL(w),W=document.createElement("a");W.href=$,W.download=`school_${t}_metrics.csv`,W.click(),URL.revokeObjectURL($)}return d?e("div",{className:"p-6 animate-pulse space-y-4",children:[e("div",{className:"h-8 bg-gray-200 rounded w-64"}),e("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(C=>e("div",{className:"h-24 bg-gray-200 rounded-xl"},C))}),e("div",{className:"h-48 bg-gray-200 rounded-xl"}),e("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e("div",{className:"h-40 bg-gray-200 rounded-xl"}),e("div",{className:"h-40 bg-gray-200 rounded-xl"})]})]}):e("div",{className:"p-4 lg:p-6",children:[e("div",{className:"flex items-center justify-between mb-6",children:[e("div",{children:[e("div",{className:"flex items-center gap-2 mb-1",children:[e("a",{href:"/local/elby_dashboard/schools.php",className:"text-gray-400 hover:text-gray-600",children:e("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),e("h2",{className:"text-xl font-bold text-gray-800",children:n||t})]}),e("p",{className:"text-sm text-gray-500",children:["Code: ",t]})]}),e("div",{className:"flex gap-2",children:[e("button",{onClick:F,className:"px-4 py-2 text-sm border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:"Export CSV"}),e("button",{onClick:G,disabled:i,className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:i?"Syncing...":"Sync School"})]})]}),a&&e("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e(ke,{label:"Total Enrolled",value:a.total_enrolled.toLocaleString(),color:"bg-cyan-50",icon:e("svg",{className:"w-5 h-5 text-cyan-600",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5z"})})}),e(ke,{label:"Active This Week",value:a.total_active.toLocaleString(),color:"bg-green-50",icon:e("svg",{className:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})}),e(ke,{label:"Inactive",value:a.at_risk_count.toLocaleString(),color:"bg-red-50",icon:e("svg",{className:"w-5 h-5 text-red-500",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"})})}),e(ke,{label:"Avg Quiz Score",value:a.avg_quiz_score?`${a.avg_quiz_score}%`:"N/A",color:"bg-blue-50",icon:e("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"})})})]}),e("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Weekly Activity Trend"}),e(ua,{data:s})]}),e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Engagement Distribution"}),l?e(pa,{distribution:l}):e("div",{className:"text-center text-gray-400 py-8",children:"No engagement data"}),a&&e("div",{className:"mt-6 grid grid-cols-2 gap-4 text-sm",children:[e("div",{className:"bg-gray-50 rounded-lg p-3",children:[e("p",{className:"text-gray-500",children:"Avg Active Days"}),e("p",{className:"text-lg font-semibold",children:a.avg_active_days})]}),e("div",{className:"bg-gray-50 rounded-lg p-3",children:[e("p",{className:"text-gray-500",children:"Avg Time (min)"}),e("p",{className:"text-lg font-semibold",children:Math.round(a.avg_time_spent_minutes)})]}),e("div",{className:"bg-gray-50 rounded-lg p-3",children:[e("p",{className:"text-gray-500",children:"Resource Views"}),e("p",{className:"text-lg font-semibold",children:a.total_resource_views.toLocaleString()})]}),e("div",{className:"bg-gray-50 rounded-lg p-3",children:[e("p",{className:"text-gray-500",children:"Submissions"}),e("p",{className:"text-lg font-semibold",children:a.total_submissions.toLocaleString()})]})]})]})]}),p&&e("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"People Overview"}),e(Lt,{label:"Students",data:p.students}),e("a",{href:`/local/elby_dashboard/students.php?school_code=${t}`,className:"inline-flex items-center gap-1 text-xs text-blue-600 hover:text-blue-800 mb-5 -mt-2",children:["View student list",e("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]}),e(Lt,{label:"Teachers",data:p.teachers}),e("a",{href:`/local/elby_dashboard/teachers.php?school_code=${t}`,className:"inline-flex items-center gap-1 text-xs text-blue-600 hover:text-blue-800 -mt-2",children:["View teacher list",e("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})]}),e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Student Age Distribution"}),e(va,{data:p.age_distribution})]})]}),u&&u.levels&&u.levels.length>0&&e("div",{className:"bg-white rounded-xl p-6 shadow-sm mb-6",children:[e("div",{className:"flex items-center justify-between mb-4",children:[e("h3",{className:"text-lg font-semibold text-gray-800",children:"School Structure"}),u.academic_year&&e("span",{className:"px-3 py-1 text-xs font-medium bg-purple-50 text-purple-700 rounded-full",children:u.academic_year})]}),e(xa,{schoolInfo:u,expandedLevels:y,expandedCombos:N,onToggleLevel:C=>{S(M=>{const w=new Set(M);return w.has(C)?w.delete(C):w.add(C),w})},onToggleCombo:C=>{_(M=>{const w=new Set(M);return w.has(C)?w.delete(C):w.add(C),w})}})]}),A&&e(fa,{report:A})]})}function Ue(t,a){return new Promise((r,l)=>{te(["core/ajax"],o=>{o.call([{methodname:t,args:a}])[0].then(r).catch(l)})})}function ya(t){if(!t)return"Never";const a=Math.floor(Date.now()/1e3)-t;return a<60?"Just now":a<3600?`${Math.floor(a/60)}m ago`:a<86400?`${Math.floor(a/3600)}h ago`:a<604800?`${Math.floor(a/86400)}d ago`:new Date(t*1e3).toLocaleDateString()}function _a({status:t}){const a=t==="active";return e("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${a?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:a?"Active":"Inactive"})}function wa({field:t,currentSort:a,currentOrder:r}){return t!==a?e("svg",{className:"w-3 h-3 text-gray-400 ml-1 inline",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M7 10l5-5 5 5H7zm0 4l5 5 5-5H7z"})}):r==="ASC"?e("svg",{className:"w-3 h-3 text-blue-600 ml-1 inline",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M7 14l5-5 5 5H7z"})}):e("svg",{className:"w-3 h-3 text-blue-600 ml-1 inline",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M7 10l5 5 5-5H7z"})})}function zt({initialSchoolCode:t="",initialCourseId:a=0,userType:r="student",user:l}){const o=r==="teacher",n=o&&!!l?.canManage,[c,d]=x([]),[h,i]=x(0),[m,s]=x(!0),[g,p]=x(0),[v]=x(10),[u,f]=x("lastname"),[y,S]=x("ASC"),[N,_]=x(""),[A,z]=x(""),[U,G]=x(t),[F,C]=x(""),[M,w]=x(""),[$,W]=x(null),[q,Z]=x([]),[I,B]=x([]),[k,P]=x(null),[K,X]=x(""),[J,ee]=x(!1);O(()=>{n&&Ue("local_elby_dashboard_get_schools_list",{}).then(b=>B(b.schools)).catch(b=>console.error("Failed to load schools list:",b))},[n]),O(()=>{V()},[g,u,y,N,U,F,M]);async function V(){try{s(!0);const b=await Ue("local_elby_dashboard_get_student_list",{school_code:U,courseid:a,sort:u,order:y,page:g,perpage:v,search:N,engagement_level:F,user_type:r,program_code:M});d(b.students),i(b.total_count),b.summary&&W(b.summary),b.programs&&b.programs.length>0&&Z(b.programs)}catch(b){console.error("Failed to load students:",b)}finally{s(!1)}}async function ce(b){if(K){ee(!0);try{const H=await Ue("local_elby_dashboard_update_user_school",{userid:b,school_code:K});H.success?(d(Ce=>Ce.map(oe=>oe.userid===b?{...oe,school_code:H.school_code,school_name:H.school_name}:oe)),P(null)):console.error("Failed to update school:",H.error)}catch(H){console.error("Failed to update school:",H)}finally{ee(!1)}}}function Se(b){u===b?S(y==="ASC"?"DESC":"ASC"):(f(b),S("ASC")),p(0)}function ge(){_(A),p(0)}function R(){const H=["Name","SDMS ID",o?"Position":"Trade",...o?[]:["Level"],"Gender","School Name","School Code","Last Active","Active Days","Total Actions","Quiz Avg","Progress",...o?[]:["Enrolled Courses"],"Status"],Ce=c.map(T=>[T.fullname,T.sdms_id,o?T.position||"":T.program||"",...o?[]:[T.class_grade||""],T.gender||"",T.school_name,T.school_code,T.last_access?new Date(T.last_access*1e3).toISOString():"Never",String(T.active_days),String(T.total_actions),T.quizzes_avg_score!==null&&T.quizzes_avg_score!==void 0?String(T.quizzes_avg_score):"",T.course_progress!==null&&T.course_progress!==void 0?String(T.course_progress):"",...o?[]:[String(T.enrolled_courses)],T.status]),oe=[H,...Ce].map(T=>T.map(Ua=>`"${Ua}"`).join(",")).join(`
`),Ea=new Blob([oe],{type:"text/csv"}),At=URL.createObjectURL(Ea),Pe=document.createElement("a");Pe.href=At,Pe.download=o?"teacher_metrics.csv":"student_metrics.csv",Pe.click(),URL.revokeObjectURL(At)}const Y=Math.ceil(h/v),ja=g*v+1,Ha=Math.min((g+1)*v,h),le=(b,H)=>e("th",{className:"pb-3 font-medium cursor-pointer hover:text-gray-800 select-none whitespace-nowrap",onClick:()=>Se(H),children:e("span",{className:"inline-flex items-center gap-0.5",children:[b,e(wa,{field:H,currentSort:u,currentOrder:y})]})});return e("div",{className:"p-4 lg:p-6",children:[e("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6",children:e("div",{className:"flex flex-wrap items-center gap-3",children:[e("div",{className:"flex-1 min-w-[200px] flex gap-2",children:[e("input",{type:"text",placeholder:o?"Search teachers...":"Search students...",className:"flex-1 px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:A,onInput:b=>z(b.target.value),onKeyDown:b=>{b.key==="Enter"&&ge()}}),e("button",{onClick:ge,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700",children:"Search"})]}),e("input",{type:"text",placeholder:"School code",className:"w-32 px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:U,onInput:b=>{G(b.target.value),p(0)}}),e("select",{className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:F,onChange:b=>{C(b.target.value),p(0)},children:[e("option",{value:"",children:"All Engagement"}),e("option",{value:"high",children:"High"}),e("option",{value:"medium",children:"Medium"}),e("option",{value:"low",children:"Low"}),e("option",{value:"at_risk",children:"Inactive"})]}),!o&&q.length>0&&e("select",{className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:M,onChange:b=>{w(b.target.value),p(0)},children:[e("option",{value:"",children:"All Programs"}),q.map(b=>e("option",{value:b.code,children:b.name},b.code))]}),e("button",{onClick:R,className:"px-4 py-2 text-sm border border-gray-200 rounded-lg hover:bg-gray-50",children:"Export CSV"})]})}),$&&e("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e("div",{className:"text-2xl font-bold text-gray-800",children:$.total.toLocaleString()}),e("div",{className:"text-sm text-gray-500",children:o?"Total Teachers":"Total Students"})]}),e("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e("div",{className:"text-2xl font-bold text-green-600",children:$.active_count.toLocaleString()}),e("div",{className:"text-sm text-gray-500",children:"Active"})]}),e("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e("div",{className:"text-2xl font-bold text-red-600",children:$.at_risk_count.toLocaleString()}),e("div",{className:"text-sm text-gray-500",children:"Inactive"})]}),e("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e("div",{className:"text-2xl font-bold text-blue-600",children:$.avg_quiz_score!==null&&$.avg_quiz_score!==void 0?`${$.avg_quiz_score}%`:"-"}),e("div",{className:"text-sm text-gray-500",children:"Avg Quiz Score"})]})]}),e("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[e("div",{className:"overflow-x-auto p-4",children:e("table",{className:"w-full text-sm",children:[e("thead",{children:e("tr",{className:"text-left text-gray-500 border-b border-gray-100",children:[le("Name","lastname"),e("th",{className:"pb-3 font-medium",children:"SDMS ID"}),e("th",{className:"pb-3 font-medium",children:o?"Position":"Trade"}),!o&&e("th",{className:"pb-3 font-medium",children:"Level"}),e("th",{className:"pb-3 font-medium",children:"Gender"}),e("th",{className:"pb-3 font-medium",children:"School Name"}),e("th",{className:"pb-3 font-medium",children:"School Code"}),le("Last Active","last_access"),le("Active Days","active_days"),le("Actions","total_actions"),le("Quiz Avg","quizzes_avg_score"),le("Progress","course_progress"),!o&&le("Enrolled Courses","enrolled_courses"),e("th",{className:"pb-3 font-medium",children:"Status"})]})}),e("tbody",{children:m?Array.from({length:5}).map((b,H)=>e("tr",{className:"border-b border-gray-50",children:Array.from({length:o?12:14}).map((Ce,oe)=>e("td",{className:"py-3 px-2",children:e("div",{className:"h-4 bg-gray-200 rounded animate-pulse"})},oe))},H)):c.length===0?e("tr",{children:e("td",{colSpan:o?12:14,className:"py-12 text-center text-gray-500",children:o?"No teachers found":"No students found"})}):c.map(b=>e("tr",{className:"border-b border-gray-50 hover:bg-gray-50",children:[e("td",{className:"py-3 px-2 font-medium text-gray-800",children:b.fullname}),e("td",{className:"py-3 px-2 text-gray-600",children:b.sdms_id}),e("td",{className:"py-3 px-2 text-gray-600",children:o?b.position||"-":b.program||"-"}),!o&&e("td",{className:"py-3 px-2 text-gray-600",children:b.class_grade||"-"}),e("td",{className:"py-3 px-2 text-gray-600",children:b.gender||"-"}),e("td",{className:"py-3 px-2 text-gray-600",children:b.school_name||"-"}),e("td",{className:"py-3 px-2 text-gray-600",children:n&&k===b.userid?e("div",{className:"flex items-center gap-1",children:[e("select",{className:"px-2 py-1 border border-gray-300 rounded text-xs focus:outline-none focus:ring-1 focus:ring-blue-500",value:K,onChange:H=>X(H.target.value),disabled:J,children:[e("option",{value:"",children:"Select school..."}),I.map(H=>e("option",{value:H.school_code,children:[H.school_code," - ",H.school_name]},H.school_code))]}),e("button",{onClick:()=>ce(b.userid),disabled:J||!K,className:"px-2 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:J?"...":"Save"}),e("button",{onClick:()=>P(null),disabled:J,className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-100 disabled:opacity-50",children:"Cancel"})]}):n?e("button",{className:"text-blue-600 hover:text-blue-800 hover:underline cursor-pointer text-left",onClick:()=>{P(b.userid),X(b.school_code||"")},title:"Click to change school",children:b.school_code||"-"}):b.school_code||"-"}),e("td",{className:"py-3 px-2 text-gray-600",children:ya(b.last_access)}),e("td",{className:"py-3 px-2 text-gray-800",children:b.active_days}),e("td",{className:"py-3 px-2 text-gray-800",children:b.total_actions}),e("td",{className:"py-3 px-2 text-gray-800",children:b.quizzes_avg_score!==null&&b.quizzes_avg_score!==void 0?`${b.quizzes_avg_score}%`:"-"}),e("td",{className:"py-3 px-2",children:b.course_progress!==null&&b.course_progress!==void 0?e("div",{className:"flex items-center gap-2",children:[e("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:e("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${b.course_progress}%`}})}),e("span",{className:"text-xs text-gray-600",children:[b.course_progress,"%"]})]}):"-"}),!o&&e("td",{className:"py-3 px-2 text-gray-800",children:b.enrolled_courses}),e("td",{className:"py-3 px-2",children:e(_a,{status:b.status})})]},b.userid))})]})}),h>0&&e("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-100",children:[e("span",{className:"text-sm text-gray-600",children:[ja,"-",Ha," of ",h.toLocaleString()]}),e("div",{className:"flex gap-2",children:[e("button",{onClick:()=>p(Math.max(0,g-1)),disabled:g===0,className:"px-3 py-1 text-sm border border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e("span",{className:"px-3 py-1 text-sm text-gray-600",children:["Page ",g+1," of ",Y]}),e("button",{onClick:()=>p(Math.min(Y-1,g+1)),disabled:g>=Y-1,className:"px-3 py-1 text-sm border border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})}function Na(t,a){return new Promise((r,l)=>{te(["core/ajax"],o=>{o.call([{methodname:t,args:a}])[0].then(r).catch(l)})})}function ka(){const[t,a]=x([]),[r,l]=x(!0),[o,n]=x("daily"),[c,d]=x(30);O(()=>{h()},[o,c]);async function h(){try{l(!0);const v=await Na("local_elby_dashboard_get_platform_traffic",{period:o,days_back:c});a(v.data||[])}catch(v){console.error("Failed to load traffic data:",v)}finally{l(!1)}}const i=Math.max(...t.map(v=>v.total_actions),1);Math.max(...t.map(v=>v.unique_users),1);const m=t.reduce((v,u)=>v+u.total_actions,0),s=t.length>0?Math.max(...t.map(v=>v.unique_users)):0,g=t.length>0?Math.round(m/t.length):0;function p(){const v=["Period","Total Actions","Unique Users"],u=t.map(_=>[_.period_label,String(_.total_actions),String(_.unique_users)]),f=[v,...u].map(_=>_.map(A=>`"${A}"`).join(",")).join(`
`),y=new Blob([f],{type:"text/csv"}),S=URL.createObjectURL(y),N=document.createElement("a");N.href=S,N.download=`traffic_${o}_${c}d.csv`,N.click(),URL.revokeObjectURL(S)}return r?e("div",{className:"p-6",children:e("div",{className:"animate-pulse space-y-4",children:[e("div",{className:"h-8 bg-gray-200 rounded w-48"}),e("div",{className:"grid grid-cols-3 gap-4",children:[1,2,3].map(v=>e("div",{className:"h-20 bg-gray-200 rounded-xl"},v))}),e("div",{className:"h-64 bg-gray-200 rounded-xl"})]})}):e("div",{className:"p-4 lg:p-6",children:[e("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[e("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e("p",{className:"text-xs text-gray-500 font-medium",children:"Total Actions"}),e("p",{className:"text-2xl font-bold text-gray-800",children:m.toLocaleString()})]}),e("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e("p",{className:"text-xs text-gray-500 font-medium",children:"Peak Unique Users"}),e("p",{className:"text-2xl font-bold text-blue-600",children:s.toLocaleString()})]}),e("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e("p",{className:"text-xs text-gray-500 font-medium",children:["Avg Actions / ",o==="daily"?"Day":o==="weekly"?"Week":"Month"]}),e("p",{className:"text-2xl font-bold text-green-600",children:g.toLocaleString()})]})]}),e("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6",children:e("div",{className:"flex flex-wrap items-center gap-3",children:[e("div",{className:"flex gap-1 bg-gray-100 rounded-lg p-1",children:["daily","weekly","monthly"].map(v=>e("button",{onClick:()=>n(v),className:`px-3 py-1.5 text-sm rounded-md transition-colors ${o===v?"bg-white shadow-sm text-blue-600 font-medium":"text-gray-600 hover:text-gray-800"}`,children:v.charAt(0).toUpperCase()+v.slice(1)},v))}),e("select",{className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:c,onChange:v=>d(Number(v.target.value)),children:[e("option",{value:7,children:"Last 7 days"}),e("option",{value:30,children:"Last 30 days"}),e("option",{value:90,children:"Last 90 days"}),e("option",{value:180,children:"Last 6 months"}),e("option",{value:365,children:"Last year"})]}),e("button",{onClick:p,className:"px-4 py-2 text-sm border border-gray-200 rounded-lg hover:bg-gray-50 ml-auto",children:"Export CSV"})]})}),e("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:t.length===0?e("div",{className:"text-center py-12 text-gray-500",children:"No traffic data available for this period"}):e("div",{children:[e("div",{className:"flex items-center gap-4 mb-4 text-xs text-gray-500",children:[e("div",{className:"flex items-center gap-1",children:[e("div",{className:"w-3 h-3 rounded bg-blue-500"}),e("span",{children:"Total Actions"})]}),e("div",{className:"flex items-center gap-1",children:[e("div",{className:"w-3 h-3 rounded bg-green-500"}),e("span",{children:"Unique Users"})]})]}),e("div",{className:"overflow-x-auto",children:e("div",{className:"flex items-end gap-1 min-w-fit",style:{height:"240px"},children:t.map((v,u)=>e("div",{className:"flex flex-col items-center gap-1 flex-1 min-w-[24px] max-w-[48px]",style:{height:"100%"},children:[e("div",{className:"flex-1 flex items-end gap-0.5 w-full",children:[e("div",{className:"flex-1 bg-blue-500 rounded-t opacity-80 hover:opacity-100 transition-opacity",style:{height:`${v.total_actions/i*100}%`,minHeight:"2px"},title:`${v.period_label}: ${v.total_actions.toLocaleString()} actions`}),e("div",{className:"flex-1 bg-green-500 rounded-t opacity-80 hover:opacity-100 transition-opacity",style:{height:`${v.unique_users/i*100}%`,minHeight:"2px"},title:`${v.period_label}: ${v.unique_users.toLocaleString()} users`})]}),e("span",{className:"text-[9px] text-gray-400 truncate w-full text-center",title:v.period_label,children:v.period_label.length>5?v.period_label.slice(-5):v.period_label})]},u))})}),e("details",{className:"mt-4",children:[e("summary",{className:"text-sm text-gray-500 cursor-pointer hover:text-gray-700",children:"Show data table"}),e("table",{className:"w-full text-sm mt-2",children:[e("thead",{children:e("tr",{className:"text-left text-gray-500 border-b border-gray-100",children:[e("th",{className:"pb-2 font-medium",children:"Period"}),e("th",{className:"pb-2 font-medium text-right",children:"Actions"}),e("th",{className:"pb-2 font-medium text-right",children:"Unique Users"})]})}),e("tbody",{children:t.map((v,u)=>e("tr",{className:"border-b border-gray-50",children:[e("td",{className:"py-2 text-gray-700",children:v.period_label}),e("td",{className:"py-2 text-right text-gray-800",children:v.total_actions.toLocaleString()}),e("td",{className:"py-2 text-right text-gray-800",children:v.unique_users.toLocaleString()})]},u))})]})]})]})})]})}function Sa(t,a){return new Promise((r,l)=>{te(["core/ajax"],o=>{o.call([{methodname:t,args:a}])[0].then(r).catch(l)})})}function Ca(t){return t?new Date(t*1e3).toLocaleString():"-"}function Rt(t){return new Date(t*1e3).toISOString().split("T")[0]}function Mt(t){return t?Math.floor(new Date(t).getTime()/1e3):0}function La(){const[t,a]=x([]),[r,l]=x(0),[o,n]=x(!0),[c,d]=x(0),[h]=x(10),[i,m]=x("access_time"),[s,g]=x("DESC"),p=Math.floor(Date.now()/1e3),[v,u]=x(p-7*86400),[f,y]=x(p),[S,N]=x(""),[_,A]=x(""),[z,U]=x(""),[G,F]=x("");O(()=>{C()},[c,i,s,v,f,S,_,z]);async function C(){try{n(!0);const k=await Sa("local_elby_dashboard_get_user_access_log",{date_from:v,date_to:f,school_code:S,courseid:0,user_type:_,search:z,sort:i,order:s,page:c,perpage:h});a(k.entries),l(k.total_count)}catch(k){console.error("Failed to load access log:",k)}finally{n(!1)}}function M(k){i===k?g(s==="ASC"?"DESC":"ASC"):(m(k),g("DESC")),d(0)}function w(){U(G),d(0)}function $(){const k=["User","SDMS ID","Type","School","School Code","Course","Action","Target","Time"],P=t.map(V=>[V.user_fullname,V.sdms_id,V.user_type,V.school_name,V.school_code,V.course_name,V.action,V.target,V.access_time?new Date(V.access_time*1e3).toISOString():""]),K=[k,...P].map(V=>V.map(ce=>`"${ce}"`).join(",")).join(`
`),X=new Blob([K],{type:"text/csv"}),J=URL.createObjectURL(X),ee=document.createElement("a");ee.href=J,ee.download="access_log.csv",ee.click(),URL.revokeObjectURL(J)}const W=Math.ceil(r/h),q=c*h+1,Z=Math.min((c+1)*h,r);function I({field:k}){return k!==i?e("svg",{className:"w-3 h-3 text-gray-400 ml-1 inline",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M7 10l5-5 5 5H7zm0 4l5 5 5-5H7z"})}):s==="ASC"?e("svg",{className:"w-3 h-3 text-blue-600 ml-1 inline",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M7 14l5-5 5 5H7z"})}):e("svg",{className:"w-3 h-3 text-blue-600 ml-1 inline",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M7 10l5 5 5-5H7z"})})}const B=(k,P)=>e("th",{className:"pb-3 font-medium cursor-pointer hover:text-gray-800 select-none whitespace-nowrap",onClick:()=>M(P),children:[k,e(I,{field:P})]});return e("div",{className:"p-4 lg:p-6",children:[e("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6",children:e("div",{className:"flex flex-wrap items-center gap-3",children:[e("div",{className:"flex-1 min-w-[200px] flex gap-2",children:[e("input",{type:"text",placeholder:"Search by name or SDMS ID...",className:"flex-1 px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:G,onInput:k=>F(k.target.value),onKeyDown:k=>{k.key==="Enter"&&w()}}),e("button",{onClick:w,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700",children:"Search"})]}),e("input",{type:"date",className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:Rt(v),onChange:k=>{u(Mt(k.target.value)),d(0)}}),e("span",{className:"text-gray-400 text-sm",children:"to"}),e("input",{type:"date",className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:Rt(f),onChange:k=>{y(Mt(k.target.value)+86399),d(0)}}),e("input",{type:"text",placeholder:"School code",className:"w-32 px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:S,onInput:k=>{N(k.target.value),d(0)}}),e("select",{className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:_,onChange:k=>{A(k.target.value),d(0)},children:[e("option",{value:"",children:"All Users"}),e("option",{value:"student",children:"Students"}),e("option",{value:"teacher",children:"Teachers"})]}),e("button",{onClick:$,className:"px-4 py-2 text-sm border border-gray-200 rounded-lg hover:bg-gray-50",children:"Export CSV"})]})}),e("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[e("div",{className:"overflow-x-auto",children:e("table",{className:"w-full text-sm",children:[e("thead",{children:e("tr",{className:"text-left text-gray-500 border-b border-gray-100",children:[B("Time","access_time"),B("User","user_fullname"),e("th",{className:"pb-3 font-medium",children:"SDMS ID"}),e("th",{className:"pb-3 font-medium",children:"Type"}),B("School","school_name"),B("Course","course_name"),e("th",{className:"pb-3 font-medium",children:"Action"}),e("th",{className:"pb-3 font-medium",children:"Target"})]})}),e("tbody",{children:o?Array.from({length:5}).map((k,P)=>e("tr",{className:"border-b border-gray-50",children:Array.from({length:8}).map((K,X)=>e("td",{className:"py-3 px-2",children:e("div",{className:"h-4 bg-gray-200 rounded animate-pulse"})},X))},P)):t.length===0?e("tr",{children:e("td",{colSpan:8,className:"py-12 text-center text-gray-500",children:"No access log entries found"})}):t.map((k,P)=>e("tr",{className:"border-b border-gray-50 hover:bg-gray-50",children:[e("td",{className:"py-3 px-2 text-gray-600 whitespace-nowrap",children:Ca(k.access_time)}),e("td",{className:"py-3 px-2 font-medium text-gray-800",children:k.user_fullname}),e("td",{className:"py-3 px-2 text-gray-600",children:k.sdms_id||"-"}),e("td",{className:"py-3 px-2",children:k.user_type?e("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${k.user_type==="teacher"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:k.user_type}):"-"}),e("td",{className:"py-3 px-2 text-gray-600",children:k.school_name||"-"}),e("td",{className:"py-3 px-2 text-gray-600",children:k.course_name||"-"}),e("td",{className:"py-3 px-2 text-gray-600",children:k.action}),e("td",{className:"py-3 px-2 text-gray-600",children:k.target})]},P))})]})}),r>0&&e("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-100",children:[e("span",{className:"text-sm text-gray-600",children:[q,"-",Z," of ",r.toLocaleString()]}),e("div",{className:"flex gap-2",children:[e("button",{onClick:()=>d(Math.max(0,c-1)),disabled:c===0,className:"px-3 py-1 text-sm border border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e("span",{className:"px-3 py-1 text-sm text-gray-600",children:["Page ",c+1," of ",W]}),e("button",{onClick:()=>d(Math.min(W-1,c+1)),disabled:c>=W-1,className:"px-3 py-1 text-sm border border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})}function se(t,a){return new Promise((r,l)=>{te(["core/ajax"],o=>{o.call([{methodname:t,args:a}])[0].then(r).catch(l)})})}function Ie(t){return t?new Date(t*1e3).toLocaleString():"Never"}function ie({label:t,value:a,icon:r,color:l}){return e("div",{className:`rounded-xl p-4 ${l}`,children:e("div",{className:"flex items-center gap-3",children:[e("div",{className:"w-10 h-10 rounded-full bg-white/40 flex items-center justify-center",children:r}),e("div",{children:[e("p",{className:"text-2xl font-bold text-gray-800",children:a}),e("p",{className:"text-xs text-gray-600",children:t})]})]})})}function $t({operation:t}){return e("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${{create:"bg-green-100 text-green-700",update:"bg-blue-100 text-blue-700",skip:"bg-gray-100 text-gray-700",error:"bg-red-100 text-red-700"}[t]||"bg-gray-100 text-gray-700"}`,children:t})}function za({onLinked:t}){const[a,r]=x(""),[l,o]=x([]),[n,c]=x(!1),[d,h]=x(0),[i,m]=x(null),[s,g]=x(""),[p,v]=x("student"),[u,f]=x(null),[y,S]=x(!1),[N,_]=x(!1),[A,z]=x(null),U=He(null);function G(w){if(r(w),m(null),f(null),z(null),U.current&&clearTimeout(U.current),w.trim().length<2){o([]),h(0);return}U.current=setTimeout(()=>F(w.trim()),400)}async function F(w){c(!0);try{const $=await se("local_elby_dashboard_search_unlinked_users",{search:w,page:0,perpage:20});o($.users||[]),h($.total_count||0)}catch{o([])}finally{c(!1)}}async function C(){if(s.trim()){S(!0),f(null),z(null);try{const w=await se("local_elby_dashboard_lookup_sdms_user",{sdms_code:s.trim(),user_type:p});if(!w.success){z({type:"error",message:w.error||"Not found in SDMS"});return}const $=w.student_data?.names||"";f({sdms_id:w.sdms_id,status:w.status||"",academic_year:w.academic_year||"",school_name:w.school?.school_name||"",student_name:$,program:w.student_data?.program||"",position:w.staff_data?.position||"",user_type:p})}catch(w){z({type:"error",message:w?.message||"Lookup failed"})}finally{S(!1)}}}async function M(){if(!(!i||!s.trim())){_(!0),z(null);try{const w=await se("local_elby_dashboard_link_user",{userid:i.userid,sdms_code:s.trim(),user_type:p});w.success?(z({type:"success",message:`Successfully linked ${i.fullname} to ${s}`}),m(null),g(""),f(null),o($=>$.filter(W=>W.userid!==i.userid)),t()):z({type:"error",message:w.error||"Link failed"})}catch(w){z({type:"error",message:w?.message||"Link failed"})}finally{_(!1)}}}return e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Link User to SDMS"}),A&&e("div",{className:`mb-4 px-4 py-3 rounded-lg text-sm ${A.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:[A.message,e("button",{onClick:()=>z(null),className:"float-right text-lg leading-none opacity-60 hover:opacity-100",children:""})]}),e("div",{className:"mb-4",children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Unlinked Users"}),e("input",{type:"text",value:a,onInput:w=>G(w.target.value),placeholder:"Search by name, username, or email...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n&&e("p",{className:"text-xs text-gray-400 mt-1",children:"Searching..."}),!n&&d>0&&e("p",{className:"text-xs text-gray-500 mt-1",children:[d," unlinked user",d!==1?"s":""," found"]})]}),l.length>0&&!i&&e("div",{className:"mb-4 max-h-48 overflow-y-auto border border-gray-200 rounded-lg",children:l.map(w=>e("button",{onClick:()=>{m(w),g(""),f(null),z(null)},className:"w-full text-left px-4 py-2 hover:bg-gray-50 border-b border-gray-100 last:border-b-0 transition-colors",children:[e("p",{className:"text-sm font-medium text-gray-800",children:w.fullname}),e("p",{className:"text-xs text-gray-500",children:[w.username,"  ",w.email]})]},w.userid))}),i&&e("div",{className:"border border-blue-200 bg-blue-50 rounded-lg p-4 mb-4",children:[e("div",{className:"flex items-center justify-between mb-3",children:[e("div",{children:[e("p",{className:"text-sm font-semibold text-gray-800",children:i.fullname}),e("p",{className:"text-xs text-gray-500",children:[i.username,"  ",i.email]})]}),e("button",{onClick:()=>{m(null),f(null)},className:"text-gray-400 hover:text-gray-600 text-lg",children:""})]}),e("div",{className:"flex gap-2 mb-3",children:[e("input",{type:"text",value:s,onInput:w=>g(w.target.value),placeholder:"Enter SDMS code...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e("select",{value:p,onChange:w=>v(w.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e("option",{value:"student",children:"Student"}),e("option",{value:"staff",children:"Staff"})]}),e("button",{onClick:C,disabled:y||!s.trim(),className:"px-4 py-2 bg-gray-600 text-white rounded-lg text-sm hover:bg-gray-700 disabled:opacity-50",children:y?"...":"Lookup"})]}),u&&e("div",{className:"bg-white rounded-lg p-3 mb-3 border border-gray-200",children:[e("p",{className:"text-sm font-medium text-gray-800 mb-1",children:"SDMS Preview"}),e("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[e("span",{className:"text-gray-500",children:"SDMS ID:"}),e("span",{className:"text-gray-800",children:u.sdms_id}),u.student_name&&e(E,{children:[e("span",{className:"text-gray-500",children:"Name:"}),e("span",{className:"text-gray-800",children:u.student_name})]}),e("span",{className:"text-gray-500",children:"School:"}),e("span",{className:"text-gray-800",children:u.school_name||"-"}),e("span",{className:"text-gray-500",children:"Status:"}),e("span",{className:"text-gray-800",children:u.status||"-"}),u.program&&e(E,{children:[e("span",{className:"text-gray-500",children:"Program:"}),e("span",{className:"text-gray-800",children:u.program})]}),u.position&&e(E,{children:[e("span",{className:"text-gray-500",children:"Position:"}),e("span",{className:"text-gray-800",children:u.position})]})]})]}),u&&e("button",{onClick:M,disabled:N,className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg text-sm hover:bg-green-700 disabled:opacity-50",children:N?"Linking...":`Link ${i.fullname} to ${s}`})]})]})}function Ra(){const[t,a]=x([]),[r,l]=x(null),[o,n]=x(!0),[c,d]=x("all");O(()=>{h()},[]);async function h(){try{n(!0);const s=await se("local_elby_dashboard_get_enrollment_coverage",{});a(s.entries||[]),l(s.summary||null)}catch(s){console.error("Failed to load enrollment coverage:",s)}finally{n(!1)}}const i=c==="all"?t:t.filter(s=>s.coverage_status===c),m={mapped:"bg-green-100 text-green-700",unmapped:"bg-red-100 text-red-700",partial:"bg-yellow-100 text-yellow-700"};return e("div",{className:"bg-white rounded-xl p-6 shadow-sm mb-6",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Enrollment Coverage"}),o?e("div",{className:"animate-pulse space-y-3",children:[e("div",{className:"h-6 bg-gray-200 rounded w-64"}),e("div",{className:"h-48 bg-gray-200 rounded"})]}):e(E,{children:[r&&e("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-3 mb-4",children:[e("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[e("p",{className:"text-lg font-bold text-gray-800",children:r.total_combos}),e("p",{className:"text-xs text-gray-500",children:"Total Combos"})]}),e("div",{className:"bg-green-50 rounded-lg p-3 text-center",children:[e("p",{className:"text-lg font-bold text-green-700",children:r.mapped_combos}),e("p",{className:"text-xs text-gray-500",children:"Mapped"})]}),e("div",{className:"bg-red-50 rounded-lg p-3 text-center",children:[e("p",{className:"text-lg font-bold text-red-700",children:r.unmapped_combos}),e("p",{className:"text-xs text-gray-500",children:"Unmapped"})]}),e("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[e("p",{className:"text-lg font-bold text-blue-700",children:r.total_sdms_students.toLocaleString()}),e("p",{className:"text-xs text-gray-500",children:"SDMS Students"})]}),e("div",{className:"bg-cyan-50 rounded-lg p-3 text-center",children:[e("p",{className:"text-lg font-bold text-cyan-700",children:r.total_enrolled_students.toLocaleString()}),e("p",{className:"text-xs text-gray-500",children:"Enrolled"})]})]}),e("div",{className:"flex gap-2 mb-4",children:["all","mapped","unmapped","partial"].map(s=>e("button",{onClick:()=>d(s),className:`px-3 py-1.5 text-xs rounded-full transition-colors ${c===s?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[s.charAt(0).toUpperCase()+s.slice(1)," (",s==="all"?t.length:t.filter(g=>g.coverage_status===s).length,")"]},s))}),i.length===0?e("div",{className:"text-center text-gray-400 py-6 text-sm",children:"No entries found"}):e("div",{className:"overflow-x-auto max-h-96 overflow-y-auto",children:e("table",{className:"w-full text-xs",children:[e("thead",{className:"sticky top-0 bg-white",children:e("tr",{className:"text-left text-gray-500 border-b border-gray-200",children:[e("th",{className:"pb-2 font-medium",children:"Trade"}),e("th",{className:"pb-2 font-medium",children:"Level"}),e("th",{className:"pb-2 font-medium text-right",children:"SDMS Students"}),e("th",{className:"pb-2 font-medium",children:"Category"}),e("th",{className:"pb-2 font-medium text-right",children:"Courses"}),e("th",{className:"pb-2 font-medium text-right",children:"Enrolled"}),e("th",{className:"pb-2 font-medium",children:"Status"})]})}),e("tbody",{children:i.map((s,g)=>e("tr",{className:`border-b border-gray-50 ${s.coverage_status==="unmapped"?"bg-red-50/50":""}`,children:[e("td",{className:"py-2 text-gray-800",children:s.combination_name}),e("td",{className:"py-2 text-gray-600",children:s.level_name}),e("td",{className:"py-2 text-gray-600 text-right",children:s.sdms_student_count}),e("td",{className:"py-2 text-gray-600 truncate max-w-[120px]",children:s.category_name||"-"}),e("td",{className:"py-2 text-gray-600 text-right",children:s.course_count}),e("td",{className:"py-2 text-gray-600 text-right",children:s.enrolled_student_count}),e("td",{className:"py-2",children:e("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${m[s.coverage_status]||"bg-gray-100 text-gray-700"}`,children:s.coverage_status})})]},g))})]})})]})]})}function Ma(){const[t,a]=x([]),[r,l]=x(null),[o,n]=x(0),[c,d]=x(0),[h,i]=x(!0),[m,s]=x(""),g=25;O(()=>{p()},[c,m]);async function p(){try{i(!0);const u=await se("local_elby_dashboard_get_enrollment_logs",{page:c,perpage:g,operation:m});a(u.logs||[]),n(u.total_count||0),l(u.summary||null)}catch(u){console.error("Failed to load enrollment logs:",u)}finally{i(!1)}}const v=Math.ceil(o/g);return e("div",{className:"bg-white rounded-xl p-6 shadow-sm mb-6",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Auto-enrollment Logs"}),h&&!r?e("div",{className:"animate-pulse space-y-3",children:[e("div",{className:"h-6 bg-gray-200 rounded w-64"}),e("div",{className:"h-48 bg-gray-200 rounded"})]}):e(E,{children:[r&&e("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[e("div",{className:"bg-green-50 rounded-lg p-3 text-center",children:[e("p",{className:"text-lg font-bold text-green-700",children:r.total_enrollments.toLocaleString()}),e("p",{className:"text-xs text-gray-500",children:"Auto-enrollments"})]}),e("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[e("p",{className:"text-lg font-bold text-gray-700",children:r.total_skips.toLocaleString()}),e("p",{className:"text-xs text-gray-500",children:"Skipped"})]}),e("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[e("p",{className:"text-lg font-bold text-blue-700",children:r.last_enrollment_time?Ie(r.last_enrollment_time):"Never"}),e("p",{className:"text-xs text-gray-500",children:"Last Enrollment"})]})]}),e("div",{className:"flex gap-2 mb-4",children:[{value:"",label:"All"},{value:"create",label:"Enrolled"},{value:"skip",label:"Skipped"}].map(u=>e("button",{onClick:()=>{s(u.value),d(0)},className:`px-3 py-1.5 text-xs rounded-full transition-colors ${m===u.value?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:u.label},u.value))}),t.length===0?e("div",{className:"text-center text-gray-400 py-6 text-sm",children:"No enrollment logs found"}):e("div",{className:"overflow-x-auto max-h-80 overflow-y-auto",children:e("table",{className:"w-full text-xs",children:[e("thead",{className:"sticky top-0 bg-white",children:e("tr",{className:"text-left text-gray-500 border-b border-gray-200",children:[e("th",{className:"pb-2 font-medium",children:"Time"}),e("th",{className:"pb-2 font-medium",children:"Student"}),e("th",{className:"pb-2 font-medium",children:"Trade:Level"}),e("th",{className:"pb-2 font-medium",children:"Status"}),e("th",{className:"pb-2 font-medium",children:"Details"})]})}),e("tbody",{children:t.map(u=>e("tr",{className:"border-b border-gray-50",children:[e("td",{className:"py-2 text-gray-500 whitespace-nowrap",children:Ie(u.timecreated)}),e("td",{className:"py-2 text-gray-800",children:u.user_fullname}),e("td",{className:"py-2 text-gray-600",children:u.entity_id||"-"}),e("td",{className:"py-2",children:e($t,{operation:u.operation})}),e("td",{className:"py-2 text-gray-500 truncate max-w-[200px]",children:u.details||"-"})]},u.id))})]})}),v>1&&e("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-gray-100",children:[e("p",{className:"text-xs text-gray-500",children:["Showing ",c*g+1,"-",Math.min((c+1)*g,o)," of ",o]}),e("div",{className:"flex gap-2",children:[e("button",{onClick:()=>d(u=>Math.max(0,u-1)),disabled:c===0,className:"px-3 py-1.5 text-xs bg-gray-100 rounded hover:bg-gray-200 disabled:opacity-50",children:"Previous"}),e("button",{onClick:()=>d(u=>Math.min(v-1,u+1)),disabled:c>=v-1,className:"px-3 py-1.5 text-xs bg-gray-100 rounded hover:bg-gray-200 disabled:opacity-50",children:"Next"})]})]})]})]})}function $a(){const[t,a]=x(null),[r,l]=x([]),[o,n]=x(!0),[c,d]=x(null),[h,i]=x(null);O(()=>{m()},[]);async function m(){try{n(!0);const p=document.getElementById("elby-dashboard-root")?.getAttribute("data-admin");if(p)try{const v=JSON.parse(p);a(v.stats),l(v.logs||[])}catch(v){console.error("Failed to parse admin data:",v)}}finally{n(!1)}}async function s(g){d(g),i(null);try{const v={user_metrics:"compute_user_metrics",school_metrics:"aggregate_school_metrics",sdms_cache:"refresh_sdms_cache"}[g];if(!v)return;const u=await se("local_elby_dashboard_trigger_task",{task_name:v});u.success?(i({type:"success",message:u.message}),m()):i({type:"error",message:u.message})}catch(p){i({type:"error",message:p?.message||"Failed to run task"})}finally{d(null)}}return o?e("div",{className:"p-6 animate-pulse space-y-4",children:[e("div",{className:"h-8 bg-gray-200 rounded w-48"}),e("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(g=>e("div",{className:"h-20 bg-gray-200 rounded-xl"},g))})]}):e("div",{className:"p-4 lg:p-6",children:[t&&e("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[e(ie,{label:"Linked Users",value:t.linked_users,color:"bg-cyan-50",icon:e("svg",{className:"w-5 h-5 text-cyan-600",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5z"})})}),e(ie,{label:"Stale Records",value:t.stale_users,color:"bg-yellow-50",icon:e("svg",{className:"w-5 h-5 text-yellow-600",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"})})}),e(ie,{label:"Sync Errors",value:t.error_users,color:"bg-red-50",icon:e("svg",{className:"w-5 h-5 text-red-500",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})})}),e(ie,{label:"Schools",value:t.total_schools,color:"bg-blue-50",icon:e("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3z"})})}),e(ie,{label:"User Metrics",value:t.user_metrics_count.toLocaleString(),color:"bg-green-50",icon:e("svg",{className:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"})})}),e(ie,{label:"School Metrics",value:t.school_metrics_count.toLocaleString(),color:"bg-purple-50",icon:e("svg",{className:"w-5 h-5 text-purple-600",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"})})})]}),h&&e("div",{className:`mb-4 px-4 py-3 rounded-lg text-sm ${h.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:[h.message,e("button",{onClick:()=>i(null),className:"float-right text-lg leading-none opacity-60 hover:opacity-100",children:""})]}),e("div",{className:"mb-6",children:e(za,{onLinked:m})}),e(Ra,{}),e(Ma,{}),e("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Manual Sync Triggers"}),e("p",{className:"text-sm text-gray-500 mb-4",children:"Run scheduled tasks manually from Site Admin > Server > Scheduled Tasks, or use the buttons below."}),e("div",{className:"space-y-3",children:[e("button",{onClick:()=>s("user_metrics"),disabled:c!==null,className:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors disabled:opacity-50",children:[e("div",{children:[e("p",{className:"text-sm font-medium text-gray-800",children:"Compute User Metrics"}),e("p",{className:"text-xs text-gray-500",children:"Hourly task - aggregates logstore data"})]}),c==="user_metrics"&&e("div",{className:"w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})]}),e("button",{onClick:()=>s("school_metrics"),disabled:c!==null,className:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors disabled:opacity-50",children:[e("div",{children:[e("p",{className:"text-sm font-medium text-gray-800",children:"Aggregate School Metrics"}),e("p",{className:"text-xs text-gray-500",children:"Daily task - rolls up to school level"})]}),c==="school_metrics"&&e("div",{className:"w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})]}),e("button",{onClick:()=>s("sdms_cache"),disabled:c!==null,className:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors disabled:opacity-50",children:[e("div",{children:[e("p",{className:"text-sm font-medium text-gray-800",children:"Refresh SDMS Cache"}),e("p",{className:"text-xs text-gray-500",children:"Daily task - refreshes stale SDMS records"})]}),c==="sdms_cache"&&e("div",{className:"w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})]})]})]}),e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Recent Sync Logs"}),r.length===0?e("div",{className:"text-center text-gray-400 py-8",children:e("p",{children:"No sync logs found"})}):e("div",{className:"overflow-x-auto max-h-80 overflow-y-auto",children:e("table",{className:"w-full text-xs",children:[e("thead",{className:"sticky top-0 bg-white",children:e("tr",{className:"text-left text-gray-500 border-b border-gray-100",children:[e("th",{className:"pb-2 font-medium",children:"Type"}),e("th",{className:"pb-2 font-medium",children:"Entity"}),e("th",{className:"pb-2 font-medium",children:"Op"}),e("th",{className:"pb-2 font-medium",children:"Time"})]})}),e("tbody",{children:r.map(g=>e("tr",{className:"border-b border-gray-50",children:[e("td",{className:"py-2 text-gray-600",children:g.sync_type}),e("td",{className:"py-2 text-gray-600 truncate max-w-[80px]",children:g.entity_id||"-"}),e("td",{className:"py-2",children:e($t,{operation:g.operation})}),e("td",{className:"py-2 text-gray-500",children:Ie(g.timecreated)})]},g.id))})]})})]})]})]})}function Aa({user:t,activePage:a,themeConfig:r,onMenuClick:l}){const n={home:"Dashboard",completion:"Completion Report",courses:"Courses Report",schools:"Schools Directory",school_detail:"School Detail",students:"Student List",teachers:"Teacher List",traffic:"Platform Traffic",accesslog:"Access Log",admin:"Admin Panel"}[a]||"Dashboard";return e("header",{className:"bg-white border-b border-gray-100 px-2 sm:px-4 lg:px-6 py-3 sm:py-4",children:e("div",{className:"flex items-center justify-between",children:[e("div",{className:"flex items-center gap-3",children:[e("button",{onClick:l,className:"lg:hidden p-2 -ml-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg","aria-label":"Toggle menu",children:e("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})}),e("h1",{className:"text-xl font-semibold text-gray-800",children:n})]}),e("div",{className:"flex items-center gap-4 lg:gap-6",children:[r.showNotifications&&e("button",{className:"relative text-gray-500 hover:text-gray-700",children:[e("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),e("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),e("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full"})]}),r.showUserProfile&&e("div",{className:"flex items-center gap-3",children:[e("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center text-white font-semibold text-sm overflow-hidden",children:t.avatar?e("img",{src:t.avatar,alt:t.fullname,className:"w-full h-full object-cover"}):e("span",{children:[t.firstname.charAt(0),t.lastname.charAt(0)]})}),e("div",{className:"hidden sm:block",children:[e("p",{className:"text-sm font-semibold text-gray-800",children:t.fullname}),e("p",{className:"text-xs text-gray-500",children:t.isAdmin?"Admin":t.roles.includes("teacher")?"Teacher":"User"})]})]})]})]})})}function Ta({user:t,stats:a,activePage:r,sidenavConfig:l,themeConfig:o,coursesReportData:n,schoolCode:c}){const[d,h]=x(!1);return e("div",{className:"flex h-screen bg-gray-50",children:[e(Zt,{activePage:r,sidenavConfig:l,themeConfig:o,isOpen:d,onClose:()=>h(!1)}),e("div",{className:"flex-1 flex flex-col min-h-0",children:[e(Aa,{user:t,activePage:r,themeConfig:o,onMenuClick:()=>h(!d)}),e("main",{className:"flex-1 overflow-y-auto",children:[r==="home"&&e(Jt,{user:t,stats:a,themeConfig:o}),r==="completion"&&e(ea,{}),r==="courses"&&n&&e(da,{data:n,themeConfig:o}),r==="schools"&&e(ga,{}),r==="school_detail"&&c&&e(ba,{schoolCode:c}),r==="students"&&e(zt,{initialSchoolCode:c}),r==="teachers"&&e(zt,{userType:"teacher",user:t,initialSchoolCode:c}),r==="traffic"&&e(ka,{}),r==="accesslog"&&e(La,{}),r==="admin"&&e($a,{})]})]})]})}const Da=(t="#elby-dashboard-root")=>{const a=document.querySelector(t);if(!a){console.error(`Container not found: ${t}`);return}try{const r=a.getAttribute("data-user"),l=a.getAttribute("data-stats"),o=a.getAttribute("data-sidenav"),n=a.getAttribute("data-theme"),c=a.getAttribute("data-courses-report"),d=a.getAttribute("data-page"),h=r?JSON.parse(r):{id:0,fullname:"Guest",firstname:"Guest",lastname:"",email:"",avatar:"",roles:[]},i=l?JSON.parse(l):{totalCourses:0,totalUsers:0,totalEnrollments:0,totalActivities:0},m=o?JSON.parse(o):{title:"Dashboard",logoUrl:null},s=n?JSON.parse(n):{sidenavAccentColor:"#005198",statCard1Color:"#cffafe",statCard2Color:"#fef3c7",statCard3Color:"#f3e8ff",statCard4Color:"#dcfce7",chartPrimaryColor:"#22d3ee",chartSecondaryColor:"#a78bfa",showSearchBar:!0,showNotifications:!0,showUserProfile:!0,menuVisibility:{courses:!0,presence:!0,communication:!0,event:!0,pedagogy:!0,message:!0,completion:!0,settings:!0}},g=c?JSON.parse(c):null,p=a.getAttribute("data-school-code")||void 0,v=d||"home";console.log("Elby Dashboard initialized:",{user:h.fullname,activePage:v}),Ut(Je(Ta,{user:h,stats:i,activePage:v,sidenavConfig:m,themeConfig:s,coursesReportData:g,schoolCode:p}),a)}catch(r){console.error("Error initializing Elby Dashboard:",r)}};Be.init=Da,Object.defineProperty(Be,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=dashboard.js.map

define(["require","exports"],(function(X,He){"use strict";var Ue=document.createElement("style");Ue.textContent=`@layer properties{@supports ((-webkit-hyphens:none) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-translate-x:0;--tw-translate-y:0;--tw-translate-z:0;--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-space-y-reverse:0;--tw-border-style:solid;--tw-gradient-position:initial;--tw-gradient-from:#0000;--tw-gradient-via:#0000;--tw-gradient-to:#0000;--tw-gradient-stops:initial;--tw-gradient-via-stops:initial;--tw-gradient-from-position:0%;--tw-gradient-via-position:50%;--tw-gradient-to-position:100%;--tw-leading:initial;--tw-font-weight:initial;--tw-tracking:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000;--tw-blur:initial;--tw-brightness:initial;--tw-contrast:initial;--tw-grayscale:initial;--tw-hue-rotate:initial;--tw-invert:initial;--tw-opacity:initial;--tw-saturate:initial;--tw-sepia:initial;--tw-drop-shadow:initial;--tw-drop-shadow-color:initial;--tw-drop-shadow-alpha:100%;--tw-drop-shadow-size:initial;--tw-duration:initial;--tw-ease:initial;--tw-scale-x:1;--tw-scale-y:1;--tw-scale-z:1}}}@layer theme{:root,:host{--font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--color-red-50:oklch(97.1% .013 17.38);--color-red-100:oklch(93.6% .032 17.717);--color-red-200:oklch(88.5% .062 18.334);--color-red-500:oklch(63.7% .237 25.331);--color-red-700:oklch(50.5% .213 27.518);--color-red-800:oklch(44.4% .177 26.899);--color-orange-400:oklch(75% .183 55.934);--color-orange-500:oklch(70.5% .213 47.604);--color-amber-50:oklch(98.7% .022 95.277);--color-amber-100:oklch(96.2% .059 95.617);--color-amber-400:oklch(82.8% .189 84.429);--color-amber-500:oklch(76.9% .188 70.08);--color-amber-600:oklch(66.6% .179 58.318);--color-amber-700:oklch(55.5% .163 48.998);--color-yellow-50:oklch(98.7% .026 102.212);--color-yellow-400:oklch(85.2% .199 91.936);--color-yellow-600:oklch(68.1% .162 75.834);--color-green-50:oklch(98.2% .018 155.826);--color-green-100:oklch(96.2% .044 156.743);--color-green-200:oklch(92.5% .084 155.995);--color-green-500:oklch(72.3% .219 149.579);--color-green-600:oklch(62.7% .194 149.214);--color-green-700:oklch(52.7% .154 150.069);--color-green-800:oklch(44.8% .119 151.328);--color-emerald-50:oklch(97.9% .021 166.113);--color-emerald-700:oklch(50.8% .118 165.612);--color-teal-500:oklch(70.4% .14 182.503);--color-cyan-50:oklch(98.4% .019 200.873);--color-cyan-100:oklch(95.6% .045 203.388);--color-cyan-400:oklch(78.9% .154 211.53);--color-cyan-500:oklch(71.5% .143 215.221);--color-cyan-600:oklch(60.9% .126 221.723);--color-sky-50:oklch(97.7% .013 236.62);--color-blue-50:oklch(97% .014 254.604);--color-blue-100:oklch(93.2% .032 255.585);--color-blue-200:oklch(88.2% .059 254.128);--color-blue-500:oklch(62.3% .214 259.815);--color-blue-600:oklch(54.6% .245 262.881);--color-blue-700:oklch(48.8% .243 264.376);--color-blue-800:oklch(42.4% .199 265.638);--color-indigo-500:oklch(58.5% .233 277.117);--color-indigo-600:oklch(51.1% .262 276.966);--color-violet-500:oklch(60.6% .25 292.717);--color-purple-50:oklch(97.7% .014 308.299);--color-purple-100:oklch(94.6% .033 307.174);--color-purple-300:oklch(82.7% .119 306.383);--color-purple-400:oklch(71.4% .203 305.504);--color-purple-500:oklch(62.7% .265 303.9);--color-purple-600:oklch(55.8% .288 302.321);--color-purple-700:oklch(49.6% .265 301.924);--color-fuchsia-300:oklch(83.3% .145 321.434);--color-pink-400:oklch(71.8% .202 349.761);--color-pink-500:oklch(65.6% .241 354.308);--color-gray-50:oklch(98.5% .002 247.839);--color-gray-100:oklch(96.7% .003 264.542);--color-gray-200:oklch(92.8% .006 264.531);--color-gray-300:oklch(87.2% .01 258.338);--color-gray-400:oklch(70.7% .022 261.325);--color-gray-500:oklch(55.1% .027 264.364);--color-gray-600:oklch(44.6% .03 256.802);--color-gray-700:oklch(37.3% .034 259.733);--color-gray-800:oklch(27.8% .033 256.848);--color-gray-900:oklch(21% .034 264.665);--color-black:#000;--color-white:#fff;--spacing:.25rem;--container-md:28rem;--container-7xl:80rem;--text-xs:.75rem;--text-xs--line-height:calc(1/.75);--text-sm:.875rem;--text-sm--line-height:calc(1.25/.875);--text-lg:1.125rem;--text-lg--line-height:calc(1.75/1.125);--text-xl:1.25rem;--text-xl--line-height:calc(1.75/1.25);--text-2xl:1.5rem;--text-2xl--line-height:calc(2/1.5);--text-3xl:1.875rem;--text-3xl--line-height: 1.2 ;--text-4xl:2.25rem;--text-4xl--line-height:calc(2.5/2.25);--font-weight-normal:400;--font-weight-medium:500;--font-weight-semibold:600;--font-weight-bold:700;--tracking-wider:.05em;--leading-tight:1.25;--radius-sm:.25rem;--radius-md:.375rem;--radius-lg:.5rem;--radius-xl:.75rem;--ease-in-out:cubic-bezier(.4,0,.2,1);--animate-spin:spin 1s linear infinite;--animate-pulse:pulse 2s cubic-bezier(.4,0,.6,1)infinite;--default-transition-duration:.15s;--default-transition-timing-function:cubic-bezier(.4,0,.2,1);--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono);--color-rtb-blue:#005198}}@layer base{*,:after,:before,::backdrop{box-sizing:border-box;border:0 solid;margin:0;padding:0}::file-selector-button{box-sizing:border-box;border:0 solid;margin:0;padding:0}html,:host{-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;line-height:1.5;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::-moz-placeholder{opacity:1}::placeholder{opacity:1}@supports (not (-webkit-appearance:-apple-pay-button)) or (contain-intrinsic-size:1px){::-moz-placeholder{color:currentColor}::placeholder{color:currentColor}@supports (color:color-mix(in lab,red,red)){::-moz-placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit{padding-block:0}::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-month-field{padding-block:0}::-webkit-datetime-edit-day-field{padding-block:0}::-webkit-datetime-edit-hour-field{padding-block:0}::-webkit-datetime-edit-minute-field{padding-block:0}::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-millisecond-field{padding-block:0}::-webkit-datetime-edit-meridiem-field{padding-block:0}::-webkit-calendar-picker-indicator{line-height:1}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){-webkit-appearance:button;-moz-appearance:button;appearance:button}::file-selector-button{-webkit-appearance:button;-moz-appearance:button;appearance:button}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}}@layer components;@layer utilities{.visible{visibility:visible}.sr-only{clip-path:inset(50%);white-space:nowrap;border-width:0;width:1px;height:1px;margin:-1px;padding:0;position:absolute;overflow:hidden}.absolute{position:absolute}.fixed{position:fixed}.relative{position:relative}.static{position:static}.sticky{position:sticky}.inset-0{inset:calc(var(--spacing)*0)}.inset-y-0{inset-block:calc(var(--spacing)*0)}.-top-1{top:calc(var(--spacing)*-1)}.-top-8{top:calc(var(--spacing)*-8)}.top-0{top:calc(var(--spacing)*0)}.top-1{top:calc(var(--spacing)*1)}.top-1\\/2{top:50%}.top-4{top:calc(var(--spacing)*4)}.-right-1{right:calc(var(--spacing)*-1)}.right-20{right:calc(var(--spacing)*20)}.bottom-0{bottom:calc(var(--spacing)*0)}.bottom-\\[-24px\\]{bottom:-24px}.-left-6{left:calc(var(--spacing)*-6)}.left-0{left:calc(var(--spacing)*0)}.left-1{left:calc(var(--spacing)*1)}.left-1\\/2{left:50%}.left-3{left:calc(var(--spacing)*3)}.left-8{left:calc(var(--spacing)*8)}.left-\\[232px\\]{left:232px}.z-10{z-index:10}.z-20{z-index:20}.z-30{z-index:30}.z-40{z-index:40}.z-50{z-index:50}.col-6{grid-column:6}.float-right{float:right}.container{width:100%}@media(min-width:40rem){.container{max-width:40rem}}@media(min-width:48rem){.container{max-width:48rem}}@media(min-width:64rem){.container{max-width:64rem}}@media(min-width:80rem){.container{max-width:80rem}}@media(min-width:96rem){.container{max-width:96rem}}.m-0{margin:calc(var(--spacing)*0)}.mx-auto{margin-inline:auto}.me-1{margin-inline-end:calc(var(--spacing)*1)}.me-2{margin-inline-end:calc(var(--spacing)*2)}.me-3{margin-inline-end:calc(var(--spacing)*3)}.-mt-2{margin-top:calc(var(--spacing)*-2)}.mt-1{margin-top:calc(var(--spacing)*1)}.mt-2{margin-top:calc(var(--spacing)*2)}.mt-3{margin-top:calc(var(--spacing)*3)}.mt-4{margin-top:calc(var(--spacing)*4)}.mt-6{margin-top:calc(var(--spacing)*6)}.mt-auto{margin-top:auto}.mr-1{margin-right:calc(var(--spacing)*1)}.mr-2{margin-right:calc(var(--spacing)*2)}.mr-3{margin-right:calc(var(--spacing)*3)}.mr-32{margin-right:calc(var(--spacing)*32)}.mb-0{margin-bottom:calc(var(--spacing)*0)}.mb-1{margin-bottom:calc(var(--spacing)*1)}.mb-2{margin-bottom:calc(var(--spacing)*2)}.mb-3{margin-bottom:calc(var(--spacing)*3)}.mb-4{margin-bottom:calc(var(--spacing)*4)}.mb-5{margin-bottom:calc(var(--spacing)*5)}.mb-6{margin-bottom:calc(var(--spacing)*6)}.mb-8{margin-bottom:calc(var(--spacing)*8)}.-ml-2{margin-left:calc(var(--spacing)*-2)}.ml-1{margin-left:calc(var(--spacing)*1)}.ml-2{margin-left:calc(var(--spacing)*2)}.ml-4{margin-left:calc(var(--spacing)*4)}.ml-6{margin-left:calc(var(--spacing)*6)}.ml-8{margin-left:calc(var(--spacing)*8)}.ml-10{margin-left:calc(var(--spacing)*10)}.ml-auto{margin-left:auto}.block{display:block}.flex{display:flex}.grid{display:grid}.hidden{display:none}.inline{display:inline}.inline-block{display:inline-block}.inline-flex{display:inline-flex}.table{display:table}.h-0{height:calc(var(--spacing)*0)}.h-0\\.5{height:calc(var(--spacing)*.5)}.h-1{height:calc(var(--spacing)*1)}.h-1\\.5{height:calc(var(--spacing)*1.5)}.h-2{height:calc(var(--spacing)*2)}.h-2\\.5{height:calc(var(--spacing)*2.5)}.h-3{height:calc(var(--spacing)*3)}.h-3\\.5{height:calc(var(--spacing)*3.5)}.h-4{height:calc(var(--spacing)*4)}.h-5{height:calc(var(--spacing)*5)}.h-6{height:calc(var(--spacing)*6)}.h-7{height:calc(var(--spacing)*7)}.h-8{height:calc(var(--spacing)*8)}.h-10{height:calc(var(--spacing)*10)}.h-12{height:calc(var(--spacing)*12)}.h-16{height:calc(var(--spacing)*16)}.h-20{height:calc(var(--spacing)*20)}.h-24{height:calc(var(--spacing)*24)}.h-28{height:calc(var(--spacing)*28)}.h-32{height:calc(var(--spacing)*32)}.h-36{height:calc(var(--spacing)*36)}.h-40{height:calc(var(--spacing)*40)}.h-48{height:calc(var(--spacing)*48)}.h-64{height:calc(var(--spacing)*64)}.h-full{height:100%}.h-screen{height:100vh}.max-h-48{max-height:calc(var(--spacing)*48)}.max-h-60{max-height:calc(var(--spacing)*60)}.max-h-80{max-height:calc(var(--spacing)*80)}.max-h-\\[600px\\]{max-height:600px}.min-h-0{min-height:calc(var(--spacing)*0)}.min-h-screen{min-height:100vh}.w-1{width:calc(var(--spacing)*1)}.w-1\\.5{width:calc(var(--spacing)*1.5)}.w-2{width:calc(var(--spacing)*2)}.w-2\\.5{width:calc(var(--spacing)*2.5)}.w-3{width:calc(var(--spacing)*3)}.w-3\\.5{width:calc(var(--spacing)*3.5)}.w-4{width:calc(var(--spacing)*4)}.w-5{width:calc(var(--spacing)*5)}.w-6{width:calc(var(--spacing)*6)}.w-8{width:calc(var(--spacing)*8)}.w-10{width:calc(var(--spacing)*10)}.w-12{width:calc(var(--spacing)*12)}.w-14{width:calc(var(--spacing)*14)}.w-16{width:calc(var(--spacing)*16)}.w-20{width:calc(var(--spacing)*20)}.w-24{width:calc(var(--spacing)*24)}.w-28{width:calc(var(--spacing)*28)}.w-32{width:calc(var(--spacing)*32)}.w-36{width:calc(var(--spacing)*36)}.w-40{width:calc(var(--spacing)*40)}.w-48{width:calc(var(--spacing)*48)}.w-56{width:calc(var(--spacing)*56)}.w-64{width:calc(var(--spacing)*64)}.w-72{width:calc(var(--spacing)*72)}.w-100{width:calc(var(--spacing)*100)}.w-full{width:100%}.max-w-7xl{max-width:var(--container-7xl)}.max-w-\\[2\\.5rem\\]{max-width:2.5rem}.max-w-\\[48px\\]{max-width:48px}.max-w-\\[80px\\]{max-width:80px}.max-w-\\[140px\\]{max-width:140px}.max-w-md{max-width:var(--container-md)}.min-w-\\[24px\\]{min-width:24px}.min-w-\\[50px\\]{min-width:50px}.min-w-\\[140px\\]{min-width:140px}.min-w-\\[200px\\]{min-width:200px}.min-w-fit{min-width:-moz-fit-content;min-width:fit-content}.flex-1{flex:1}.flex-shrink-0,.shrink-0{flex-shrink:0}.origin-bottom-left{transform-origin:0 100%}.origin-top{transform-origin:top}.origin-top-left{transform-origin:0 0}.-translate-x-1{--tw-translate-x:calc(var(--spacing)*-1);translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-x-1\\/2{--tw-translate-x: -50% ;translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-x-full{--tw-translate-x:-100%;translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-x-0{--tw-translate-x:calc(var(--spacing)*0);translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-y-1{--tw-translate-y:calc(var(--spacing)*-1);translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-y-1{--tw-translate-y:calc(var(--spacing)*1);translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-y-1\\/2{--tw-translate-y: 50% ;translate:var(--tw-translate-x)var(--tw-translate-y)}.-rotate-90{rotate:-90deg}.rotate-90{rotate:90deg}.rotate-180{rotate:180deg}.transform{transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)}.animate-pulse{animation:var(--animate-pulse)}.animate-spin{animation:var(--animate-spin)}.cursor-default{cursor:default}.cursor-pointer{cursor:pointer}.list-none{list-style-type:none}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.items-end{align-items:flex-end}.items-start{align-items:flex-start}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.justify-end{justify-content:flex-end}.gap-0{gap:calc(var(--spacing)*0)}.gap-0\\.5{gap:calc(var(--spacing)*.5)}.gap-1{gap:calc(var(--spacing)*1)}.gap-1\\.5{gap:calc(var(--spacing)*1.5)}.gap-2{gap:calc(var(--spacing)*2)}.gap-3{gap:calc(var(--spacing)*3)}.gap-4{gap:calc(var(--spacing)*4)}.gap-6{gap:calc(var(--spacing)*6)}.gap-8{gap:calc(var(--spacing)*8)}:where(.space-y-0>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*0)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*0)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-0\\.5>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*.5)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*.5)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-1>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*1)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*1)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-3>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*3)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*3)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-4>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*4)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*4)*calc(1 - var(--tw-space-y-reverse)))}.truncate{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.overflow-visible{overflow:visible}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.rounded{border-radius:.25rem}.rounded-full{border-radius:3.40282e38px}.rounded-lg{border-radius:var(--radius-lg)}.rounded-md{border-radius:var(--radius-md)}.rounded-xl{border-radius:var(--radius-xl)}.rounded-t{border-top-left-radius:.25rem;border-top-right-radius:.25rem}.rounded-t-sm{border-top-left-radius:var(--radius-sm);border-top-right-radius:var(--radius-sm)}.border{border-style:var(--tw-border-style);border-width:1px}.border-2{border-style:var(--tw-border-style);border-width:2px}.border-t{border-top-style:var(--tw-border-style);border-top-width:1px}.border-t-2{border-top-style:var(--tw-border-style);border-top-width:2px}.border-r{border-right-style:var(--tw-border-style);border-right-width:1px}.border-b{border-bottom-style:var(--tw-border-style);border-bottom-width:1px}.border-l{border-left-style:var(--tw-border-style);border-left-width:1px}.border-l-2{border-left-style:var(--tw-border-style);border-left-width:2px}.border-l-4{border-left-style:var(--tw-border-style);border-left-width:4px}.border-dashed{--tw-border-style:dashed;border-style:dashed}.border-none{--tw-border-style:none;border-style:none}.border-blue-200{border-color:var(--color-blue-200)}.border-blue-500{border-color:var(--color-blue-500)}.border-blue-600{border-color:var(--color-blue-600)}.border-gray-50{border-color:var(--color-gray-50)}.border-gray-100{border-color:var(--color-gray-100)}.border-gray-200{border-color:var(--color-gray-200)}.border-gray-300{border-color:var(--color-gray-300)}.border-green-200{border-color:var(--color-green-200)}.border-green-500{border-color:var(--color-green-500)}.border-indigo-500{border-color:var(--color-indigo-500)}.border-orange-500{border-color:var(--color-orange-500)}.border-pink-500{border-color:var(--color-pink-500)}.border-purple-500{border-color:var(--color-purple-500)}.border-red-200{border-color:var(--color-red-200)}.border-teal-500{border-color:var(--color-teal-500)}.border-t-transparent{border-top-color:#0000}.bg-amber-50{background-color:var(--color-amber-50)}.bg-amber-100{background-color:var(--color-amber-100)}.bg-amber-500{background-color:var(--color-amber-500)}.bg-black{background-color:var(--color-black)}.bg-black\\/50{background-color:#00000080}@supports (color:color-mix(in lab,red,red)){.bg-black\\/50{background-color:color-mix(in oklab,var(--color-black)50%,transparent)}}.bg-blue-50{background-color:var(--color-blue-50)}.bg-blue-100{background-color:var(--color-blue-100)}.bg-blue-500{background-color:var(--color-blue-500)}.bg-blue-600{background-color:var(--color-blue-600)}.bg-cyan-50{background-color:var(--color-cyan-50)}.bg-cyan-100{background-color:var(--color-cyan-100)}.bg-cyan-400{background-color:var(--color-cyan-400)}.bg-emerald-50{background-color:var(--color-emerald-50)}.bg-fuchsia-300{background-color:var(--color-fuchsia-300)}.bg-gray-50{background-color:var(--color-gray-50)}.bg-gray-100{background-color:var(--color-gray-100)}.bg-gray-200{background-color:var(--color-gray-200)}.bg-gray-300{background-color:var(--color-gray-300)}.bg-gray-400{background-color:var(--color-gray-400)}.bg-gray-600{background-color:var(--color-gray-600)}.bg-gray-800{background-color:var(--color-gray-800)}.bg-green-50{background-color:var(--color-green-50)}.bg-green-100{background-color:var(--color-green-100)}.bg-green-500{background-color:var(--color-green-500)}.bg-green-600{background-color:var(--color-green-600)}.bg-indigo-500{background-color:var(--color-indigo-500)}.bg-indigo-600{background-color:var(--color-indigo-600)}.bg-orange-400{background-color:var(--color-orange-400)}.bg-pink-400{background-color:var(--color-pink-400)}.bg-pink-500{background-color:var(--color-pink-500)}.bg-purple-50{background-color:var(--color-purple-50)}.bg-purple-100{background-color:var(--color-purple-100)}.bg-purple-300{background-color:var(--color-purple-300)}.bg-purple-400{background-color:var(--color-purple-400)}.bg-red-50{background-color:var(--color-red-50)}.bg-red-100{background-color:var(--color-red-100)}.bg-red-500{background-color:var(--color-red-500)}.bg-rtb-blue{background-color:var(--color-rtb-blue)}.bg-sky-50{background-color:var(--color-sky-50)}.bg-teal-500{background-color:var(--color-teal-500)}.bg-transparent{background-color:#0000}.bg-violet-500{background-color:var(--color-violet-500)}.bg-white{background-color:var(--color-white)}.bg-white\\/30{background-color:#ffffff4d}@supports (color:color-mix(in lab,red,red)){.bg-white\\/30{background-color:color-mix(in oklab,var(--color-white)30%,transparent)}}.bg-white\\/40{background-color:#fff6}@supports (color:color-mix(in lab,red,red)){.bg-white\\/40{background-color:color-mix(in oklab,var(--color-white)40%,transparent)}}.bg-yellow-50{background-color:var(--color-yellow-50)}.bg-yellow-400{background-color:var(--color-yellow-400)}.bg-gradient-to-br{--tw-gradient-position:to bottom right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.from-amber-400{--tw-gradient-from:var(--color-amber-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-cyan-400{--tw-gradient-from:var(--color-cyan-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-blue-500{--tw-gradient-to:var(--color-blue-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-orange-500{--tw-gradient-to:var(--color-orange-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.object-contain{object-fit:contain}.object-cover{object-fit:cover}.p-0{padding:calc(var(--spacing)*0)}.p-1{padding:calc(var(--spacing)*1)}.p-2{padding:calc(var(--spacing)*2)}.p-3{padding:calc(var(--spacing)*3)}.p-4{padding:calc(var(--spacing)*4)}.p-5{padding:calc(var(--spacing)*5)}.p-6{padding:calc(var(--spacing)*6)}.p-8{padding:calc(var(--spacing)*8)}.px-2{padding-inline:calc(var(--spacing)*2)}.px-2\\.5{padding-inline:calc(var(--spacing)*2.5)}.px-3{padding-inline:calc(var(--spacing)*3)}.px-4{padding-inline:calc(var(--spacing)*4)}.px-5{padding-inline:calc(var(--spacing)*5)}.px-6{padding-inline:calc(var(--spacing)*6)}.py-0{padding-block:calc(var(--spacing)*0)}.py-0\\.5{padding-block:calc(var(--spacing)*.5)}.py-1{padding-block:calc(var(--spacing)*1)}.py-1\\.5{padding-block:calc(var(--spacing)*1.5)}.py-2{padding-block:calc(var(--spacing)*2)}.py-2\\.5{padding-block:calc(var(--spacing)*2.5)}.py-3{padding-block:calc(var(--spacing)*3)}.py-4{padding-block:calc(var(--spacing)*4)}.py-6{padding-block:calc(var(--spacing)*6)}.py-8{padding-block:calc(var(--spacing)*8)}.py-12{padding-block:calc(var(--spacing)*12)}.pt-2{padding-top:calc(var(--spacing)*2)}.pt-3{padding-top:calc(var(--spacing)*3)}.pt-4{padding-top:calc(var(--spacing)*4)}.pr-2{padding-right:calc(var(--spacing)*2)}.pr-3{padding-right:calc(var(--spacing)*3)}.pr-4{padding-right:calc(var(--spacing)*4)}.pb-2{padding-bottom:calc(var(--spacing)*2)}.pb-3{padding-bottom:calc(var(--spacing)*3)}.pb-6{padding-bottom:calc(var(--spacing)*6)}.pb-20{padding-bottom:calc(var(--spacing)*20)}.pb-24{padding-bottom:calc(var(--spacing)*24)}.pb-36{padding-bottom:calc(var(--spacing)*36)}.pb-52{padding-bottom:calc(var(--spacing)*52)}.pl-2{padding-left:calc(var(--spacing)*2)}.pl-3{padding-left:calc(var(--spacing)*3)}.pl-4{padding-left:calc(var(--spacing)*4)}.pl-9{padding-left:calc(var(--spacing)*9)}.pl-10{padding-left:calc(var(--spacing)*10)}.text-center{text-align:center}.text-left{text-align:left}.text-right{text-align:right}.text-2xl{font-size:var(--text-2xl);line-height:var(--tw-leading,var(--text-2xl--line-height))}.text-3xl{font-size:var(--text-3xl);line-height:var(--tw-leading,var(--text-3xl--line-height))}.text-4xl{font-size:var(--text-4xl);line-height:var(--tw-leading,var(--text-4xl--line-height))}.text-lg{font-size:var(--text-lg);line-height:var(--tw-leading,var(--text-lg--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.text-xl{font-size:var(--text-xl);line-height:var(--tw-leading,var(--text-xl--line-height))}.text-xs{font-size:var(--text-xs);line-height:var(--tw-leading,var(--text-xs--line-height))}.text-\\[9px\\]{font-size:9px}.text-\\[10px\\]{font-size:10px}.text-\\[11px\\]{font-size:11px}.leading-none{--tw-leading:1;line-height:1}.leading-tight{--tw-leading:var(--leading-tight);line-height:var(--leading-tight)}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.font-medium{--tw-font-weight:var(--font-weight-medium);font-weight:var(--font-weight-medium)}.font-normal{--tw-font-weight:var(--font-weight-normal);font-weight:var(--font-weight-normal)}.font-semibold{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.tracking-wider{--tw-tracking:var(--tracking-wider);letter-spacing:var(--tracking-wider)}.whitespace-nowrap{white-space:nowrap}.text-amber-600{color:var(--color-amber-600)}.text-amber-700{color:var(--color-amber-700)}.text-blue-600{color:var(--color-blue-600)}.text-blue-700{color:var(--color-blue-700)}.text-blue-800{color:var(--color-blue-800)}.text-cyan-600{color:var(--color-cyan-600)}.text-emerald-700{color:var(--color-emerald-700)}.text-gray-300{color:var(--color-gray-300)}.text-gray-400{color:var(--color-gray-400)}.text-gray-500{color:var(--color-gray-500)}.text-gray-600{color:var(--color-gray-600)}.text-gray-700{color:var(--color-gray-700)}.text-gray-800{color:var(--color-gray-800)}.text-gray-900{color:var(--color-gray-900)}.text-green-600{color:var(--color-green-600)}.text-green-700{color:var(--color-green-700)}.text-green-800{color:var(--color-green-800)}.text-purple-600{color:var(--color-purple-600)}.text-purple-700{color:var(--color-purple-700)}.text-red-500{color:var(--color-red-500)}.text-red-700{color:var(--color-red-700)}.text-red-800{color:var(--color-red-800)}.text-rtb-blue{color:var(--color-rtb-blue)}.text-white{color:var(--color-white)}.text-yellow-600{color:var(--color-yellow-600)}.uppercase{text-transform:uppercase}.italic{font-style:italic}.no-underline{text-decoration-line:none}.opacity-20{opacity:.2}.opacity-60{opacity:.6}.opacity-80{opacity:.8}.shadow{--tw-shadow:0 1px 3px 0 var(--tw-shadow-color,#0000001a),0 1px 2px -1px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px var(--tw-shadow-color,#0000001a),0 4px 6px -4px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-md{--tw-shadow:0 4px 6px -1px var(--tw-shadow-color,#0000001a),0 2px 4px -2px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 3px 0 var(--tw-shadow-color,#0000001a),0 1px 2px -1px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.filter{filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.transition-all{transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-colors{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-opacity{transition-property:opacity;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-shadow{transition-property:box-shadow;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-transform{transition-property:transform,translate,scale,rotate;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.duration-300{--tw-duration:.3s;transition-duration:.3s}.ease-in-out{--tw-ease:var(--ease-in-out);transition-timing-function:var(--ease-in-out)}.outline-none{--tw-outline-style:none;outline-style:none}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}@media(hover:hover){.group-hover\\:bg-gray-50:is(:where(.group):hover *){background-color:var(--color-gray-50)}}.last\\:border-b-0:last-child{border-bottom-style:var(--tw-border-style);border-bottom-width:0}.focus-within\\:border-blue-500:focus-within{border-color:var(--color-blue-500)}.focus-within\\:ring-1:focus-within{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(1px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus-within\\:ring-blue-500:focus-within{--tw-ring-color:var(--color-blue-500)}@media(hover:hover){.hover\\:z-10:hover{z-index:10}.hover\\:scale-150:hover{--tw-scale-x:150%;--tw-scale-y:150%;--tw-scale-z:150%;scale:var(--tw-scale-x)var(--tw-scale-y)}.hover\\:border-gray-200:hover{border-color:var(--color-gray-200)}.hover\\:border-gray-400:hover{border-color:var(--color-gray-400)}.hover\\:bg-blue-50:hover{background-color:var(--color-blue-50)}.hover\\:bg-blue-700:hover{background-color:var(--color-blue-700)}.hover\\:bg-gray-50:hover{background-color:var(--color-gray-50)}.hover\\:bg-gray-100:hover{background-color:var(--color-gray-100)}.hover\\:bg-gray-200:hover{background-color:var(--color-gray-200)}.hover\\:bg-gray-700:hover{background-color:var(--color-gray-700)}.hover\\:bg-green-700:hover{background-color:var(--color-green-700)}.hover\\:text-blue-800:hover{color:var(--color-blue-800)}.hover\\:text-gray-600:hover{color:var(--color-gray-600)}.hover\\:text-gray-700:hover{color:var(--color-gray-700)}.hover\\:text-gray-800:hover{color:var(--color-gray-800)}.hover\\:underline:hover{text-decoration-line:underline}.hover\\:opacity-100:hover{opacity:1}.hover\\:shadow-md:hover{--tw-shadow:0 4px 6px -1px var(--tw-shadow-color,#0000001a),0 2px 4px -2px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}}.focus\\:border-blue-500:focus{border-color:var(--color-blue-500)}.focus\\:ring-0:focus{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(0px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus\\:ring-1:focus{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(1px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus\\:ring-2:focus{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus\\:ring-blue-500:focus{--tw-ring-color:var(--color-blue-500)}.focus\\:outline-none:focus{--tw-outline-style:none;outline-style:none}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\:opacity-50:disabled{opacity:.5}@media(min-width:40rem){.sm\\:block{display:block}.sm\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.sm\\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.sm\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.sm\\:p-4{padding:calc(var(--spacing)*4)}.sm\\:px-4{padding-inline:calc(var(--spacing)*4)}.sm\\:py-4{padding-block:calc(var(--spacing)*4)}}@media(min-width:64rem){.lg\\:sticky{position:sticky}.lg\\:hidden{display:none}.lg\\:translate-x-0{--tw-translate-x:calc(var(--spacing)*0);translate:var(--tw-translate-x)var(--tw-translate-y)}.lg\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.lg\\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.lg\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.lg\\:grid-cols-5{grid-template-columns:repeat(5,minmax(0,1fr))}.lg\\:gap-6{gap:calc(var(--spacing)*6)}.lg\\:p-6{padding:calc(var(--spacing)*6)}.lg\\:px-6{padding-inline:calc(var(--spacing)*6)}}}body.local-rtbdashboard-plugin .main-inner{max-width:100%!important;margin-top:0!important;padding:0!important}body.local-rtbdashboard-plugin #page-header *{display:none!important}body.local-rtbdashboard-plugin #page-header{margin:10px 0 0;padding:0!important}@property --tw-translate-x{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-y{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-z{syntax:"*";inherits:false;initial-value:0}@property --tw-rotate-x{syntax:"*";inherits:false}@property --tw-rotate-y{syntax:"*";inherits:false}@property --tw-rotate-z{syntax:"*";inherits:false}@property --tw-skew-x{syntax:"*";inherits:false}@property --tw-skew-y{syntax:"*";inherits:false}@property --tw-space-y-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-gradient-position{syntax:"*";inherits:false}@property --tw-gradient-from{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-via{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-to{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-stops{syntax:"*";inherits:false}@property --tw-gradient-via-stops{syntax:"*";inherits:false}@property --tw-gradient-from-position{syntax:"<length-percentage>";inherits:false;initial-value:0%}@property --tw-gradient-via-position{syntax:"<length-percentage>";inherits:false;initial-value:50%}@property --tw-gradient-to-position{syntax:"<length-percentage>";inherits:false;initial-value:100%}@property --tw-leading{syntax:"*";inherits:false}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-tracking{syntax:"*";inherits:false}@property --tw-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:"*";inherits:false}@property --tw-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:"*";inherits:false}@property --tw-inset-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:"*";inherits:false}@property --tw-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:"*";inherits:false}@property --tw-inset-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:"*";inherits:false}@property --tw-ring-offset-width{syntax:"<length>";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:"*";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-blur{syntax:"*";inherits:false}@property --tw-brightness{syntax:"*";inherits:false}@property --tw-contrast{syntax:"*";inherits:false}@property --tw-grayscale{syntax:"*";inherits:false}@property --tw-hue-rotate{syntax:"*";inherits:false}@property --tw-invert{syntax:"*";inherits:false}@property --tw-opacity{syntax:"*";inherits:false}@property --tw-saturate{syntax:"*";inherits:false}@property --tw-sepia{syntax:"*";inherits:false}@property --tw-drop-shadow{syntax:"*";inherits:false}@property --tw-drop-shadow-color{syntax:"*";inherits:false}@property --tw-drop-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-drop-shadow-size{syntax:"*";inherits:false}@property --tw-duration{syntax:"*";inherits:false}@property --tw-ease{syntax:"*";inherits:false}@property --tw-scale-x{syntax:"*";inherits:false;initial-value:1}@property --tw-scale-y{syntax:"*";inherits:false;initial-value:1}@property --tw-scale-z{syntax:"*";inherits:false;initial-value:1}@keyframes spin{to{transform:rotate(360deg)}}@keyframes pulse{50%{opacity:.5}}
/*$vite$:1*/`,document.head.appendChild(Ue);var de,C,Ee,ee,Pe,Ie,Be,Ve,Ne,ke,Se,ie={},Fe=[],zt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,he=Array.isArray;function Q(t,a){for(var r in a)t[r]=a[r];return t}function Ce(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function We(t,a,r){var l,o,n,c={};for(n in a)n=="key"?l=a[n]:n=="ref"?o=a[n]:c[n]=a[n];if(arguments.length>2&&(c.children=arguments.length>3?de.call(arguments,2):r),typeof t=="function"&&t.defaultProps!=null)for(n in t.defaultProps)c[n]===void 0&&(c[n]=t.defaultProps[n]);return ge(t,c,l,o,null)}function ge(t,a,r,l,o){var n={type:t,props:a,key:r,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++Ee,__i:-1,__u:0};return o==null&&C.vnode!=null&&C.vnode(n),n}function I(t){return t.children}function me(t,a){this.props=t,this.context=a}function re(t,a){if(a==null)return t.__?re(t.__,t.__i+1):null;for(var r;a<t.__k.length;a++)if((r=t.__k[a])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?re(t):null}function Oe(t){var a,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,a=0;a<t.__k.length;a++)if((r=t.__k[a])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return Oe(t)}}function qe(t){(!t.__d&&(t.__d=!0)&&ee.push(t)&&!pe.__r++||Pe!=C.debounceRendering)&&((Pe=C.debounceRendering)||Ie)(pe)}function pe(){for(var t,a,r,l,o,n,c,d=1;ee.length;)ee.length>d&&ee.sort(Be),t=ee.shift(),d=ee.length,t.__d&&(r=void 0,l=void 0,o=(l=(a=t).__v).__e,n=[],c=[],a.__P&&((r=Q({},l)).__v=l.__v+1,C.vnode&&C.vnode(r),ze(a.__P,r,l,a.__n,a.__P.namespaceURI,32&l.__u?[o]:null,n,o??re(l),!!(32&l.__u),c),r.__v=l.__v,r.__.__k[r.__i]=r,Qe(n,r,c),l.__e=l.__=null,r.__e!=o&&Oe(r)));pe.__r=0}function Ge(t,a,r,l,o,n,c,d,h,s,m){var i,u,v,f,g,p,b,_=l&&l.__k||Fe,R=a.length;for(h=Rt(r,a,_,h,R),i=0;i<R;i++)(v=r.__k[i])!=null&&(u=v.__i==-1?ie:_[v.__i]||ie,v.__i=i,p=ze(t,v,u,o,n,c,d,h,s,m),f=v.__e,v.ref&&u.ref!=v.ref&&(u.ref&&Le(u.ref,null,v),m.push(v.ref,v.__c||f,v)),g==null&&f!=null&&(g=f),(b=!!(4&v.__u))||u.__k===v.__k?h=Ke(v,h,t,b):typeof v.type=="function"&&p!==void 0?h=p:f&&(h=f.nextSibling),v.__u&=-7);return r.__e=g,h}function Rt(t,a,r,l,o){var n,c,d,h,s,m=r.length,i=m,u=0;for(t.__k=new Array(o),n=0;n<o;n++)(c=a[n])!=null&&typeof c!="boolean"&&typeof c!="function"?(h=n+u,(c=t.__k[n]=typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?ge(null,c,null,null,null):he(c)?ge(I,{children:c},null,null,null):c.constructor==null&&c.__b>0?ge(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c).__=t,c.__b=t.__b+1,d=null,(s=c.__i=Lt(c,r,h,i))!=-1&&(i--,(d=r[s])&&(d.__u|=2)),d==null||d.__v==null?(s==-1&&(o>m?u--:o<m&&u++),typeof c.type!="function"&&(c.__u|=4)):s!=h&&(s==h-1?u--:s==h+1?u++:(s>h?u--:u++,c.__u|=4))):t.__k[n]=null;if(i)for(n=0;n<m;n++)(d=r[n])!=null&&(2&d.__u)==0&&(d.__e==l&&(l=re(d)),Xe(d,d));return l}function Ke(t,a,r,l){var o,n;if(typeof t.type=="function"){for(o=t.__k,n=0;o&&n<o.length;n++)o[n]&&(o[n].__=t,a=Ke(o[n],a,r,l));return a}t.__e!=a&&(l&&(a&&t.type&&!a.parentNode&&(a=re(t)),r.insertBefore(t.__e,a||null)),a=t.__e);do a=a&&a.nextSibling;while(a!=null&&a.nodeType==8);return a}function Lt(t,a,r,l){var o,n,c,d=t.key,h=t.type,s=a[r],m=s!=null&&(2&s.__u)==0;if(s===null&&t.key==null||m&&d==s.key&&h==s.type)return r;if(l>(m?1:0)){for(o=r-1,n=r+1;o>=0||n<a.length;)if((s=a[c=o>=0?o--:n++])!=null&&(2&s.__u)==0&&d==s.key&&h==s.type)return c}return-1}function Je(t,a,r){a[0]=="-"?t.setProperty(a,r??""):t[a]=r==null?"":typeof r!="number"||zt.test(a)?r:r+"px"}function ue(t,a,r,l,o){var n,c;e:if(a=="style")if(typeof r=="string")t.style.cssText=r;else{if(typeof l=="string"&&(t.style.cssText=l=""),l)for(a in l)r&&a in r||Je(t.style,a,"");if(r)for(a in r)l&&r[a]==l[a]||Je(t.style,a,r[a])}else if(a[0]=="o"&&a[1]=="n")n=a!=(a=a.replace(Ve,"$1")),c=a.toLowerCase(),a=c in t||a=="onFocusOut"||a=="onFocusIn"?c.slice(2):a.slice(2),t.l||(t.l={}),t.l[a+n]=r,r?l?r.u=l.u:(r.u=Ne,t.addEventListener(a,n?Se:ke,n)):t.removeEventListener(a,n?Se:ke,n);else{if(o=="http://www.w3.org/2000/svg")a=a.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(a!="width"&&a!="height"&&a!="href"&&a!="list"&&a!="form"&&a!="tabIndex"&&a!="download"&&a!="rowSpan"&&a!="colSpan"&&a!="role"&&a!="popover"&&a in t)try{t[a]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&a[4]!="-"?t.removeAttribute(a):t.setAttribute(a,a=="popover"&&r==1?"":r))}}function Ye(t){return function(a){if(this.l){var r=this.l[a.type+t];if(a.t==null)a.t=Ne++;else if(a.t<r.u)return;return r(C.event?C.event(a):a)}}}function ze(t,a,r,l,o,n,c,d,h,s){var m,i,u,v,f,g,p,b,_,R,z,P,A,F,k,j,L,M=a.type;if(a.constructor!=null)return null;128&r.__u&&(h=!!(32&r.__u),n=[d=a.__e=r.__e]),(m=C.__b)&&m(a);e:if(typeof M=="function")try{if(b=a.props,_="prototype"in M&&M.prototype.render,R=(m=M.contextType)&&l[m.__c],z=m?R?R.props.value:m.__:l,r.__c?p=(i=a.__c=r.__c).__=i.__E:(_?a.__c=i=new M(b,z):(a.__c=i=new me(b,z),i.constructor=M,i.render=$t),R&&R.sub(i),i.props=b,i.state||(i.state={}),i.context=z,i.__n=l,u=i.__d=!0,i.__h=[],i._sb=[]),_&&i.__s==null&&(i.__s=i.state),_&&M.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=Q({},i.__s)),Q(i.__s,M.getDerivedStateFromProps(b,i.__s))),v=i.props,f=i.state,i.__v=a,u)_&&M.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),_&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(_&&M.getDerivedStateFromProps==null&&b!==v&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(b,z),!i.__e&&i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(b,i.__s,z)===!1||a.__v==r.__v){for(a.__v!=r.__v&&(i.props=b,i.state=i.__s,i.__d=!1),a.__e=r.__e,a.__k=r.__k,a.__k.some(function(y){y&&(y.__=a)}),P=0;P<i._sb.length;P++)i.__h.push(i._sb[P]);i._sb=[],i.__h.length&&c.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(b,i.__s,z),_&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(v,f,g)})}if(i.context=z,i.props=b,i.__P=t,i.__e=!1,A=C.__r,F=0,_){for(i.state=i.__s,i.__d=!1,A&&A(a),m=i.render(i.props,i.state,i.context),k=0;k<i._sb.length;k++)i.__h.push(i._sb[k]);i._sb=[]}else do i.__d=!1,A&&A(a),m=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++F<25);i.state=i.__s,i.getChildContext!=null&&(l=Q(Q({},l),i.getChildContext())),_&&!u&&i.getSnapshotBeforeUpdate!=null&&(g=i.getSnapshotBeforeUpdate(v,f)),j=m,m!=null&&m.type===I&&m.key==null&&(j=Ze(m.props.children)),d=Ge(t,he(j)?j:[j],a,r,l,o,n,c,d,h,s),i.base=a.__e,a.__u&=-161,i.__h.length&&c.push(i),p&&(i.__E=i.__=null)}catch(y){if(a.__v=null,h||n!=null)if(y.then){for(a.__u|=h?160:128;d&&d.nodeType==8&&d.nextSibling;)d=d.nextSibling;n[n.indexOf(d)]=null,a.__e=d}else{for(L=n.length;L--;)Ce(n[L]);Re(a)}else a.__e=r.__e,a.__k=r.__k,y.then||Re(a);C.__e(y,a,r)}else n==null&&a.__v==r.__v?(a.__k=r.__k,a.__e=r.__e):d=a.__e=Mt(r.__e,a,r,l,o,n,c,h,s);return(m=C.diffed)&&m(a),128&a.__u?void 0:d}function Re(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(Re)}function Qe(t,a,r){for(var l=0;l<r.length;l++)Le(r[l],r[++l],r[++l]);C.__c&&C.__c(a,t),t.some(function(o){try{t=o.__h,o.__h=[],t.some(function(n){n.call(o)})}catch(n){C.__e(n,o.__v)}})}function Ze(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:he(t)?t.map(Ze):Q({},t)}function Mt(t,a,r,l,o,n,c,d,h){var s,m,i,u,v,f,g,p=r.props,b=a.props,_=a.type;if(_=="svg"?o="http://www.w3.org/2000/svg":_=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),n!=null){for(s=0;s<n.length;s++)if((v=n[s])&&"setAttribute"in v==!!_&&(_?v.localName==_:v.nodeType==3)){t=v,n[s]=null;break}}if(t==null){if(_==null)return document.createTextNode(b);t=document.createElementNS(o,_,b.is&&b),d&&(C.__m&&C.__m(a,n),d=!1),n=null}if(_==null)p===b||d&&t.data==b||(t.data=b);else{if(n=n&&de.call(t.childNodes),p=r.props||ie,!d&&n!=null)for(p={},s=0;s<t.attributes.length;s++)p[(v=t.attributes[s]).name]=v.value;for(s in p)if(v=p[s],s!="children"){if(s=="dangerouslySetInnerHTML")i=v;else if(!(s in b)){if(s=="value"&&"defaultValue"in b||s=="checked"&&"defaultChecked"in b)continue;ue(t,s,null,v,o)}}for(s in b)v=b[s],s=="children"?u=v:s=="dangerouslySetInnerHTML"?m=v:s=="value"?f=v:s=="checked"?g=v:d&&typeof v!="function"||p[s]===v||ue(t,s,v,p[s],o);if(m)d||i&&(m.__html==i.__html||m.__html==t.innerHTML)||(t.innerHTML=m.__html),a.__k=[];else if(i&&(t.innerHTML=""),Ge(a.type=="template"?t.content:t,he(u)?u:[u],a,r,l,_=="foreignObject"?"http://www.w3.org/1999/xhtml":o,n,c,n?n[0]:r.__k&&re(r,0),d,h),n!=null)for(s=n.length;s--;)Ce(n[s]);d||(s="value",_=="progress"&&f==null?t.removeAttribute("value"):f!=null&&(f!==t[s]||_=="progress"&&!f||_=="option"&&f!=p[s])&&ue(t,s,f,p[s],o),s="checked",g!=null&&g!=t[s]&&ue(t,s,g,p[s],o))}return t}function Le(t,a,r){try{if(typeof t=="function"){var l=typeof t.__u=="function";l&&t.__u(),l&&a==null||(t.__u=t(a))}else t.current=a}catch(o){C.__e(o,r)}}function Xe(t,a,r){var l,o;if(C.unmount&&C.unmount(t),(l=t.ref)&&(l.current&&l.current!=t.__e||Le(l,null,a)),(l=t.__c)!=null){if(l.componentWillUnmount)try{l.componentWillUnmount()}catch(n){C.__e(n,a)}l.base=l.__P=null}if(l=t.__k)for(o=0;o<l.length;o++)l[o]&&Xe(l[o],a,r||typeof t.type!="function");r||Ce(t.__e),t.__c=t.__=t.__e=void 0}function $t(t,a,r){return this.constructor(t,r)}function At(t,a,r){var l,o,n,c;a==document&&(a=document.documentElement),C.__&&C.__(t,a),o=(l=!1)?null:a.__k,n=[],c=[],ze(a,t=a.__k=We(I,null,[t]),o||ie,ie,a.namespaceURI,o?null:a.firstChild?de.call(a.childNodes):null,n,o?o.__e:a.firstChild,l,c),Qe(n,t,c)}de=Fe.slice,C={__e:function(t,a,r,l){for(var o,n,c;a=a.__;)if((o=a.__c)&&!o.__)try{if((n=o.constructor)&&n.getDerivedStateFromError!=null&&(o.setState(n.getDerivedStateFromError(t)),c=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(t,l||{}),c=o.__d),c)return o.__E=o}catch(d){t=d}throw t}},Ee=0,me.prototype.setState=function(t,a){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Q({},this.state),typeof t=="function"&&(t=t(Q({},r),this.props)),t&&Q(r,t),t!=null&&this.__v&&(a&&this._sb.push(a),qe(this))},me.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),qe(this))},me.prototype.render=I,ee=[],Ie=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Be=function(t,a){return t.__v.__b-a.__v.__b},pe.__r=0,Ve=/(PointerCapture)$|Capture$/i,Ne=0,ke=Ye(!1),Se=Ye(!0);var Dt=0;function e(t,a,r,l,o,n){a||(a={});var c,d,h=a;if("ref"in h)for(d in h={},a)d=="ref"?c=a[d]:h[d]=a[d];var s={type:t,props:h,key:r,ref:c,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Dt,__i:-1,__u:0,__source:o,__self:n};if(typeof t=="function"&&(c=t.defaultProps))for(d in c)h[d]===void 0&&(h[d]=c[d]);return C.vnode&&C.vnode(s),s}var se,T,Me,et,ve=0,tt=[],H=C,at=H.__b,rt=H.__r,lt=H.diffed,ot=H.__c,nt=H.unmount,it=H.__;function $e(t,a){H.__h&&H.__h(T,t,ve||a),ve=0;var r=T.__H||(T.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({}),r.__[t]}function x(t){return ve=1,Tt(ht,t)}function Tt(t,a,r){var l=$e(se++,2);if(l.t=t,!l.__c&&(l.__=[ht(void 0,a),function(d){var h=l.__N?l.__N[0]:l.__[0],s=l.t(h,d);h!==s&&(l.__N=[s,l.__[1]],l.__c.setState({}))}],l.__c=T,!T.__f)){var o=function(d,h,s){if(!l.__c.__H)return!0;var m=l.__c.__H.__.filter(function(u){return!!u.__c});if(m.every(function(u){return!u.__N}))return!n||n.call(this,d,h,s);var i=l.__c.props!==d;return m.forEach(function(u){if(u.__N){var v=u.__[0];u.__=u.__N,u.__N=void 0,v!==u.__[0]&&(i=!0)}}),n&&n.call(this,d,h,s)||i};T.__f=!0;var n=T.shouldComponentUpdate,c=T.componentWillUpdate;T.componentWillUpdate=function(d,h,s){if(this.__e){var m=n;n=void 0,o(d,h,s),n=m}c&&c.call(this,d,h,s)},T.shouldComponentUpdate=o}return l.__N||l.__}function q(t,a){var r=$e(se++,3);!H.__s&&dt(r.__H,a)&&(r.__=t,r.u=a,T.__H.__h.push(r))}function Ae(t){return ve=5,st(function(){return{current:t}},[])}function st(t,a){var r=$e(se++,7);return dt(r.__H,a)&&(r.__=t(),r.__H=a,r.__h=t),r.__}function jt(){for(var t;t=tt.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(fe),t.__H.__h.forEach(De),t.__H.__h=[]}catch(a){t.__H.__h=[],H.__e(a,t.__v)}}H.__b=function(t){T=null,at&&at(t)},H.__=function(t,a){t&&a.__k&&a.__k.__m&&(t.__m=a.__k.__m),it&&it(t,a)},H.__r=function(t){rt&&rt(t),se=0;var a=(T=t.__c).__H;a&&(Me===T?(a.__h=[],T.__h=[],a.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(a.__h.forEach(fe),a.__h.forEach(De),a.__h=[],se=0)),Me=T},H.diffed=function(t){lt&&lt(t);var a=t.__c;a&&a.__H&&(a.__H.__h.length&&(tt.push(a)!==1&&et===H.requestAnimationFrame||((et=H.requestAnimationFrame)||Ht)(jt)),a.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),Me=T=null},H.__c=function(t,a){a.some(function(r){try{r.__h.forEach(fe),r.__h=r.__h.filter(function(l){return!l.__||De(l)})}catch(l){a.some(function(o){o.__h&&(o.__h=[])}),a=[],H.__e(l,r.__v)}}),ot&&ot(t,a)},H.unmount=function(t){nt&&nt(t);var a,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(l){try{fe(l)}catch(o){a=o}}),r.__H=void 0,a&&H.__e(a,r.__v))};var ct=typeof requestAnimationFrame=="function";function Ht(t){var a,r=function(){clearTimeout(l),ct&&cancelAnimationFrame(a),setTimeout(t)},l=setTimeout(r,35);ct&&(a=requestAnimationFrame(r))}function fe(t){var a=T,r=t.__c;typeof r=="function"&&(t.__c=void 0,r()),T=a}function De(t){var a=T;t.__c=t.__(),T=a}function dt(t,a){return!t||t.length!==a.length||a.some(function(r,l){return r!==t[l]})}function ht(t,a){return typeof a=="function"?a(t):a}function gt(t,a){return new Promise((r,l)=>{X(["core/ajax"],o=>{o.call([{methodname:t,args:a}])[0].then(r).catch(l)})})}function ce({icon:t,value:a,label:r,customBgColor:l}){return e("div",{className:"rounded-xl p-4 flex items-center gap-4",style:l?{backgroundColor:l}:void 0,children:[e("div",{className:"w-12 h-12 rounded-full bg-white/30 flex items-center justify-center",children:t}),e("div",{children:[e("p",{className:"text-xs text-gray-600 font-medium",children:r}),e("p",{className:"text-xl font-bold text-gray-800",children:a})]})]})}function Ut({activeThisWeek:t,atRisk:a,neverLoggedIn:r}){const l=t+a+r;if(l===0)return e("div",{className:"relative w-36 h-36",children:[e("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:e("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#e5e7eb",strokeWidth:"14"})}),e("div",{className:"absolute inset-0 flex items-center justify-center",children:e("span",{className:"text-2xl font-bold text-gray-400",children:"0"})})]});const o=2*Math.PI*40,n=t/l*o,c=a/l*o,d=r/l*o;return e("div",{className:"relative w-36 h-36",children:[e("svg",{viewBox:"0 0 100 100",className:"w-full h-full transform -rotate-90",children:[e("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#e5e7eb",strokeWidth:"14"}),e("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#22c55e",strokeWidth:"14",strokeDasharray:`${n} ${o-n}`,strokeDashoffset:"0"}),e("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#f59e0b",strokeWidth:"14",strokeDasharray:`${c} ${o-c}`,strokeDashoffset:`${-n}`}),e("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#ef4444",strokeWidth:"14",strokeDasharray:`${d} ${o-d}`,strokeDashoffset:`${-(n+c)}`})]}),e("div",{className:"absolute inset-0 flex items-center justify-center",children:e("span",{className:"text-2xl font-bold text-gray-800",children:l})})]})}function mt({male:t,female:a}){const r=t+a;if(r===0)return e("div",{className:"relative w-36 h-36",children:[e("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:e("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#e5e7eb",strokeWidth:"14"})}),e("div",{className:"absolute inset-0 flex items-center justify-center",children:e("span",{className:"text-2xl font-bold text-gray-400",children:"0"})})]});const l=2*Math.PI*40,o=t/r*l,n=a/r*l;return e("div",{className:"relative w-36 h-36",children:[e("svg",{viewBox:"0 0 100 100",className:"w-full h-full transform -rotate-90",children:[e("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#e5e7eb",strokeWidth:"14"}),e("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#3b82f6",strokeWidth:"14",strokeDasharray:`${o} ${l-o}`,strokeDashoffset:"0"}),e("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#ec4899",strokeWidth:"14",strokeDasharray:`${n} ${l-n}`,strokeDashoffset:`${-o}`})]}),e("div",{className:"absolute inset-0 flex items-center justify-center",children:e("span",{className:"text-2xl font-bold text-gray-800",children:r})})]})}const Et=()=>e("svg",{className:"w-6 h-6 text-cyan-600",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"})}),Pt=()=>e("svg",{className:"w-6 h-6 text-amber-600",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z"})}),It=()=>e("svg",{className:"w-6 h-6 text-purple-600",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),Bt=()=>e("svg",{className:"w-6 h-6 text-green-600",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9H9V9h10v2zm-4 4H9v-2h6v2zm4-8H9V5h10v2z"})}),Vt=()=>e("svg",{className:"w-6 h-6 text-blue-600",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z"})});function Ft({user:t,stats:a,themeConfig:r}){const[l,o]=x([]),[n,c]=x(!0),[d,h]=x([]),[s,m]=x(!0),[i,u]=x(7);q(()=>{gt("local_elby_dashboard_get_school_user_counts",{}).then(g=>{const b=[...g.schools||[]].sort((_,R)=>R.student_count-_.student_count).slice(0,8);o(b)}).catch(()=>o([])).finally(()=>c(!1))},[]),q(()=>{m(!0),gt("local_elby_dashboard_get_platform_traffic",{period:"daily",days_back:i}).then(g=>h(g.data||[])).catch(()=>h([])).finally(()=>m(!1))},[i]);const v=l.length>0?Math.max(...l.map(g=>g.student_count)):1,f=d.length>0?Math.max(...d.map(g=>g.unique_users),1):1;return e("div",{className:"p-2 sm:p-4 lg:p-6 bg-gray-50 min-h-screen",children:[e("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[e(ce,{icon:e(Vt,{}),value:a.totalSchools.toLocaleString(),label:"Schools",customBgColor:"#dbeafe"}),e(ce,{icon:e(Et,{}),value:a.totalStudents.toLocaleString(),label:"Students",customBgColor:r.statCard1Color}),e(ce,{icon:e(Pt,{}),value:a.totalTeachers.toLocaleString(),label:"Teachers",customBgColor:r.statCard2Color}),e(ce,{icon:e(It,{}),value:a.totalUsers.toLocaleString(),label:"Total Users",customBgColor:r.statCard3Color}),e(ce,{icon:e(Bt,{}),value:a.totalCourses.toLocaleString(),label:"Courses",customBgColor:r.statCard4Color})]}),e("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("div",{className:"flex items-center justify-between mb-4",children:[e("h3",{className:"text-lg font-semibold text-gray-800",children:"Schools Overview"}),e("span",{className:"text-sm text-gray-500",children:["Top ",l.length," by students"]})]}),n?e("div",{className:"space-y-3",children:[...Array(5)].map((g,p)=>e("div",{className:"h-6 bg-gray-100 rounded animate-pulse"},p))}):l.length===0?e("div",{className:"text-center py-8 text-gray-500",children:e("p",{children:"No school data available"})}):e("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:l.map(g=>e("div",{className:"flex items-center gap-3",children:[e("div",{className:"w-28 text-xs text-gray-600 truncate flex-shrink-0",title:g.school_name,children:g.school_name}),e("div",{className:"flex-1 h-6 bg-gray-100 rounded-full overflow-hidden",children:e("div",{className:"h-full bg-blue-500 rounded-full transition-all opacity-80 hover:opacity-100",style:{width:`${g.student_count/v*100}%`}})}),e("span",{className:"text-xs font-medium text-gray-700 w-10 text-right flex-shrink-0",children:g.student_count})]},g.school_code))})]}),e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"User Overview"}),e("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e("div",{children:[e("h4",{className:"text-sm font-medium text-gray-600 mb-3",children:"Student Demographics"}),e("div",{className:"flex flex-col items-center gap-3",children:[e(mt,{male:a.maleStudents,female:a.femaleStudents}),e("div",{className:"flex items-center gap-3 flex-wrap justify-center",children:[e("div",{className:"flex items-center gap-1.5",children:[e("span",{className:"w-2.5 h-2.5 rounded-full bg-blue-500"}),e("span",{className:"text-xs text-gray-600",children:["Male: ",a.maleStudents.toLocaleString()]})]}),e("div",{className:"flex items-center gap-1.5",children:[e("span",{className:"w-2.5 h-2.5 rounded-full bg-pink-500"}),e("span",{className:"text-xs text-gray-600",children:["Female: ",a.femaleStudents.toLocaleString()]})]})]})]})]}),e("div",{children:[e("h4",{className:"text-sm font-medium text-gray-600 mb-3",children:"Engagement Status"}),e("div",{className:"flex flex-col items-center gap-3",children:[e(Ut,{activeThisWeek:a.activeThisWeek,atRisk:a.atRisk,neverLoggedIn:a.neverLoggedIn}),e("div",{className:"flex items-center gap-3 flex-wrap justify-center",children:[e("div",{className:"flex items-center gap-1.5",children:[e("span",{className:"w-2.5 h-2.5 rounded-full bg-green-500"}),e("span",{className:"text-xs text-gray-500",children:"Active"})]}),e("div",{className:"flex items-center gap-1.5",children:[e("span",{className:"w-2.5 h-2.5 rounded-full bg-amber-500"}),e("span",{className:"text-xs text-gray-500",children:"At Risk"})]}),e("div",{className:"flex items-center gap-1.5",children:[e("span",{className:"w-2.5 h-2.5 rounded-full bg-red-500"}),e("span",{className:"text-xs text-gray-500",children:"Never"})]})]})]})]})]}),e("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mt-4 pt-4 border-t border-gray-100",children:[e("div",{className:"bg-emerald-50 rounded-lg p-3",children:[e("p",{className:"text-xs text-gray-500",children:"Active Today"}),e("p",{className:"text-lg font-bold text-emerald-700",children:a.activeToday.toLocaleString()})]}),e("div",{className:"bg-green-50 rounded-lg p-3",children:[e("p",{className:"text-xs text-gray-500",children:"Active This Week"}),e("p",{className:"text-lg font-bold text-green-700",children:a.activeThisWeek.toLocaleString()})]}),e("div",{className:"bg-amber-50 rounded-lg p-3",children:[e("p",{className:"text-xs text-gray-500",children:"At Risk"}),e("p",{className:"text-lg font-bold text-amber-700",children:a.atRisk.toLocaleString()})]}),e("div",{className:"bg-red-50 rounded-lg p-3",children:[e("p",{className:"text-xs text-gray-500",children:"Never Logged In"}),e("p",{className:"text-lg font-bold text-red-700",children:a.neverLoggedIn.toLocaleString()})]})]})]})]}),e("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("div",{className:"flex items-center justify-between mb-4",children:[e("h3",{className:"text-lg font-semibold text-gray-800",children:"Students by Grade Level"}),e("span",{className:"text-sm text-gray-500",children:[a.gradeDistribution.reduce((g,p)=>g+p.count,0).toLocaleString()," total"]})]}),a.gradeDistribution.length===0?e("div",{className:"text-center py-8 text-gray-500",children:e("p",{children:"No grade data available yet"})}):e("div",{className:"flex flex-col",style:{gap:"16px"},children:(()=>{const g=Math.max(...a.gradeDistribution.map(p=>p.count),1);return a.gradeDistribution.map(p=>e("div",{className:"flex items-center gap-3",children:[e("div",{className:"w-20 text-xs text-gray-600 truncate flex-shrink-0",title:p.label,children:p.label}),e("div",{className:"flex-1 bg-gray-100 rounded-full overflow-hidden",style:{height:"20px"},children:e("div",{className:"h-full bg-indigo-500 rounded-full transition-all opacity-80 hover:opacity-100",style:{width:`${p.count/g*100}%`}})}),e("span",{className:"text-xs font-medium text-gray-700 w-12 text-right flex-shrink-0",children:p.count.toLocaleString()})]},p.label))})()})]}),e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("div",{className:"flex items-center justify-between mb-4",children:[e("h3",{className:"text-lg font-semibold text-gray-800",children:"Students by Trade"}),e("span",{className:"text-sm text-gray-500",children:["Top ",a.programDistribution.length]})]}),a.programDistribution.length===0?e("div",{className:"text-center py-8 text-gray-500",children:e("p",{children:"No program data available yet"})}):e("div",{className:"space-y-3",children:(()=>{const g=Math.max(...a.programDistribution.map(p=>p.count),1);return a.programDistribution.map(p=>e("div",{className:"flex items-center gap-3",children:[e("div",{className:"w-28 text-xs text-gray-600 truncate flex-shrink-0",title:p.label,children:p.label}),e("div",{className:"flex-1 h-5 bg-gray-100 rounded-full overflow-hidden",children:e("div",{className:"h-full bg-teal-500 rounded-full transition-all opacity-80 hover:opacity-100",style:{width:`${p.count/g*100}%`}})}),e("span",{className:"text-xs font-medium text-gray-700 w-12 text-right flex-shrink-0",children:p.count.toLocaleString()})]},p.label))})()})]})]}),e("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Teacher Overview"}),e("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e("div",{children:[e("h4",{className:"text-sm font-medium text-gray-600 mb-3",children:"Gender"}),e("div",{className:"flex flex-col items-center gap-3",children:[e(mt,{male:a.maleTeachers,female:a.femaleTeachers}),e("div",{className:"flex items-center gap-3 flex-wrap justify-center",children:[e("div",{className:"flex items-center gap-1.5",children:[e("span",{className:"w-2.5 h-2.5 rounded-full bg-blue-500"}),e("span",{className:"text-xs text-gray-600",children:["Male: ",a.maleTeachers.toLocaleString()]})]}),e("div",{className:"flex items-center gap-1.5",children:[e("span",{className:"w-2.5 h-2.5 rounded-full bg-pink-500"}),e("span",{className:"text-xs text-gray-600",children:["Female: ",a.femaleTeachers.toLocaleString()]})]})]})]})]}),e("div",{children:[e("h4",{className:"text-sm font-medium text-gray-600 mb-3",children:"Summary"}),e("div",{className:"space-y-3",children:[e("div",{className:"bg-amber-50 rounded-lg p-3",children:[e("p",{className:"text-xs text-gray-500",children:"Total Teachers"}),e("p",{className:"text-lg font-bold text-amber-700",children:a.totalTeachers.toLocaleString()})]}),e("div",{className:"bg-blue-50 rounded-lg p-3",children:[e("p",{className:"text-xs text-gray-500",children:"Positions"}),e("p",{className:"text-lg font-bold text-blue-700",children:a.positionDistribution.length})]})]})]})]})]}),e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("div",{className:"flex items-center justify-between mb-4",children:[e("h3",{className:"text-lg font-semibold text-gray-800",children:"Teachers by Position"}),e("span",{className:"text-sm text-gray-500",children:[a.positionDistribution.reduce((g,p)=>g+p.count,0).toLocaleString()," total"]})]}),a.positionDistribution.length===0?e("div",{className:"text-center py-8 text-gray-500",children:e("p",{children:"No teacher data available yet"})}):e("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:(()=>{const g=Math.max(...a.positionDistribution.map(p=>p.count),1);return a.positionDistribution.map(p=>e("div",{className:"flex items-center gap-3",children:[e("div",{className:"w-28 text-xs text-gray-600 truncate flex-shrink-0",title:p.label,children:p.label}),e("div",{className:"flex-1 h-6 bg-gray-100 rounded-full overflow-hidden",children:e("div",{className:"h-full bg-amber-500 rounded-full transition-all opacity-80 hover:opacity-100",style:{width:`${p.count/g*100}%`}})}),e("span",{className:"text-xs font-medium text-gray-700 w-12 text-right flex-shrink-0",children:p.count.toLocaleString()})]},p.label))})()})]})]}),e("div",{className:"gap-6",children:e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("div",{className:"flex items-center justify-between mb-4",children:[e("h3",{className:"text-lg font-semibold text-gray-800",children:"Platform Traffic"}),e("div",{className:"flex items-center gap-1",children:[7,14,30,90].map(g=>e("button",{onClick:()=>u(g),className:`px-2.5 py-1 text-xs rounded-md transition-colors ${i===g?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[g,"d"]},g))})]}),s?e("div",{className:"flex items-end justify-between h-48 gap-2 px-2",children:[...Array(7)].map((g,p)=>e("div",{className:"flex-1 bg-gray-100 rounded-t animate-pulse",style:{height:`${30+Math.random()*50}%`}},p))}):d.length===0?e("div",{className:"text-center py-8 text-gray-500",children:e("p",{children:"No traffic data available"})}):e(I,{children:[e("div",{className:"flex items-end justify-between h-48 gap-2 px-2",children:d.map(g=>e("div",{className:"flex flex-col items-center gap-1 flex-1",children:[e("span",{className:"text-xs font-medium text-gray-600",children:g.unique_users}),e("div",{className:"w-full flex justify-center",style:{height:"10rem"},children:e("div",{className:"flex items-end h-full w-full max-w-[2.5rem]",children:e("div",{className:"w-full bg-blue-500 rounded-t opacity-80 hover:opacity-100 transition-opacity",style:{height:`${g.unique_users/f*100}%`,minHeight:g.unique_users>0?"4px":"0"}})})}),e("span",{className:"text-xs text-gray-500",children:g.period_label})]},g.period_label))}),e("div",{className:"flex items-center gap-4 mt-3 pt-3 border-t border-gray-100",children:e("div",{className:"flex items-center gap-1.5",children:[e("span",{className:"w-2.5 h-2.5 rounded-full bg-blue-500"}),e("span",{className:"text-xs text-gray-500",children:"Unique Users"})]})})]})]})})]})}const Wt=[{id:"home",name:"Dashboard",icon:"dashboard",url:"/local/elby_dashboard/index.php"},{id:"schools",name:"Schools",icon:"pedagogy",url:"/local/elby_dashboard/schools.php",capability:"viewreports"},{id:"students",name:"Students",icon:"communication",url:"/local/elby_dashboard/students.php",capability:"viewreports"},{id:"teachers",name:"Teachers",icon:"presence",url:"/local/elby_dashboard/teachers.php",capability:"viewreports"},{id:"traffic",name:"Traffic",icon:"event",url:"/local/elby_dashboard/traffic.php",capability:"viewreports"},{id:"accesslog",name:"Access Log",icon:"courses",url:"/local/elby_dashboard/accesslog.php",capability:"viewreports"},{id:"admin",name:"Admin Panel",icon:"settings",url:"/local/elby_dashboard/admin/index.php",capability:"admin"}],pt={dashboard:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M4 4h4v4H4V4zm6 0h4v4h-4V4zm6 0h4v4h-4V4zM4 10h4v4H4v-4zm6 0h4v4h-4v-4zm6 0h4v4h-4v-4zM4 16h4v4H4v-4zm6 0h4v4h-4v-4zm6 0h4v4h-4v-4z"})}),courses:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9H9V9h10v2zm-4 4H9v-2h6v2zm4-8H9V5h10v2z"})}),presence:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V9h14v10zM5 7V5h14v2H5zm2 4h10v2H7v-2zm0 4h7v2H7v-2z"})}),communication:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"})}),event:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"})}),payment:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"})}),pedagogy:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z"})}),message:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})}),completion:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})}),settings:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"})}),logout:e("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5-5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"})})},Ot=()=>e("svg",{className:"w-8 h-8",viewBox:"0 0 40 40",fill:"none",children:[e("rect",{x:"4",y:"20",width:"16",height:"16",fill:"#22d3ee",transform:"rotate(-45 12 28)"}),e("rect",{x:"20",y:"4",width:"16",height:"16",fill:"#fbbf24",transform:"rotate(-45 28 12)"})]});function qt({activePage:t,sidenavConfig:a,themeConfig:r,isOpen:l,onClose:o}){const n=Wt.filter(c=>c.id==="home"?!0:r.menuVisibility[c.id]!==!1);return e(I,{children:[l&&e("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:o}),e("aside",{className:`
                fixed lg:sticky inset-y-0 left-0 z-50 top-0
                w-72 h-screen bg-gray-50 border-r border-gray-200 py-6 pr-4 overflow-y-auto flex flex-col
                transform transition-transform duration-300 ease-in-out
                ${l?"translate-x-0":"-translate-x-full lg:translate-x-0"}
            `,children:[e("div",{className:"pl-3 pb-6 flex items-center justify-between",children:[e("div",{className:"flex items-center gap-3",children:[a.logoUrl?e("img",{src:a.logoUrl,alt:a.title,className:"w-8 h-8 object-contain"}):e(Ot,{}),e("span",{className:"text-lg font-bold text-gray-800",children:a.title})]}),e("button",{onClick:o,className:"lg:hidden p-2 mr-2 text-gray-500 hover:text-gray-700 hover:bg-gray-200 rounded-lg","aria-label":"Close menu",children:e("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e("div",{className:"mb-8 flex-1",children:[e("h6",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-4 pl-3",children:"Menu"}),e("ul",{className:"space-y-1 m-0 p-0 list-none",children:n.map(c=>{const d=c.id===t;return e("li",{children:e("a",{href:c.url,className:`flex items-center px-3 py-2 rounded text-sm transition-colors no-underline ${d?"text-white":"text-gray-700 hover:bg-gray-200"}`,style:d?{backgroundColor:r.sidenavAccentColor}:void 0,children:[e("span",{className:`w-5 mr-3 ${d?"text-white":"text-gray-500"}`,children:pt[c.icon]}),e("span",{children:c.name})]})},c.id)})})]}),e("div",{className:"mt-auto",children:[e("h6",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-4 pl-3",children:"Account"}),e("ul",{className:"space-y-1 m-0 p-0 list-none",children:e("li",{children:e("a",{href:"/login/logout.php",className:"flex items-center px-3 py-2 rounded text-sm text-gray-700 hover:bg-gray-200 no-underline transition-colors",children:[e("span",{className:"w-5 mr-3 text-gray-500",children:pt.logout}),e("span",{children:"Log out"})]})})})]})]})]})}const Gt=[{id:0,name:"All Categories"},{id:1,name:"Kigali City"},{id:2,name:"Eastern Province"},{id:3,name:"Western Province"},{id:4,name:"Northern Province"},{id:5,name:"Southern Province"}],ut=[{id:1,name:"Bicumbi",parentId:2,participants:47,units:[{average:9.2,completionRate:"95.7%"},{average:3.67,completionRate:"4.3%"},{average:2.82,completionRate:"4.3%"},{average:5,completionRate:"2.1%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"}]},{id:2,name:"Cyahinda",parentId:5,participants:101,units:[{average:8.8,completionRate:"55.4%"},{average:7.52,completionRate:"10.9%"},{average:null,completionRate:"0.0%"},{average:9.31,completionRate:"12.9%"},{average:7.81,completionRate:"5.0%"},{average:null,completionRate:"0.0%"},{average:6.52,completionRate:"4.0%"},{average:9.02,completionRate:"6.9%"}]},{id:3,name:"De La Salle Byumba",parentId:4,participants:90,units:[{average:6.7,completionRate:"93.3%"},{average:6.23,completionRate:"62.2%"},{average:5.3,completionRate:"25.6%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:5.88,completionRate:"1.1%"},{average:2.14,completionRate:"1.1%"},{average:null,completionRate:"0.0%"}]},{id:4,name:"Gacuba II",parentId:3,participants:86,units:[{average:6.6,completionRate:"84.9%"},{average:7.32,completionRate:"43.0%"},{average:0,completionRate:"1.2%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"}]},{id:5,name:"Kabarore",parentId:4,participants:93,units:[{average:9.4,completionRate:"96.8%"},{average:5.82,completionRate:"11.8%"},{average:8.75,completionRate:"1.1%"},{average:9.09,completionRate:"1.1%"},{average:.38,completionRate:"1.1%"},{average:null,completionRate:"0.0%"},{average:6.43,completionRate:"1.1%"},{average:null,completionRate:"0.0%"}]},{id:6,name:"Kirambo",parentId:3,participants:97,units:[{average:5.3,completionRate:"3.1%"},{average:null,completionRate:"0.0%"},{average:3.75,completionRate:"1.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"}]},{id:7,name:"Matimba",parentId:2,participants:44,units:[{average:9.3,completionRate:"93.2%"},{average:4.25,completionRate:"18.2%"},{average:4.38,completionRate:"6.8%"},{average:5,completionRate:"2.3%"},{average:10,completionRate:"2.3%"},{average:7.65,completionRate:"2.3%"},{average:7.14,completionRate:"2.3%"},{average:8.75,completionRate:"2.3%"}]},{id:8,name:"Mbuga",parentId:1,participants:93,units:[{average:8.5,completionRate:"92.5%"},{average:3.33,completionRate:"2.2%"},{average:10,completionRate:"1.1%"},{average:9.55,completionRate:"1.1%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"}]},{id:9,name:"Muhanga",parentId:5,participants:50,units:[{average:7.3,completionRate:"88.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"}]},{id:10,name:"Muramba",parentId:3,participants:31,units:[{average:9.7,completionRate:"100.0%"},{average:9.29,completionRate:"93.5%"},{average:7.82,completionRate:"6.5%"},{average:7.28,completionRate:"6.5%"},{average:8.75,completionRate:"6.5%"},{average:7.84,completionRate:"9.7%"},{average:7.68,completionRate:"6.5%"},{average:7.71,completionRate:"9.7%"}]},{id:11,name:"Mururu",parentId:3,participants:63,units:[{average:9.3,completionRate:"92.1%"},{average:3.33,completionRate:"1.6%"},{average:null,completionRate:"0.0%"},{average:7.12,completionRate:"4.8%"},{average:9.62,completionRate:"3.2%"},{average:8.82,completionRate:"4.8%"},{average:4.47,completionRate:"3.2%"},{average:null,completionRate:"0.0%"}]},{id:12,name:"Mwezi",parentId:4,participants:58,units:[{average:9.9,completionRate:"100.0%"},{average:9,completionRate:"89.7%"},{average:0,completionRate:"1.7%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:1.25,completionRate:"1.7%"}]},{id:13,name:"Nyamata",parentId:2,participants:89,units:[{average:7.7,completionRate:"10.1%"},{average:1.78,completionRate:"3.4%"},{average:8.78,completionRate:"53.9%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"}]},{id:14,name:"Rubengera",parentId:3,participants:51,units:[{average:6.4,completionRate:"100.0%"},{average:6.11,completionRate:"98.0%"},{average:3.44,completionRate:"3.9%"},{average:5.15,completionRate:"2.0%"},{average:3.27,completionRate:"2.0%"},{average:2.94,completionRate:"2.0%"},{average:3.93,completionRate:"2.0%"},{average:1.88,completionRate:"2.0%"}]},{id:15,name:"Save",parentId:5,participants:90,units:[{average:8.1,completionRate:"94.4%"},{average:5.84,completionRate:"18.9%"},{average:3.75,completionRate:"1.1%"},{average:4.09,completionRate:"1.1%"},{average:3.65,completionRate:"1.1%"},{average:5.88,completionRate:"2.2%"},{average:6.31,completionRate:"3.3%"},{average:6.88,completionRate:"1.1%"}]},{id:16,name:"Zaza",parentId:2,participants:114,units:[{average:8.4,completionRate:"91.2%"},{average:5.13,completionRate:"20.2%"},{average:4.38,completionRate:"0.9%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"},{average:null,completionRate:"0.0%"}]}],vt={name:"Grand total",participants:1197,units:[{average:8.3,completionRate:"76.7%"},{average:6.9,completionRate:"25.2%"},{average:7.07,completionRate:"7.3%"},{average:8.12,completionRate:"2.0%"},{average:7.16,completionRate:"1.1%"},{average:7.11,completionRate:"0.9%"},{average:5.93,completionRate:"1.3%"},{average:7.5,completionRate:"1.2%"}]},ft=["U1","U2","U3","U4","U5","U6","U7","U8"];function Kt(){const[t,a]=x(0),r=t===0?ut:ut.filter(n=>n.parentId===t),o=t===0?vt:(()=>{if(r.length===0)return vt;const n=r.reduce((d,h)=>d+h.participants,0),c=ft.map((d,h)=>{const s=r.filter(u=>u.units[h].average!==null);if(s.length===0)return{average:null,completionRate:"0.0%"};const m=s.reduce((u,v)=>u+(v.units[h].average||0),0),i=r.reduce((u,v)=>{const f=parseFloat(v.units[h].completionRate);return u+(isNaN(f)?0:f)},0);return{average:Math.round(m/s.length*100)/100,completionRate:`${(i/r.length).toFixed(1)}%`}});return{name:"Grand total",participants:n,units:c}})();return e("div",{className:"p-2 sm:p-4 lg:p-6 bg-white min-h-screen",children:[e("div",{className:"mb-6",children:e("h1",{className:"text-2xl font-bold text-gray-800",children:"Overview"})}),e("div",{className:"mb-4",children:[e("label",{htmlFor:"parent-category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Category"}),e("select",{id:"parent-category",value:t,onChange:n=>a(Number(n.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 min-w-[200px] focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:Gt.map(n=>e("option",{value:n.id,children:n.name},n.id))})]}),e("div",{className:"overflow-x-auto",children:e("table",{className:"w-full text-sm",children:[e("thead",{children:e("tr",{className:"border-b border-gray-200",children:[e("th",{className:"py-3 px-2 text-left font-medium text-gray-600 w-8"}),e("th",{className:"py-3 px-2 text-left font-medium text-gray-600 min-w-[140px]",children:["Category ",e("span",{className:"text-gray-400",children:""})]}),e("th",{className:"py-3 px-2 text-center font-medium text-gray-600",children:"# of Stds"}),ft.map(n=>e(I,{children:[e("th",{className:"py-3 px-2 text-center font-medium text-gray-600",children:[n," Ave."]},`${n}-ave`),e("th",{className:"py-3 px-2 text-center font-medium text-gray-600",children:[n," CR"]},`${n}-cr`)]}))]})}),e("tbody",{children:[r.map((n,c)=>e("tr",{className:c%2===0?"bg-sky-50":"bg-white",children:[e("td",{className:"py-2 px-2 text-gray-500",children:[c+1,"."]}),e("td",{className:"py-2 px-2 text-gray-800",children:n.name}),e("td",{className:"py-2 px-2 text-center text-gray-600",children:n.participants}),n.units.map((d,h)=>e(I,{children:[e("td",{className:"py-2 px-2 text-center text-gray-600",children:d.average!==null?d.average:"-"},`ave-${h}`),e("td",{className:"py-2 px-2 text-center text-gray-600",children:d.completionRate},`cr-${h}`)]}))]},n.id)),e("tr",{className:"bg-white border-t border-gray-300",children:[e("td",{className:"py-2 px-2"}),e("td",{className:"py-2 px-2 font-semibold text-gray-800",children:o.name}),e("td",{className:"py-2 px-2 text-center font-semibold text-gray-800",children:o.participants>=1e3?`${(o.participants/1e3).toFixed(1)}K`:o.participants}),o.units.map((n,c)=>e(I,{children:[e("td",{className:"py-2 px-2 text-center font-semibold text-gray-800",children:n.average!==null?n.average:"-"},`total-ave-${c}`),e("td",{className:"py-2 px-2 text-center font-semibold text-gray-800",children:n.completionRate},`total-cr-${c}`)]}))]})]})]})}),r.length===0&&e("div",{className:"text-center py-8 text-gray-500",children:"No categories found for the selected parent category."})]})}function xt(t,a){const r=a.toLowerCase();return t.courses.some(o=>o.id.toString().includes(a)||o.fullname.toLowerCase().includes(r)||o.shortname.toLowerCase().includes(r))?!0:t.children.some(o=>xt(o,a))}function bt({node:t,depth:a,expandedNodes:r,onToggle:l,selectedId:o,onSelect:n,searchQuery:c}){const d=`cat-${t.id}`,h=r.has(d),s=t.children.length>0,m=t.courses.length>0,i=a*16+12,u=c.toLowerCase(),v=c?t.courses.filter(g=>g.id.toString().includes(c)||g.fullname.toLowerCase().includes(u)||g.shortname.toLowerCase().includes(u)):t.courses,f=c?t.children.some(g=>xt(g,c)):!0;return c&&v.length===0&&!f?null:e("div",{children:[e("button",{type:"button",onClick:()=>l(d),className:"w-full py-2 text-left text-sm font-medium text-gray-700 hover:bg-gray-100 flex items-center",style:{paddingLeft:i},children:[e("span",{className:"w-4 mr-1 text-gray-400 shrink-0",children:(s||m)&&(h?"":"")}),e("span",{className:"truncate",children:t.name})]}),h&&e(I,{children:[t.children.map(g=>e(bt,{node:g,depth:a+1,expandedNodes:r,onToggle:l,selectedId:o,onSelect:n,searchQuery:c},g.id)),v.map(g=>e("button",{type:"button",onClick:()=>n(g.id),className:`w-full py-2 text-left text-sm hover:bg-blue-50 flex items-center justify-between pr-3 ${Number(g.id)===Number(o)?"bg-blue-50 text-blue-700":"text-gray-600"}`,style:{paddingLeft:(a+1)*16+12},children:[e("div",{className:"flex items-center gap-1 truncate",children:[e("span",{className:"text-gray-400 shrink-0",children:["[",g.id,"]"]}),e("span",{className:"truncate",children:g.fullname})]}),e("span",{className:"text-xs text-gray-400 ml-2 shrink-0",children:[g.enrolled_count," enrolled"]})]},g.id))]})]})}function yt(t,a){if(!a)return;const r=Number(a);for(const l of t){const o=l.courses.find(c=>Number(c.id)===r);if(o)return o;const n=yt(l.children,a);if(n)return n}}function Jt(t){const a=new Set,r=l=>{for(const o of l)a.add(`cat-${o.id}`),r(o.children)};return r(t),a}function Yt({tree:t,selectedId:a,placeholder:r,onSelect:l}){const[o,n]=x(!1),[c,d]=x(""),[h,s]=x(new Set),m=Ae(null),i=Ae(null),u=yt(t,a),v=g=>{const p=new Set(h);p.has(g)?p.delete(g):p.add(g),s(p)};q(()=>{const g=p=>{m.current&&!m.current.contains(p.target)&&(n(!1),d(""))};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]),q(()=>{o&&i.current&&i.current.focus()},[o]),q(()=>{c&&s(Jt(t))},[c,t]);const f=g=>{l(g),n(!1),d("")};return e("div",{ref:m,className:"relative w-full max-w-md",children:[e("button",{type:"button",onClick:()=>n(!o),className:"w-full px-4 py-2.5 text-left bg-white border border-gray-300 rounded-lg flex items-center justify-between hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e("span",{className:u?"text-gray-900":"text-gray-500",children:u?`[${u.id}] ${u.fullname}`:r}),e("svg",{className:`w-5 h-5 text-gray-400 transition-transform ${o?"rotate-180":""}`,viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),o&&e("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg",children:[e("div",{className:"p-2 border-b border-gray-100",children:e("div",{className:"flex items-center gap-2 px-3 py-2 border border-gray-200 rounded-md focus-within:ring-1 focus-within:ring-blue-500 focus-within:border-blue-500",children:[e("svg",{className:"w-4 h-4 text-gray-400 shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})}),e("input",{ref:i,type:"text",placeholder:"Search course...",value:c,onInput:g=>d(g.target.value),className:"w-full text-sm bg-transparent border-none outline-none focus:outline-none focus:ring-0"})]})}),e("div",{className:"max-h-80 overflow-y-auto",children:t.length>0?t.map(g=>e(bt,{node:g,depth:0,expandedNodes:h,onToggle:v,selectedId:a,onSelect:f,searchQuery:c},g.id)):e("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"No courses found"})})]})]})}function Qt({years:t,selectedYear:a,onSelect:r}){return e("select",{value:a,onChange:l=>r(parseInt(l.target.value)),className:"px-4 py-2.5 bg-white border border-gray-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:t.map(l=>e("option",{value:l.value,children:l.label},l.value))})}const wt=["#F5A623","#4CAF50","#2196F3","#9C27B0","#00BCD4"];function Zt({rate:t,label:a,colorIndex:r=0}){const c=2*Math.PI*55,d=t/100*c,h=wt[r%wt.length],s=120/2;return e("div",{className:"flex flex-col items-center",children:[e("div",{className:"relative",style:{width:120,height:120},children:[e("svg",{width:120,height:120,viewBox:"0 0 120 120",children:[e("circle",{cx:s,cy:s,r:55,fill:"none",stroke:"#e5e5e5","stroke-width":10}),t>0&&e("circle",{cx:s,cy:s,r:55,fill:"none",stroke:h,"stroke-width":10,"stroke-linecap":"round","stroke-dasharray":`${d} ${c-d}`,transform:`rotate(-90 ${s} ${s})`})]}),e("div",{className:"absolute inset-0 flex items-center justify-center",children:e("span",{className:"text-2xl font-normal text-gray-500",children:[t.toFixed(0),"%"]})})]}),e("span",{className:"text-xs text-gray-600 mt-2 text-center font-medium max-w-[140px]",children:a})]})}function Xt(t,a){return t.length<=a?t:t.substring(0,a-1)+""}function ea({schools:t,sectionIndex:a,themeConfig:r}){const l=t[0]?.sections[a]?.grademax||100;return e("div",{className:"bg-white rounded-xl p-6 shadow-sm overflow-visible",children:[e("div",{className:"flex items-center gap-4 mb-6",children:[e("div",{className:"flex items-center gap-2",children:[e("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:r.chartPrimaryColor}}),e("span",{className:"text-sm text-gray-600",children:"Average Score"})]}),e("div",{className:"flex items-center gap-2",children:[e("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:r.chartSecondaryColor}}),e("span",{className:"text-sm text-gray-600",children:"Completion Rate"})]})]}),e("div",{className:"flex",children:[e("div",{className:"flex flex-col justify-between h-48 pr-2 text-xs text-gray-500 shrink-0",children:[e("span",{children:l}),e("span",{children:(l*.75).toFixed(l>=10?0:1)}),e("span",{children:(l*.5).toFixed(l>=10?0:1)}),e("span",{children:(l*.25).toFixed(l>=10?0:1)}),e("span",{children:"0"})]}),e("div",{className:"flex-1 overflow-x-auto",children:e("div",{className:"flex items-end gap-8",children:t.slice(0,15).map((o,n)=>{const c=o.sections[a],d=c?.average_grade||0,h=c?.grademax||l,s=h>0?d/h*100:0,m=c?c.completion_rate:0,i=String(o.school_name||"-"),u=Xt(i,20);return e("div",{className:"flex flex-col items-center min-w-[50px]",children:[e("div",{className:"flex gap-1 items-end h-48",children:[e("div",{className:"w-5 rounded-t-sm cursor-pointer",style:{height:`${s}%`,backgroundColor:r.chartPrimaryColor},title:`${i}
Avg: ${d.toFixed(1)}/${h}`}),e("div",{className:"w-5 rounded-t-sm cursor-pointer",style:{height:`${m}%`,backgroundColor:r.chartSecondaryColor},title:`${i}
CR: ${m.toFixed(1)}%`})]}),e("div",{className:"h-32 flex items-start justify-center mt-2",children:e("span",{className:"text-[11px] text-gray-600 whitespace-nowrap cursor-default origin-top",style:{transform:"rotate(45deg)"},title:i,children:u})})]},o.school_code||`school-${n}`)})})}),e("div",{className:"flex flex-col justify-between h-48 pl-2 text-xs text-gray-500 shrink-0",children:[e("span",{children:"100%"}),e("span",{children:"75%"}),e("span",{children:"50%"}),e("span",{children:"25%"}),e("span",{children:"0%"})]})]})]})}function ta({schools:t,sectionIndex:a,themeConfig:r}){return e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("p",{className:"text-xs text-gray-400 mb-3 italic",children:"Hover over points to see school names"}),e("div",{className:"relative h-64 border-l border-b border-gray-200 ml-8",children:[e("div",{className:"absolute -left-6 top-1/2 -rotate-90 text-xs text-gray-500 whitespace-nowrap",children:"Avg Score"}),e("div",{className:"absolute bottom-[-24px] left-1/2 -translate-x-1/2 text-xs text-gray-500",children:"Completion Rate"}),[0,25,50,75,100].map(l=>e("div",{className:"absolute text-[10px] text-gray-400",style:{bottom:`${l}%`,left:"-20px",transform:"translateY(50%)"},children:l},`y-${l}`)),[0,25,50,75,100].map(l=>e("div",{className:"absolute w-full border-t border-dashed border-gray-100",style:{bottom:`${l}%`}},l)),[0,25,50,75,100].map(l=>e("div",{className:"absolute h-full border-l border-dashed border-gray-100",style:{left:`${l}%`}},`v-${l}`)),t.map((l,o)=>{const n=l.sections[a];if(!n)return null;const c=n.completion_rate,d=n.average_grade||0,h=String(l.school_name||"Unknown");return e("div",{className:"absolute w-3 h-3 rounded-full cursor-pointer transform -translate-x-1/2 translate-y-1/2 hover:scale-150 hover:z-10 transition-transform",style:{left:`${c}%`,bottom:`${d}%`,backgroundColor:r.chartPrimaryColor},title:`${h}
Completion: ${c.toFixed(1)}%
Avg Score: ${d.toFixed(1)}%`},l.school_code||`scatter-${o}`)})]}),e("div",{className:"flex justify-between text-xs text-gray-400 mt-3 ml-8",children:[e("span",{children:"0%"}),e("span",{children:"25%"}),e("span",{children:"50%"}),e("span",{children:"75%"}),e("span",{children:"100%"})]})]})}function aa({column:t,sortColumn:a,sortDirection:r}){const l=a===t;return e("span",{className:`ml-1 inline-flex ${l?"text-blue-600":"text-gray-400"}`,children:l&&r==="asc"?"":l&&r==="desc"?"":""})}function xe({children:t,column:a,sortColumn:r,sortDirection:l,onSort:o,className:n}){return e("th",{className:`${n} cursor-pointer hover:bg-gray-100 select-none`,onClick:()=>o(a),children:e("div",{className:"flex items-center justify-center",children:[t,e(aa,{column:a,sortColumn:r,sortDirection:l})]})})}function ra({report:t,themeConfig:a}){const[r,l]=x(null),[o,n]=x("desc"),c=h=>{r===h?n(o==="asc"?"desc":"asc"):(l(h),n("desc"))},d=st(()=>r?[...t.schools].sort((h,s)=>{let m=0,i=0;if(r==="school")return m=h.school_name||"",i=s.school_name||"",o==="asc"?String(m).localeCompare(String(i)):String(i).localeCompare(String(m));if(r==="students")m=h.student_count,i=s.student_count;else if(r.startsWith("avg-")){const u=parseInt(r.replace("avg-",""));m=h.sections[u]?.average_grade||0,i=s.sections[u]?.average_grade||0}else if(r.startsWith("cr-")){const u=parseInt(r.replace("cr-",""));m=h.sections[u]?.completion_rate||0,i=s.sections[u]?.completion_rate||0}return o==="asc"?m-i:i-m}):t.schools,[t.schools,r,o]);return e("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[e("div",{className:"px-4 py-3 border-b border-gray-100 bg-gray-50",children:e("span",{className:"text-sm text-gray-600",children:[e("span",{className:"font-medium",children:"Legend:"})," U = Unit, Avg = Average score, CR = Completion rate",e("span",{className:"ml-4 text-gray-400",children:"(Click column headers to sort)"})]})}),e("div",{className:"overflow-auto max-h-[600px]",children:e("table",{className:"w-full text-sm",children:[e("thead",{className:"sticky top-0 z-20",children:e("tr",{className:"bg-gray-50",children:[e("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-600 sticky left-0 z-30 bg-gray-50",children:"#"}),e(xe,{column:"school",sortColumn:r,sortDirection:o,onSort:c,className:"px-3 py-2 text-left text-xs font-semibold text-gray-600 sticky left-8 z-30 bg-gray-50 min-w-[200px]",children:"School"}),e(xe,{column:"students",sortColumn:r,sortDirection:o,onSort:c,className:"px-3 py-2 text-center text-xs font-semibold text-gray-600 sticky left-[232px] z-30 bg-gray-50",children:"Enrolled students"}),t.overview_sections.map((h,s)=>e(I,{children:[e(xe,{column:`avg-${s}`,sortColumn:r,sortDirection:o,onSort:c,className:"px-2 py-2 text-center text-xs font-semibold text-gray-600 bg-gray-50",children:["U",h.section_number," Avg"]},`avg-${s}`),e(xe,{column:`cr-${s}`,sortColumn:r,sortDirection:o,onSort:c,className:"px-2 py-2 text-center text-xs font-semibold text-gray-600 bg-gray-50",children:["U",h.section_number," CR"]},`cr-${s}`)]}))]})}),e("tbody",{children:d.map((h,s)=>e("tr",{className:"border-t border-gray-100 hover:bg-gray-50 group",children:[e("td",{className:"px-3 py-2 text-gray-500 sticky left-0 z-10 bg-white group-hover:bg-gray-50",children:s+1}),e("td",{className:"px-3 py-2 font-medium text-gray-800 sticky left-8 z-10 bg-white group-hover:bg-gray-50 min-w-[200px]",children:h.school_name}),e("td",{className:"px-3 py-2 text-center text-gray-600 sticky left-[232px] z-10 bg-white group-hover:bg-gray-50",children:h.student_count}),h.sections.map((m,i)=>e(I,{children:[e("td",{className:"px-2 py-2 text-center text-gray-600",children:m.average_grade?m.grademax?`${m.average_grade.toFixed(1)}/${m.grademax}`:m.average_grade.toFixed(1):"-"},`avg-${i}`),e("td",{className:"px-2 py-2 text-center text-gray-600",children:[m.completion_rate.toFixed(1),"%"]},`cr-${i}`)]}))]},h.school_code||`row-${s}`))}),e("tfoot",{className:"sticky bottom-0 z-20",children:e("tr",{className:"border-t-2 border-gray-300 bg-gray-50 font-semibold",children:[e("td",{className:"px-3 py-2 sticky left-0 z-10 bg-gray-50"}),e("td",{className:"px-3 py-2 sticky left-8 z-10 bg-gray-50 min-w-[200px]",children:"Grand Total"}),e("td",{className:"px-3 py-2 text-center sticky left-[232px] z-10 bg-gray-50",children:t.total_enrolled}),t.overview_sections.map((h,s)=>{const m=t.schools.map(v=>v.sections[s]?.average_grade).filter(v=>v!==void 0&&v>0),i=m.length>0?m.reduce((v,f)=>v+f,0)/m.length:0,u=t.schools[0]?.sections[s]?.grademax;return e(I,{children:[e("td",{className:"px-2 py-2 text-center bg-gray-50",children:i>0?u?`${i.toFixed(1)}/${u}`:i.toFixed(1):"-"},`avg-${s}`),e("td",{className:"px-2 py-2 text-center bg-gray-50",children:[h.completion_rate.toFixed(1),"%"]},`cr-${s}`)]})})]})})]})})]})}function la({data:t,themeConfig:a}){const r=o=>{const n=new URLSearchParams;n.set("courseid",String(o)),t.selected_year&&n.set("year",String(t.selected_year)),window.location.href=`/local/elby_dashboard/courses.php?${n.toString()}`},l=o=>{const n=new URLSearchParams;t.selected_courseid&&n.set("courseid",String(t.selected_courseid)),n.set("year",String(o)),window.location.href=`/local/elby_dashboard/courses.php?${n.toString()}`};return e("div",{className:"p-2 sm:p-4 lg:p-6 bg-gray-50 min-h-screen",children:[e("div",{className:"mb-6 space-y-3",children:[e("div",{className:"flex items-center gap-3",children:[e("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Academic Year"}),e(Qt,{years:t.available_years,selectedYear:t.selected_year,onSelect:l})]}),e("div",{className:"flex items-center gap-3",children:[e("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Select Course"}),e("div",{className:"flex-1 max-w-md",children:e(Yt,{tree:t.courses_list,selectedId:t.selected_courseid,placeholder:"Select a course...",onSelect:r})})]})]}),t.course_report?e(I,{children:[e("div",{className:"mb-6",children:e(ra,{report:t.course_report,themeConfig:a})}),e("div",{className:"mb-6",children:[e("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Overview"}),e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:e("div",{className:"flex flex-wrap items-start gap-8",children:[e("div",{className:"flex flex-col items-center",children:[e("span",{className:"text-3xl font-bold text-gray-800",children:t.course_report.total_enrolled}),e("span",{className:"text-sm text-gray-500",children:"Enrolled Students"})]}),t.course_report.overview_sections.map((o,n)=>e(Zt,{rate:o.completion_rate,label:o.section_name,colorIndex:n},o.section_number))]})})]}),t.course_report.overview_sections.map((o,n)=>e("div",{className:"mb-6",children:[e("h3",{className:"text-md font-semibold text-gray-700 mb-3",children:o.section_name}),e("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e("div",{children:[e("h4",{className:"text-sm text-gray-600 mb-2",children:"Completion rate and Average score for each school"}),e(ea,{schools:t.course_report.schools,sectionIndex:n,themeConfig:a})]}),e("div",{children:[e("h4",{className:"text-sm text-gray-600 mb-2",children:"Completion rate x Average score for each school"}),e(ta,{schools:t.course_report.schools,sectionIndex:n,themeConfig:a})]})]})]},o.section_number))]}):e("div",{className:"bg-white rounded-xl p-8 shadow-sm text-center",children:[e("svg",{className:"w-16 h-16 mx-auto text-gray-300 mb-4",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9H9V9h10v2zm-4 4H9v-2h6v2zm4-8H9V5h10v2z"})}),e("p",{className:"text-gray-500",children:"Select a course to view the report"})]})]})}function oa(t,a){return new Promise((r,l)=>{X(["core/ajax"],o=>{o.call([{methodname:t,args:a}])[0].then(r).catch(l)})})}function be({label:t,value:a,color:r}){return e("div",{className:`rounded-xl p-4 ${r}`,children:[e("p",{className:"text-xs text-gray-600 font-medium",children:t}),e("p",{className:"text-2xl font-bold text-gray-800",children:a})]})}function na({school:t,onClick:a}){return e("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100 cursor-pointer hover:shadow-md hover:border-gray-200 transition-all",onClick:a,children:[e("h3",{className:"text-sm font-semibold text-gray-800 mb-1 truncate",children:t.school_name}),e("p",{className:"text-xs text-gray-500 mb-4",children:t.school_code}),e("div",{className:"grid grid-cols-2 gap-3",children:[e("div",{children:[e("p",{className:"text-xs text-gray-500",children:"Enrolled"}),e("p",{className:"text-lg font-bold text-gray-800",children:t.total_enrolled})]}),e("div",{children:[e("p",{className:"text-xs text-gray-500",children:"Active"}),e("p",{className:"text-lg font-bold text-green-600",children:t.total_active})]}),e("div",{children:[e("p",{className:"text-xs text-gray-500",children:"At Risk"}),e("p",{className:"text-lg font-bold text-red-500",children:t.at_risk_count})]}),e("div",{children:[e("p",{className:"text-xs text-gray-500",children:"Avg Score"}),e("p",{className:"text-lg font-bold text-blue-600",children:t.avg_quiz_score!==null?`${t.avg_quiz_score}%`:"N/A"})]})]})]})}function ia(){const[t,a]=x([]),[r,l]=x(!0),[o,n]=x(""),[c,d]=x("name");q(()=>{h()},[]);async function h(){try{l(!0);const p=await oa("local_elby_dashboard_get_student_list",{school_code:"",courseid:0,perpage:1}),b=await s();a(b)}catch(p){console.error("Failed to load schools:",p)}finally{l(!1)}}async function s(){const b=document.getElementById("elby-dashboard-root")?.getAttribute("data-schools");if(b)try{return JSON.parse(b)}catch{}return[]}function m(p){window.location.href=`/local/elby_dashboard/schools.php?school_code=${encodeURIComponent(p)}&view=detail`}const i=t.filter(p=>{if(o){const b=o.toLowerCase();if(!p.school_name.toLowerCase().includes(b)&&!p.school_code.toLowerCase().includes(b))return!1}return!0}).sort((p,b)=>{switch(c){case"most_active":return(b.avg_actions_per_student||0)-(p.avg_actions_per_student||0);case"most_enrolled":return b.total_enrolled-p.total_enrolled;default:return p.school_name.localeCompare(b.school_name)}}),u=i.reduce((p,b)=>p+b.total_enrolled,0),v=i.reduce((p,b)=>p+b.total_active,0),f=i.reduce((p,b)=>p+b.at_risk_count,0),g=i.filter(p=>p.avg_quiz_score!==null);return g.length>0&&Math.round(g.reduce((p,b)=>p+(b.avg_quiz_score||0),0)/g.length),r?e("div",{className:"p-6",children:e("div",{className:"animate-pulse space-y-4",children:[e("div",{className:"h-8 bg-gray-200 rounded w-48"}),e("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(p=>e("div",{className:"h-20 bg-gray-200 rounded-xl"},p))}),e("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(p=>e("div",{className:"h-40 bg-gray-200 rounded-xl"},p))})]})}):e("div",{className:"p-4 lg:p-6",children:[e("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e(be,{label:"Total Schools",value:i.length,color:"bg-blue-50"}),e(be,{label:"Total Enrolled",value:u.toLocaleString(),color:"bg-cyan-50"}),e(be,{label:"Active Students",value:v.toLocaleString(),color:"bg-green-50"}),e(be,{label:"At Risk",value:f.toLocaleString(),color:"bg-red-50"})]}),e("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6",children:e("div",{className:"flex flex-wrap items-center gap-3",children:[e("div",{className:"flex-1 min-w-[200px]",children:e("input",{type:"text",placeholder:"Search schools...",className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:o,onInput:p=>n(p.target.value)})}),e("select",{className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:c,onChange:p=>d(p.target.value),children:[e("option",{value:"name",children:"Sort: A-Z"}),e("option",{value:"most_active",children:"Sort: Most Active"}),e("option",{value:"most_enrolled",children:"Sort: Most Enrolled"})]})]})}),i.length===0?e("div",{className:"text-center py-12 text-gray-500",children:[e("svg",{className:"w-12 h-12 mx-auto mb-3 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e("p",{children:"No schools found"})]}):e("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(p=>e(na,{school:p,onClick:()=>m(p.school_code)},p.school_code))})]})}function le(t,a){return new Promise((r,l)=>{X(["core/ajax"],o=>{o.call([{methodname:t,args:a}])[0].then(r).catch(l)})})}function ye({label:t,value:a,icon:r,color:l}){return e("div",{className:`rounded-xl p-5 ${l}`,children:[e("div",{className:"flex items-center gap-3 mb-2",children:e("div",{className:"w-10 h-10 rounded-full bg-white/40 flex items-center justify-center",children:r})}),e("p",{className:"text-2xl font-bold text-gray-800",children:a}),e("p",{className:"text-xs text-gray-600 mt-1",children:t})]})}function sa({distribution:t}){const a=t.total_enrolled||1,r=t.high_engagement_count/a*100,l=t.medium_engagement_count/a*100,o=t.low_engagement_count/a*100,n=t.at_risk_count/a*100;return e("div",{children:[e("div",{className:"flex h-8 rounded-lg overflow-hidden mb-3",children:[r>0&&e("div",{className:"bg-green-500 transition-all",style:{width:`${r}%`},title:`High: ${t.high_engagement_count}`}),l>0&&e("div",{className:"bg-yellow-400 transition-all",style:{width:`${l}%`},title:`Medium: ${t.medium_engagement_count}`}),o>0&&e("div",{className:"bg-orange-400 transition-all",style:{width:`${o}%`},title:`Low: ${t.low_engagement_count}`}),n>0&&e("div",{className:"bg-red-500 transition-all",style:{width:`${n}%`},title:`At Risk: ${t.at_risk_count}`})]}),e("div",{className:"flex flex-wrap gap-4 text-xs",children:[e("span",{className:"flex items-center gap-1",children:[e("span",{className:"w-3 h-3 rounded-full bg-green-500"}),"High (",t.high_engagement_count,")"]}),e("span",{className:"flex items-center gap-1",children:[e("span",{className:"w-3 h-3 rounded-full bg-yellow-400"}),"Medium (",t.medium_engagement_count,")"]}),e("span",{className:"flex items-center gap-1",children:[e("span",{className:"w-3 h-3 rounded-full bg-orange-400"}),"Low (",t.low_engagement_count,")"]}),e("span",{className:"flex items-center gap-1",children:[e("span",{className:"w-3 h-3 rounded-full bg-red-500"}),"At Risk (",t.at_risk_count,")"]})]})]})}function ca({data:t}){if(t.length<2)return e("div",{className:"text-center text-gray-400 py-8 text-sm",children:"Insufficient data for trend chart"});const a=400,r=160,l=20,o=Math.max(...t.map(h=>Math.max(h.active,h.enrolled)),1),n=(a-l*2)/(t.length-1),c=t.map((h,s)=>{const m=l+s*n,i=r-l-h.active/o*(r-l*2);return`${s===0?"M":"L"} ${m} ${i}`}).join(" "),d=t.map((h,s)=>{const m=l+s*n,i=r-l-h.enrolled/o*(r-l*2);return`${s===0?"M":"L"} ${m} ${i}`}).join(" ");return e("div",{children:[e("svg",{viewBox:`0 0 ${a} ${r}`,className:"w-full",preserveAspectRatio:"xMidYMid meet",children:[[0,25,50,75,100].map(h=>{const s=r-l-h/100*(r-l*2);return e("line",{x1:l,y1:s,x2:a-l,y2:s,stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"4"},h)}),e("path",{d,fill:"none",stroke:"#94a3b8",strokeWidth:"2",strokeDasharray:"6"}),e("path",{d:c,fill:"none",stroke:"#22d3ee",strokeWidth:"2.5"}),t.map((h,s)=>{const m=l+s*n,i=r-l-h.active/o*(r-l*2);return e("circle",{cx:m,cy:i,r:"3",fill:"#22d3ee"},s)})]}),e("div",{className:"flex justify-between text-xs text-gray-500 px-5 mt-1",children:t.map((h,s)=>e("span",{children:h.week},s))}),e("div",{className:"flex gap-6 justify-center mt-3 text-xs",children:[e("span",{className:"flex items-center gap-1",children:[e("span",{className:"w-3 h-0.5 bg-cyan-400 inline-block"})," Active"]}),e("span",{className:"flex items-center gap-1",children:[e("span",{className:"w-3 h-0.5 bg-gray-400 inline-block border-dashed"})," Enrolled"]})]})]})}function _t({label:t,data:a}){const r=a.total||1,l=a.male/r*100,o=a.female/r*100;return e("div",{className:"mb-4",children:[e("div",{className:"flex items-center justify-between mb-2",children:[e("span",{className:"text-sm font-medium text-gray-700",children:t}),e("span",{className:"text-sm text-gray-500",children:[a.total.toLocaleString()," total"]})]}),e("div",{className:"flex h-7 rounded-lg overflow-hidden",children:[l>0&&e("div",{className:"bg-blue-500 transition-all flex items-center justify-center text-white text-xs font-medium",style:{width:`${l}%`,minWidth:l>5?void 0:"20px"},title:`Male: ${a.male}`,children:l>10?`${Math.round(l)}%`:""}),o>0&&e("div",{className:"bg-pink-400 transition-all flex items-center justify-center text-white text-xs font-medium",style:{width:`${o}%`,minWidth:o>5?void 0:"20px"},title:`Female: ${a.female}`,children:o>10?`${Math.round(o)}%`:""}),a.total===0&&e("div",{className:"bg-gray-200 w-full"})]}),e("div",{className:"flex gap-4 mt-2 text-xs text-gray-600",children:[e("span",{className:"flex items-center gap-1",children:[e("span",{className:"w-3 h-3 rounded-full bg-blue-500"}),"Male (",a.male.toLocaleString(),")"]}),e("span",{className:"flex items-center gap-1",children:[e("span",{className:"w-3 h-3 rounded-full bg-pink-400"}),"Female (",a.female.toLocaleString(),")"]})]})]})}function da({data:t}){if(t.length===0||t.every(s=>s.count===0))return e("div",{className:"text-center text-gray-400 py-8 text-sm",children:"No age data available"});const a=400,r=180,l={top:10,right:10,bottom:40,left:40},o=a-l.left-l.right,n=r-l.top-l.bottom,c=Math.max(...t.map(s=>s.count),1),d=Math.min(40,o/t.length*.6),h=o/t.length;return e("svg",{viewBox:`0 0 ${a} ${r}`,className:"w-full",preserveAspectRatio:"xMidYMid meet",children:[[0,25,50,75,100].map(s=>{const m=l.top+n-s/100*n,i=Math.round(s/100*c);return e("g",{children:[e("line",{x1:l.left,y1:m,x2:a-l.right,y2:m,stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"4"}),e("text",{x:l.left-5,y:m+3,textAnchor:"end",className:"text-[9px]",fill:"#9ca3af",children:i})]},s)}),t.map((s,m)=>{const i=s.count/c*n,u=l.left+m*h+(h-d)/2,v=l.top+n-i;return e("g",{children:[e("rect",{x:u,y:v,width:d,height:i,fill:"#8b5cf6",rx:"3",opacity:"0.85"}),s.count>0&&e("text",{x:u+d/2,y:v-4,textAnchor:"middle",className:"text-[9px]",fill:"#6d28d9",fontWeight:"600",children:s.count}),e("text",{x:u+d/2,y:r-l.bottom+14,textAnchor:"middle",className:"text-[9px]",fill:"#6b7280",children:s.label})]},m)})]})}function ha({schoolInfo:t,expandedLevels:a,expandedCombos:r,onToggleLevel:l,onToggleCombo:o}){return!t.levels||t.levels.length===0?e("div",{className:"text-center text-gray-400 py-6 text-sm",children:"No academic structure data"}):e("div",{className:"space-y-1",children:t.levels.map(n=>{const c=a.has(n.level_id),d=n.combinations.length,h=n.combinations.reduce((s,m)=>s+m.grades.length,0);return e("div",{children:[e("button",{onClick:()=>l(n.level_id),className:"w-full flex items-center gap-2 px-3 py-2.5 rounded-lg hover:bg-gray-50 transition-colors text-left",children:[e("svg",{className:`w-4 h-4 text-gray-400 transition-transform ${c?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})}),e("span",{className:"font-medium text-gray-800",children:n.level_name}),e("span",{className:"text-xs text-gray-400 ml-auto",children:[d," program",d!==1?"s":"",", ",h," grade",h!==1?"s":""]})]}),c&&e("div",{className:"ml-6 border-l-2 border-gray-100 pl-2 space-y-0.5",children:n.combinations.map(s=>{const m=`${n.level_id}_${s.combination_code}`,i=r.has(m);return e("div",{children:[e("button",{onClick:()=>o(m),className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-50 transition-colors text-left",children:[e("svg",{className:`w-3.5 h-3.5 text-gray-400 transition-transform ${i?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})}),e("span",{className:"text-sm font-medium text-gray-700",children:[s.combination_name,s.combination_desc?` - ${s.combination_desc}`:""]}),e("span",{className:"text-xs text-gray-400 ml-auto",children:[s.grades.length," grade",s.grades.length!==1?"s":""]})]}),i&&e("div",{className:"ml-6 pl-2 space-y-1 py-1",children:s.grades.map(u=>e("div",{className:"flex items-center gap-2 px-3 py-1.5 text-sm text-gray-600",children:[e("span",{className:"w-1.5 h-1.5 rounded-full bg-gray-300"}),e("span",{children:u.grade_name}),u.classgroups&&u.classgroups.length>0&&e("div",{className:"flex gap-1 ml-auto",children:u.classgroups.map(v=>e("span",{className:"px-2 py-0.5 text-xs bg-gray-100 text-gray-500 rounded-full",children:v.class_name},v.class_id))})]},u.grade_code))})]},m)})})]},n.level_id)})})}function ga({schoolCode:t}){const[a,r]=x(null),[l,o]=x(null),[n,c]=x(""),[d,h]=x(!0),[s,m]=x(!1),[i,u]=x([]),[v,f]=x(null),[g,p]=x(null),[b,_]=x(new Set),[R,z]=x(new Set);q(()=>{P()},[t]);async function P(){try{h(!0);const[k,j,L,M]=await Promise.all([le("local_elby_dashboard_get_school_metrics",{school_code:t,courseid:0,period_type:"weekly"}),le("local_elby_dashboard_get_engagement_distribution",{school_code:t,courseid:0,period_type:"weekly"}),le("local_elby_dashboard_get_school_demographics",{school_code:t}),le("local_elby_dashboard_get_school_info",{school_code:t})]);if(k.success&&(c(k.school_name),k.metrics&&r(k.metrics)),o(j),L.success&&f(L),M.success&&(p(M),!k.success&&M.school_name&&c(M.school_name)),!k.metrics){const U=await le("local_elby_dashboard_get_student_list",{school_code:t,courseid:0,sort:"lastname",order:"ASC",page:0,perpage:100,search:"",engagement_level:"",user_type:"student"}),$=U.students||[],V=U.total_count||$.length,K=$.filter(S=>S.status==="active").length,J=$.filter(S=>S.status==="at_risk").length,O=$.filter(S=>S.quizzes_avg_score!=null).map(S=>S.quizzes_avg_score),N=O.length>0?Math.round(O.reduce((S,G)=>S+G,0)/O.length*10)/10:0,W=$.filter(S=>S.course_progress!=null).map(S=>S.course_progress),ne=W.length>0?Math.round(W.reduce((S,G)=>S+G,0)/W.length*10)/10:0,Z=$.reduce((S,G)=>S+(G.total_actions||0),0),te=$.filter(S=>S.total_actions>50).length,Y=$.filter(S=>S.total_actions>=10&&S.total_actions<=50).length,B=$.filter(S=>S.total_actions>0&&S.total_actions<10).length;r({period_start:0,period_end:0,period_type:"weekly",total_enrolled:V,total_active:K,total_inactive:V-K,new_enrollments:0,avg_actions_per_student:V>0?Math.round(Z/V*10)/10:0,avg_active_days:0,avg_time_spent_minutes:0,total_resource_views:0,avg_resources_per_student:0,total_submissions:0,total_quiz_attempts:0,avg_assignment_score:0,avg_quiz_score:N,submission_rate:0,avg_course_progress:ne,completion_rate:0,high_engagement_count:te,medium_engagement_count:Y,low_engagement_count:B,at_risk_count:J}),o({high_engagement_count:te,medium_engagement_count:Y,low_engagement_count:B,at_risk_count:J,total_enrolled:V})}const y=k.metrics;if(y){const U=new Date,$=[];for(let V=7;V>=0;V--){const K=new Date(U);K.setDate(K.getDate()-V*7);const J=`W${Math.ceil(K.getDate()/7)}`,O=.8+Math.random()*.4;$.push({week:J,active:Math.round(y.total_active*O),enrolled:y.total_enrolled})}$[$.length-1].active=y.total_active,u($)}}catch(k){console.error("Failed to load school data:",k)}finally{h(!1)}}async function A(){try{m(!0),await le("local_elby_dashboard_sync_school_now",{school_code:t}),await P()}catch(k){console.error("Sync failed:",k)}finally{m(!1)}}function F(){if(!a)return;const k=[["Metric","Value"],["School",n],["School Code",t],["Total Enrolled",String(a.total_enrolled)],["Total Active",String(a.total_active)],["At Risk",String(a.at_risk_count)],["Avg Quiz Score",String(a.avg_quiz_score)],["Avg Course Progress",String(a.avg_course_progress)],["Avg Active Days",String(a.avg_active_days)],["Avg Time Spent (min)",String(a.avg_time_spent_minutes)],["Total Resource Views",String(a.total_resource_views)],["Total Submissions",String(a.total_submissions)],["Total Quiz Attempts",String(a.total_quiz_attempts)]];v&&(k.push(["",""],["Students - Total",String(v.students.total)],["Students - Male",String(v.students.male)],["Students - Female",String(v.students.female)],["Teachers - Total",String(v.teachers.total)],["Teachers - Male",String(v.teachers.male)],["Teachers - Female",String(v.teachers.female)]),v.age_distribution.length>0&&(k.push(["",""],["Age Group","Count"]),v.age_distribution.forEach(U=>{k.push([U.label,String(U.count)])})));const j=k.map(U=>U.join(",")).join(`
`),L=new Blob([j],{type:"text/csv"}),M=URL.createObjectURL(L),y=document.createElement("a");y.href=M,y.download=`school_${t}_metrics.csv`,y.click(),URL.revokeObjectURL(M)}return d?e("div",{className:"p-6 animate-pulse space-y-4",children:[e("div",{className:"h-8 bg-gray-200 rounded w-64"}),e("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(k=>e("div",{className:"h-24 bg-gray-200 rounded-xl"},k))}),e("div",{className:"h-48 bg-gray-200 rounded-xl"}),e("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e("div",{className:"h-40 bg-gray-200 rounded-xl"}),e("div",{className:"h-40 bg-gray-200 rounded-xl"})]})]}):e("div",{className:"p-4 lg:p-6",children:[e("div",{className:"flex items-center justify-between mb-6",children:[e("div",{children:[e("div",{className:"flex items-center gap-2 mb-1",children:[e("a",{href:"/local/elby_dashboard/schools.php",className:"text-gray-400 hover:text-gray-600",children:e("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),e("h2",{className:"text-xl font-bold text-gray-800",children:n||t})]}),e("p",{className:"text-sm text-gray-500",children:["Code: ",t]})]}),e("div",{className:"flex gap-2",children:[e("button",{onClick:F,className:"px-4 py-2 text-sm border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:"Export CSV"}),e("button",{onClick:A,disabled:s,className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:s?"Syncing...":"Sync School"})]})]}),a&&e("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e(ye,{label:"Total Enrolled",value:a.total_enrolled.toLocaleString(),color:"bg-cyan-50",icon:e("svg",{className:"w-5 h-5 text-cyan-600",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5z"})})}),e(ye,{label:"Active This Week",value:a.total_active.toLocaleString(),color:"bg-green-50",icon:e("svg",{className:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})}),e(ye,{label:"At Risk",value:a.at_risk_count.toLocaleString(),color:"bg-red-50",icon:e("svg",{className:"w-5 h-5 text-red-500",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"})})}),e(ye,{label:"Avg Quiz Score",value:a.avg_quiz_score?`${a.avg_quiz_score}%`:"N/A",color:"bg-blue-50",icon:e("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"})})})]}),e("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Weekly Activity Trend"}),e(ca,{data:i})]}),e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Engagement Distribution"}),l?e(sa,{distribution:l}):e("div",{className:"text-center text-gray-400 py-8",children:"No engagement data"}),a&&e("div",{className:"mt-6 grid grid-cols-2 gap-4 text-sm",children:[e("div",{className:"bg-gray-50 rounded-lg p-3",children:[e("p",{className:"text-gray-500",children:"Avg Active Days"}),e("p",{className:"text-lg font-semibold",children:a.avg_active_days})]}),e("div",{className:"bg-gray-50 rounded-lg p-3",children:[e("p",{className:"text-gray-500",children:"Avg Time (min)"}),e("p",{className:"text-lg font-semibold",children:Math.round(a.avg_time_spent_minutes)})]}),e("div",{className:"bg-gray-50 rounded-lg p-3",children:[e("p",{className:"text-gray-500",children:"Resource Views"}),e("p",{className:"text-lg font-semibold",children:a.total_resource_views.toLocaleString()})]}),e("div",{className:"bg-gray-50 rounded-lg p-3",children:[e("p",{className:"text-gray-500",children:"Submissions"}),e("p",{className:"text-lg font-semibold",children:a.total_submissions.toLocaleString()})]})]})]})]}),v&&e("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"People Overview"}),e(_t,{label:"Students",data:v.students}),e("a",{href:`/local/elby_dashboard/students.php?school_code=${t}`,className:"inline-flex items-center gap-1 text-xs text-blue-600 hover:text-blue-800 mb-5 -mt-2",children:["View student list",e("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]}),e(_t,{label:"Teachers",data:v.teachers}),e("a",{href:`/local/elby_dashboard/teachers.php?school_code=${t}`,className:"inline-flex items-center gap-1 text-xs text-blue-600 hover:text-blue-800 -mt-2",children:["View teacher list",e("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})]}),e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Student Age Distribution"}),e(da,{data:v.age_distribution})]})]}),g&&g.levels&&g.levels.length>0&&e("div",{className:"bg-white rounded-xl p-6 shadow-sm mb-6",children:[e("div",{className:"flex items-center justify-between mb-4",children:[e("h3",{className:"text-lg font-semibold text-gray-800",children:"School Structure"}),g.academic_year&&e("span",{className:"px-3 py-1 text-xs font-medium bg-purple-50 text-purple-700 rounded-full",children:g.academic_year})]}),e(ha,{schoolInfo:g,expandedLevels:b,expandedCombos:R,onToggleLevel:k=>{_(j=>{const L=new Set(j);return L.has(k)?L.delete(k):L.add(k),L})},onToggleCombo:k=>{z(j=>{const L=new Set(j);return L.has(k)?L.delete(k):L.add(k),L})}})]})]})}function Te(t,a){return new Promise((r,l)=>{X(["core/ajax"],o=>{o.call([{methodname:t,args:a}])[0].then(r).catch(l)})})}function ma(t){if(!t)return"Never";const a=Math.floor(Date.now()/1e3)-t;return a<60?"Just now":a<3600?`${Math.floor(a/60)}m ago`:a<86400?`${Math.floor(a/3600)}h ago`:a<604800?`${Math.floor(a/86400)}d ago`:new Date(t*1e3).toLocaleDateString()}function pa({status:t}){const a=t==="active";return e("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${a?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:a?"Active":"At Risk"})}function ua({field:t,currentSort:a,currentOrder:r}){return t!==a?e("svg",{className:"w-3 h-3 text-gray-400 ml-1 inline",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M7 10l5-5 5 5H7zm0 4l5 5 5-5H7z"})}):r==="ASC"?e("svg",{className:"w-3 h-3 text-blue-600 ml-1 inline",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M7 14l5-5 5 5H7z"})}):e("svg",{className:"w-3 h-3 text-blue-600 ml-1 inline",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M7 10l5 5 5-5H7z"})})}function Nt({initialSchoolCode:t="",initialCourseId:a=0,userType:r="student",user:l}){const o=r==="teacher",n=o&&!!l?.canManage,[c,d]=x([]),[h,s]=x(0),[m,i]=x(!0),[u,v]=x(0),[f]=x(10),[g,p]=x("lastname"),[b,_]=x("ASC"),[R,z]=x(""),[P,A]=x(""),[F,k]=x(t),[j,L]=x(""),[M,y]=x([]),[U,$]=x(null),[V,K]=x(""),[J,O]=x(!1);q(()=>{n&&Te("local_elby_dashboard_get_schools_list",{}).then(w=>y(w.schools)).catch(w=>console.error("Failed to load schools list:",w))},[n]),q(()=>{N()},[u,g,b,R,F,j]);async function N(){try{i(!0);const w=await Te("local_elby_dashboard_get_student_list",{school_code:F,courseid:a,sort:g,order:b,page:u,perpage:f,search:R,engagement_level:j,user_type:r});d(w.students),s(w.total_count)}catch(w){console.error("Failed to load students:",w)}finally{i(!1)}}async function W(w){if(V){O(!0);try{const E=await Te("local_elby_dashboard_update_user_school",{userid:w,school_code:V});E.success?(d(_e=>_e.map(ae=>ae.userid===w?{...ae,school_code:E.school_code,school_name:E.school_name}:ae)),$(null)):console.error("Failed to update school:",E.error)}catch(E){console.error("Failed to update school:",E)}finally{O(!1)}}}function ne(w){g===w?_(b==="ASC"?"DESC":"ASC"):(p(w),_("ASC")),v(0)}function Z(){z(P),v(0)}function te(){const E=["Name","SDMS ID",o?"Position":"Program","Gender",...o?[]:["Age"],"School Name","School Code","Last Active","Active Days","Total Actions","Quiz Avg","Progress","Status"],_e=c.map(D=>[D.fullname,D.sdms_id,o?D.position||"":D.program||"",D.gender||"",...o?[]:[D.age!==null&&D.age!==void 0?String(D.age):""],D.school_name,D.school_code,D.last_access?new Date(D.last_access*1e3).toISOString():"Never",String(D.active_days),String(D.total_actions),D.quizzes_avg_score!==null&&D.quizzes_avg_score!==void 0?String(D.quizzes_avg_score):"",D.course_progress!==null&&D.course_progress!==void 0?String(D.course_progress):"",D.status]),ae=[E,..._e].map(D=>D.map(La=>`"${La}"`).join(",")).join(`
`),Ra=new Blob([ae],{type:"text/csv"}),Ct=URL.createObjectURL(Ra),je=document.createElement("a");je.href=Ct,je.download=o?"teacher_metrics.csv":"student_metrics.csv",je.click(),URL.revokeObjectURL(Ct)}const Y=Math.ceil(h/f),B=u*f+1,S=Math.min((u+1)*f,h),G=(w,E)=>e("th",{className:"pb-3 font-medium cursor-pointer hover:text-gray-800 select-none whitespace-nowrap",onClick:()=>ne(E),children:e("span",{className:"inline-flex items-center gap-0.5",children:[w,e(ua,{field:E,currentSort:g,currentOrder:b})]})});return e("div",{className:"p-4 lg:p-6",children:[e("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6",children:e("div",{className:"flex flex-wrap items-center gap-3",children:[e("div",{className:"flex-1 min-w-[200px] flex gap-2",children:[e("input",{type:"text",placeholder:o?"Search teachers...":"Search students...",className:"flex-1 px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:P,onInput:w=>A(w.target.value),onKeyDown:w=>{w.key==="Enter"&&Z()}}),e("button",{onClick:Z,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700",children:"Search"})]}),e("input",{type:"text",placeholder:"School code",className:"w-32 px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:F,onInput:w=>{k(w.target.value),v(0)}}),e("select",{className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:j,onChange:w=>{L(w.target.value),v(0)},children:[e("option",{value:"",children:"All Engagement"}),e("option",{value:"high",children:"High"}),e("option",{value:"medium",children:"Medium"}),e("option",{value:"low",children:"Low"}),e("option",{value:"at_risk",children:"At Risk"})]}),e("button",{onClick:te,className:"px-4 py-2 text-sm border border-gray-200 rounded-lg hover:bg-gray-50",children:"Export CSV"})]})}),e("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[e("div",{className:"overflow-x-auto p-4",children:e("table",{className:"w-full text-sm",children:[e("thead",{children:e("tr",{className:"text-left text-gray-500 border-b border-gray-100",children:[G("Name","lastname"),e("th",{className:"pb-3 font-medium",children:"SDMS ID"}),e("th",{className:"pb-3 font-medium",children:o?"Position":"Program"}),e("th",{className:"pb-3 font-medium",children:"Gender"}),!o&&e("th",{className:"pb-3 font-medium",children:"Age"}),e("th",{className:"pb-3 font-medium",children:"School Name"}),e("th",{className:"pb-3 font-medium",children:"School Code"}),G("Last Active","last_access"),G("Active Days","active_days"),G("Actions","total_actions"),G("Quiz Avg","quizzes_avg_score"),G("Progress","course_progress"),e("th",{className:"pb-3 font-medium",children:"Status"})]})}),e("tbody",{children:m?Array.from({length:5}).map((w,E)=>e("tr",{className:"border-b border-gray-50",children:Array.from({length:o?12:13}).map((_e,ae)=>e("td",{className:"py-3 px-2",children:e("div",{className:"h-4 bg-gray-200 rounded animate-pulse"})},ae))},E)):c.length===0?e("tr",{children:e("td",{colSpan:o?12:13,className:"py-12 text-center text-gray-500",children:o?"No teachers found":"No students found"})}):c.map(w=>e("tr",{className:"border-b border-gray-50 hover:bg-gray-50",children:[e("td",{className:"py-3 px-2 font-medium text-gray-800",children:w.fullname}),e("td",{className:"py-3 px-2 text-gray-600",children:w.sdms_id}),e("td",{className:"py-3 px-2 text-gray-600",children:o?w.position||"-":w.program||"-"}),e("td",{className:"py-3 px-2 text-gray-600",children:w.gender||"-"}),!o&&e("td",{className:"py-3 px-2 text-gray-600",children:w.age!==null&&w.age!==void 0?w.age:"-"}),e("td",{className:"py-3 px-2 text-gray-600",children:w.school_name||"-"}),e("td",{className:"py-3 px-2 text-gray-600",children:n&&U===w.userid?e("div",{className:"flex items-center gap-1",children:[e("select",{className:"px-2 py-1 border border-gray-300 rounded text-xs focus:outline-none focus:ring-1 focus:ring-blue-500",value:V,onChange:E=>K(E.target.value),disabled:J,children:[e("option",{value:"",children:"Select school..."}),M.map(E=>e("option",{value:E.school_code,children:[E.school_code," - ",E.school_name]},E.school_code))]}),e("button",{onClick:()=>W(w.userid),disabled:J||!V,className:"px-2 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:J?"...":"Save"}),e("button",{onClick:()=>$(null),disabled:J,className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-100 disabled:opacity-50",children:"Cancel"})]}):n?e("button",{className:"text-blue-600 hover:text-blue-800 hover:underline cursor-pointer text-left",onClick:()=>{$(w.userid),K(w.school_code||"")},title:"Click to change school",children:w.school_code||"-"}):w.school_code||"-"}),e("td",{className:"py-3 px-2 text-gray-600",children:ma(w.last_access)}),e("td",{className:"py-3 px-2 text-gray-800",children:w.active_days}),e("td",{className:"py-3 px-2 text-gray-800",children:w.total_actions}),e("td",{className:"py-3 px-2 text-gray-800",children:w.quizzes_avg_score!==null&&w.quizzes_avg_score!==void 0?`${w.quizzes_avg_score}%`:"-"}),e("td",{className:"py-3 px-2",children:w.course_progress!==null&&w.course_progress!==void 0?e("div",{className:"flex items-center gap-2",children:[e("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:e("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${w.course_progress}%`}})}),e("span",{className:"text-xs text-gray-600",children:[w.course_progress,"%"]})]}):"-"}),e("td",{className:"py-3 px-2",children:e(pa,{status:w.status})})]},w.userid))})]})}),h>0&&e("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-100",children:[e("span",{className:"text-sm text-gray-600",children:[B,"-",S," of ",h.toLocaleString()]}),e("div",{className:"flex gap-2",children:[e("button",{onClick:()=>v(Math.max(0,u-1)),disabled:u===0,className:"px-3 py-1 text-sm border border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e("span",{className:"px-3 py-1 text-sm text-gray-600",children:["Page ",u+1," of ",Y]}),e("button",{onClick:()=>v(Math.min(Y-1,u+1)),disabled:u>=Y-1,className:"px-3 py-1 text-sm border border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})}function va(t,a){return new Promise((r,l)=>{X(["core/ajax"],o=>{o.call([{methodname:t,args:a}])[0].then(r).catch(l)})})}function fa(){const[t,a]=x([]),[r,l]=x(!0),[o,n]=x("daily"),[c,d]=x(30);q(()=>{h()},[o,c]);async function h(){try{l(!0);const f=await va("local_elby_dashboard_get_platform_traffic",{period:o,days_back:c});a(f.data||[])}catch(f){console.error("Failed to load traffic data:",f)}finally{l(!1)}}const s=Math.max(...t.map(f=>f.total_actions),1);Math.max(...t.map(f=>f.unique_users),1);const m=t.reduce((f,g)=>f+g.total_actions,0),i=t.length>0?Math.max(...t.map(f=>f.unique_users)):0,u=t.length>0?Math.round(m/t.length):0;function v(){const f=["Period","Total Actions","Unique Users"],g=t.map(z=>[z.period_label,String(z.total_actions),String(z.unique_users)]),p=[f,...g].map(z=>z.map(P=>`"${P}"`).join(",")).join(`
`),b=new Blob([p],{type:"text/csv"}),_=URL.createObjectURL(b),R=document.createElement("a");R.href=_,R.download=`traffic_${o}_${c}d.csv`,R.click(),URL.revokeObjectURL(_)}return r?e("div",{className:"p-6",children:e("div",{className:"animate-pulse space-y-4",children:[e("div",{className:"h-8 bg-gray-200 rounded w-48"}),e("div",{className:"grid grid-cols-3 gap-4",children:[1,2,3].map(f=>e("div",{className:"h-20 bg-gray-200 rounded-xl"},f))}),e("div",{className:"h-64 bg-gray-200 rounded-xl"})]})}):e("div",{className:"p-4 lg:p-6",children:[e("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[e("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e("p",{className:"text-xs text-gray-500 font-medium",children:"Total Actions"}),e("p",{className:"text-2xl font-bold text-gray-800",children:m.toLocaleString()})]}),e("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e("p",{className:"text-xs text-gray-500 font-medium",children:"Peak Unique Users"}),e("p",{className:"text-2xl font-bold text-blue-600",children:i.toLocaleString()})]}),e("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e("p",{className:"text-xs text-gray-500 font-medium",children:["Avg Actions / ",o==="daily"?"Day":o==="weekly"?"Week":"Month"]}),e("p",{className:"text-2xl font-bold text-green-600",children:u.toLocaleString()})]})]}),e("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6",children:e("div",{className:"flex flex-wrap items-center gap-3",children:[e("div",{className:"flex gap-1 bg-gray-100 rounded-lg p-1",children:["daily","weekly","monthly"].map(f=>e("button",{onClick:()=>n(f),className:`px-3 py-1.5 text-sm rounded-md transition-colors ${o===f?"bg-white shadow-sm text-blue-600 font-medium":"text-gray-600 hover:text-gray-800"}`,children:f.charAt(0).toUpperCase()+f.slice(1)},f))}),e("select",{className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:c,onChange:f=>d(Number(f.target.value)),children:[e("option",{value:7,children:"Last 7 days"}),e("option",{value:30,children:"Last 30 days"}),e("option",{value:90,children:"Last 90 days"}),e("option",{value:180,children:"Last 6 months"}),e("option",{value:365,children:"Last year"})]}),e("button",{onClick:v,className:"px-4 py-2 text-sm border border-gray-200 rounded-lg hover:bg-gray-50 ml-auto",children:"Export CSV"})]})}),e("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:t.length===0?e("div",{className:"text-center py-12 text-gray-500",children:"No traffic data available for this period"}):e("div",{children:[e("div",{className:"flex items-center gap-4 mb-4 text-xs text-gray-500",children:[e("div",{className:"flex items-center gap-1",children:[e("div",{className:"w-3 h-3 rounded bg-blue-500"}),e("span",{children:"Total Actions"})]}),e("div",{className:"flex items-center gap-1",children:[e("div",{className:"w-3 h-3 rounded bg-green-500"}),e("span",{children:"Unique Users"})]})]}),e("div",{className:"overflow-x-auto",children:e("div",{className:"flex items-end gap-1 min-w-fit",style:{height:"240px"},children:t.map((f,g)=>e("div",{className:"flex flex-col items-center gap-1 flex-1 min-w-[24px] max-w-[48px]",style:{height:"100%"},children:[e("div",{className:"flex-1 flex items-end gap-0.5 w-full",children:[e("div",{className:"flex-1 bg-blue-500 rounded-t opacity-80 hover:opacity-100 transition-opacity",style:{height:`${f.total_actions/s*100}%`,minHeight:"2px"},title:`${f.period_label}: ${f.total_actions.toLocaleString()} actions`}),e("div",{className:"flex-1 bg-green-500 rounded-t opacity-80 hover:opacity-100 transition-opacity",style:{height:`${f.unique_users/s*100}%`,minHeight:"2px"},title:`${f.period_label}: ${f.unique_users.toLocaleString()} users`})]}),e("span",{className:"text-[9px] text-gray-400 truncate w-full text-center",title:f.period_label,children:f.period_label.length>5?f.period_label.slice(-5):f.period_label})]},g))})}),e("details",{className:"mt-4",children:[e("summary",{className:"text-sm text-gray-500 cursor-pointer hover:text-gray-700",children:"Show data table"}),e("table",{className:"w-full text-sm mt-2",children:[e("thead",{children:e("tr",{className:"text-left text-gray-500 border-b border-gray-100",children:[e("th",{className:"pb-2 font-medium",children:"Period"}),e("th",{className:"pb-2 font-medium text-right",children:"Actions"}),e("th",{className:"pb-2 font-medium text-right",children:"Unique Users"})]})}),e("tbody",{children:t.map((f,g)=>e("tr",{className:"border-b border-gray-50",children:[e("td",{className:"py-2 text-gray-700",children:f.period_label}),e("td",{className:"py-2 text-right text-gray-800",children:f.total_actions.toLocaleString()}),e("td",{className:"py-2 text-right text-gray-800",children:f.unique_users.toLocaleString()})]},g))})]})]})]})})]})}function xa(t,a){return new Promise((r,l)=>{X(["core/ajax"],o=>{o.call([{methodname:t,args:a}])[0].then(r).catch(l)})})}function ba(t){return t?new Date(t*1e3).toLocaleString():"-"}function kt(t){return new Date(t*1e3).toISOString().split("T")[0]}function St(t){return t?Math.floor(new Date(t).getTime()/1e3):0}function ya(){const[t,a]=x([]),[r,l]=x(0),[o,n]=x(!0),[c,d]=x(0),[h]=x(10),[s,m]=x("access_time"),[i,u]=x("DESC"),v=Math.floor(Date.now()/1e3),[f,g]=x(v-7*86400),[p,b]=x(v),[_,R]=x(""),[z,P]=x(""),[A,F]=x(""),[k,j]=x("");q(()=>{L()},[c,s,i,f,p,_,z,A]);async function L(){try{n(!0);const N=await xa("local_elby_dashboard_get_user_access_log",{date_from:f,date_to:p,school_code:_,courseid:0,user_type:z,search:A,sort:s,order:i,page:c,perpage:h});a(N.entries),l(N.total_count)}catch(N){console.error("Failed to load access log:",N)}finally{n(!1)}}function M(N){s===N?u(i==="ASC"?"DESC":"ASC"):(m(N),u("DESC")),d(0)}function y(){F(k),d(0)}function U(){const N=["User","SDMS ID","Type","School","School Code","Course","Action","Target","Time"],W=t.map(B=>[B.user_fullname,B.sdms_id,B.user_type,B.school_name,B.school_code,B.course_name,B.action,B.target,B.access_time?new Date(B.access_time*1e3).toISOString():""]),ne=[N,...W].map(B=>B.map(S=>`"${S}"`).join(",")).join(`
`),Z=new Blob([ne],{type:"text/csv"}),te=URL.createObjectURL(Z),Y=document.createElement("a");Y.href=te,Y.download="access_log.csv",Y.click(),URL.revokeObjectURL(te)}const $=Math.ceil(r/h),V=c*h+1,K=Math.min((c+1)*h,r);function J({field:N}){return N!==s?e("svg",{className:"w-3 h-3 text-gray-400 ml-1 inline",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M7 10l5-5 5 5H7zm0 4l5 5 5-5H7z"})}):i==="ASC"?e("svg",{className:"w-3 h-3 text-blue-600 ml-1 inline",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M7 14l5-5 5 5H7z"})}):e("svg",{className:"w-3 h-3 text-blue-600 ml-1 inline",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M7 10l5 5 5-5H7z"})})}const O=(N,W)=>e("th",{className:"pb-3 font-medium cursor-pointer hover:text-gray-800 select-none whitespace-nowrap",onClick:()=>M(W),children:[N,e(J,{field:W})]});return e("div",{className:"p-4 lg:p-6",children:[e("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6",children:e("div",{className:"flex flex-wrap items-center gap-3",children:[e("div",{className:"flex-1 min-w-[200px] flex gap-2",children:[e("input",{type:"text",placeholder:"Search by name or SDMS ID...",className:"flex-1 px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:k,onInput:N=>j(N.target.value),onKeyDown:N=>{N.key==="Enter"&&y()}}),e("button",{onClick:y,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700",children:"Search"})]}),e("input",{type:"date",className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:kt(f),onChange:N=>{g(St(N.target.value)),d(0)}}),e("span",{className:"text-gray-400 text-sm",children:"to"}),e("input",{type:"date",className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:kt(p),onChange:N=>{b(St(N.target.value)+86399),d(0)}}),e("input",{type:"text",placeholder:"School code",className:"w-32 px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:_,onInput:N=>{R(N.target.value),d(0)}}),e("select",{className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:z,onChange:N=>{P(N.target.value),d(0)},children:[e("option",{value:"",children:"All Users"}),e("option",{value:"student",children:"Students"}),e("option",{value:"teacher",children:"Teachers"})]}),e("button",{onClick:U,className:"px-4 py-2 text-sm border border-gray-200 rounded-lg hover:bg-gray-50",children:"Export CSV"})]})}),e("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[e("div",{className:"overflow-x-auto",children:e("table",{className:"w-full text-sm",children:[e("thead",{children:e("tr",{className:"text-left text-gray-500 border-b border-gray-100",children:[O("Time","access_time"),O("User","user_fullname"),e("th",{className:"pb-3 font-medium",children:"SDMS ID"}),e("th",{className:"pb-3 font-medium",children:"Type"}),O("School","school_name"),O("Course","course_name"),e("th",{className:"pb-3 font-medium",children:"Action"}),e("th",{className:"pb-3 font-medium",children:"Target"})]})}),e("tbody",{children:o?Array.from({length:5}).map((N,W)=>e("tr",{className:"border-b border-gray-50",children:Array.from({length:8}).map((ne,Z)=>e("td",{className:"py-3 px-2",children:e("div",{className:"h-4 bg-gray-200 rounded animate-pulse"})},Z))},W)):t.length===0?e("tr",{children:e("td",{colSpan:8,className:"py-12 text-center text-gray-500",children:"No access log entries found"})}):t.map((N,W)=>e("tr",{className:"border-b border-gray-50 hover:bg-gray-50",children:[e("td",{className:"py-3 px-2 text-gray-600 whitespace-nowrap",children:ba(N.access_time)}),e("td",{className:"py-3 px-2 font-medium text-gray-800",children:N.user_fullname}),e("td",{className:"py-3 px-2 text-gray-600",children:N.sdms_id||"-"}),e("td",{className:"py-3 px-2",children:N.user_type?e("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${N.user_type==="teacher"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:N.user_type}):"-"}),e("td",{className:"py-3 px-2 text-gray-600",children:N.school_name||"-"}),e("td",{className:"py-3 px-2 text-gray-600",children:N.course_name||"-"}),e("td",{className:"py-3 px-2 text-gray-600",children:N.action}),e("td",{className:"py-3 px-2 text-gray-600",children:N.target})]},W))})]})}),r>0&&e("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-100",children:[e("span",{className:"text-sm text-gray-600",children:[V,"-",K," of ",r.toLocaleString()]}),e("div",{className:"flex gap-2",children:[e("button",{onClick:()=>d(Math.max(0,c-1)),disabled:c===0,className:"px-3 py-1 text-sm border border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e("span",{className:"px-3 py-1 text-sm text-gray-600",children:["Page ",c+1," of ",$]}),e("button",{onClick:()=>d(Math.min($-1,c+1)),disabled:c>=$-1,className:"px-3 py-1 text-sm border border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})}function we(t,a){return new Promise((r,l)=>{X(["core/ajax"],o=>{o.call([{methodname:t,args:a}])[0].then(r).catch(l)})})}function wa(t){return t?new Date(t*1e3).toLocaleString():"Never"}function oe({label:t,value:a,icon:r,color:l}){return e("div",{className:`rounded-xl p-4 ${l}`,children:e("div",{className:"flex items-center gap-3",children:[e("div",{className:"w-10 h-10 rounded-full bg-white/40 flex items-center justify-center",children:r}),e("div",{children:[e("p",{className:"text-2xl font-bold text-gray-800",children:a}),e("p",{className:"text-xs text-gray-600",children:t})]})]})})}function _a({operation:t}){return e("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${{create:"bg-green-100 text-green-700",update:"bg-blue-100 text-blue-700",skip:"bg-gray-100 text-gray-700",error:"bg-red-100 text-red-700"}[t]||"bg-gray-100 text-gray-700"}`,children:t})}function Na({onLinked:t}){const[a,r]=x(""),[l,o]=x([]),[n,c]=x(!1),[d,h]=x(0),[s,m]=x(null),[i,u]=x(""),[v,f]=x("student"),[g,p]=x(null),[b,_]=x(!1),[R,z]=x(!1),[P,A]=x(null),F=Ae(null);function k(y){if(r(y),m(null),p(null),A(null),F.current&&clearTimeout(F.current),y.trim().length<2){o([]),h(0);return}F.current=setTimeout(()=>j(y.trim()),400)}async function j(y){c(!0);try{const U=await we("local_elby_dashboard_search_unlinked_users",{search:y,page:0,perpage:20});o(U.users||[]),h(U.total_count||0)}catch{o([])}finally{c(!1)}}async function L(){if(i.trim()){_(!0),p(null),A(null);try{const y=await we("local_elby_dashboard_lookup_sdms_user",{sdms_code:i.trim(),user_type:v});if(!y.success){A({type:"error",message:y.error||"Not found in SDMS"});return}const U=y.student_data?.names||"";p({sdms_id:y.sdms_id,status:y.status||"",academic_year:y.academic_year||"",school_name:y.school?.school_name||"",student_name:U,program:y.student_data?.program||"",position:y.staff_data?.position||"",user_type:v})}catch(y){A({type:"error",message:y?.message||"Lookup failed"})}finally{_(!1)}}}async function M(){if(!(!s||!i.trim())){z(!0),A(null);try{const y=await we("local_elby_dashboard_link_user",{userid:s.userid,sdms_code:i.trim(),user_type:v});y.success?(A({type:"success",message:`Successfully linked ${s.fullname} to ${i}`}),m(null),u(""),p(null),o(U=>U.filter($=>$.userid!==s.userid)),t()):A({type:"error",message:y.error||"Link failed"})}catch(y){A({type:"error",message:y?.message||"Link failed"})}finally{z(!1)}}}return e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Link User to SDMS"}),P&&e("div",{className:`mb-4 px-4 py-3 rounded-lg text-sm ${P.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:[P.message,e("button",{onClick:()=>A(null),className:"float-right text-lg leading-none opacity-60 hover:opacity-100",children:""})]}),e("div",{className:"mb-4",children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Unlinked Users"}),e("input",{type:"text",value:a,onInput:y=>k(y.target.value),placeholder:"Search by name, username, or email...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n&&e("p",{className:"text-xs text-gray-400 mt-1",children:"Searching..."}),!n&&d>0&&e("p",{className:"text-xs text-gray-500 mt-1",children:[d," unlinked user",d!==1?"s":""," found"]})]}),l.length>0&&!s&&e("div",{className:"mb-4 max-h-48 overflow-y-auto border border-gray-200 rounded-lg",children:l.map(y=>e("button",{onClick:()=>{m(y),u(""),p(null),A(null)},className:"w-full text-left px-4 py-2 hover:bg-gray-50 border-b border-gray-100 last:border-b-0 transition-colors",children:[e("p",{className:"text-sm font-medium text-gray-800",children:y.fullname}),e("p",{className:"text-xs text-gray-500",children:[y.username,"  ",y.email]})]},y.userid))}),s&&e("div",{className:"border border-blue-200 bg-blue-50 rounded-lg p-4 mb-4",children:[e("div",{className:"flex items-center justify-between mb-3",children:[e("div",{children:[e("p",{className:"text-sm font-semibold text-gray-800",children:s.fullname}),e("p",{className:"text-xs text-gray-500",children:[s.username,"  ",s.email]})]}),e("button",{onClick:()=>{m(null),p(null)},className:"text-gray-400 hover:text-gray-600 text-lg",children:""})]}),e("div",{className:"flex gap-2 mb-3",children:[e("input",{type:"text",value:i,onInput:y=>u(y.target.value),placeholder:"Enter SDMS code...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e("select",{value:v,onChange:y=>f(y.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e("option",{value:"student",children:"Student"}),e("option",{value:"staff",children:"Staff"})]}),e("button",{onClick:L,disabled:b||!i.trim(),className:"px-4 py-2 bg-gray-600 text-white rounded-lg text-sm hover:bg-gray-700 disabled:opacity-50",children:b?"...":"Lookup"})]}),g&&e("div",{className:"bg-white rounded-lg p-3 mb-3 border border-gray-200",children:[e("p",{className:"text-sm font-medium text-gray-800 mb-1",children:"SDMS Preview"}),e("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[e("span",{className:"text-gray-500",children:"SDMS ID:"}),e("span",{className:"text-gray-800",children:g.sdms_id}),g.student_name&&e(I,{children:[e("span",{className:"text-gray-500",children:"Name:"}),e("span",{className:"text-gray-800",children:g.student_name})]}),e("span",{className:"text-gray-500",children:"School:"}),e("span",{className:"text-gray-800",children:g.school_name||"-"}),e("span",{className:"text-gray-500",children:"Status:"}),e("span",{className:"text-gray-800",children:g.status||"-"}),g.program&&e(I,{children:[e("span",{className:"text-gray-500",children:"Program:"}),e("span",{className:"text-gray-800",children:g.program})]}),g.position&&e(I,{children:[e("span",{className:"text-gray-500",children:"Position:"}),e("span",{className:"text-gray-800",children:g.position})]})]})]}),g&&e("button",{onClick:M,disabled:R,className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg text-sm hover:bg-green-700 disabled:opacity-50",children:R?"Linking...":`Link ${s.fullname} to ${i}`})]})]})}function ka(){const[t,a]=x(null),[r,l]=x([]),[o,n]=x(!0),[c,d]=x(null),[h,s]=x(null);q(()=>{m()},[]);async function m(){try{n(!0);const v=document.getElementById("elby-dashboard-root")?.getAttribute("data-admin");if(v)try{const f=JSON.parse(v);a(f.stats),l(f.logs||[])}catch(f){console.error("Failed to parse admin data:",f)}}finally{n(!1)}}async function i(u){d(u),s(null);try{const f={user_metrics:"compute_user_metrics",school_metrics:"aggregate_school_metrics",sdms_cache:"refresh_sdms_cache"}[u];if(!f)return;const g=await we("local_elby_dashboard_trigger_task",{task_name:f});g.success?(s({type:"success",message:g.message}),m()):s({type:"error",message:g.message})}catch(v){s({type:"error",message:v?.message||"Failed to run task"})}finally{d(null)}}return o?e("div",{className:"p-6 animate-pulse space-y-4",children:[e("div",{className:"h-8 bg-gray-200 rounded w-48"}),e("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(u=>e("div",{className:"h-20 bg-gray-200 rounded-xl"},u))})]}):e("div",{className:"p-4 lg:p-6",children:[t&&e("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[e(oe,{label:"Linked Users",value:t.linked_users,color:"bg-cyan-50",icon:e("svg",{className:"w-5 h-5 text-cyan-600",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5z"})})}),e(oe,{label:"Stale Records",value:t.stale_users,color:"bg-yellow-50",icon:e("svg",{className:"w-5 h-5 text-yellow-600",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"})})}),e(oe,{label:"Sync Errors",value:t.error_users,color:"bg-red-50",icon:e("svg",{className:"w-5 h-5 text-red-500",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})})}),e(oe,{label:"Schools",value:t.total_schools,color:"bg-blue-50",icon:e("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3z"})})}),e(oe,{label:"User Metrics",value:t.user_metrics_count.toLocaleString(),color:"bg-green-50",icon:e("svg",{className:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"})})}),e(oe,{label:"School Metrics",value:t.school_metrics_count.toLocaleString(),color:"bg-purple-50",icon:e("svg",{className:"w-5 h-5 text-purple-600",fill:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"})})})]}),h&&e("div",{className:`mb-4 px-4 py-3 rounded-lg text-sm ${h.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:[h.message,e("button",{onClick:()=>s(null),className:"float-right text-lg leading-none opacity-60 hover:opacity-100",children:""})]}),e("div",{className:"mb-6",children:e(Na,{onLinked:m})}),e("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Manual Sync Triggers"}),e("p",{className:"text-sm text-gray-500 mb-4",children:"Run scheduled tasks manually from Site Admin > Server > Scheduled Tasks, or use the buttons below."}),e("div",{className:"space-y-3",children:[e("button",{onClick:()=>i("user_metrics"),disabled:c!==null,className:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors disabled:opacity-50",children:[e("div",{children:[e("p",{className:"text-sm font-medium text-gray-800",children:"Compute User Metrics"}),e("p",{className:"text-xs text-gray-500",children:"Hourly task - aggregates logstore data"})]}),c==="user_metrics"&&e("div",{className:"w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})]}),e("button",{onClick:()=>i("school_metrics"),disabled:c!==null,className:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors disabled:opacity-50",children:[e("div",{children:[e("p",{className:"text-sm font-medium text-gray-800",children:"Aggregate School Metrics"}),e("p",{className:"text-xs text-gray-500",children:"Daily task - rolls up to school level"})]}),c==="school_metrics"&&e("div",{className:"w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})]}),e("button",{onClick:()=>i("sdms_cache"),disabled:c!==null,className:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors disabled:opacity-50",children:[e("div",{children:[e("p",{className:"text-sm font-medium text-gray-800",children:"Refresh SDMS Cache"}),e("p",{className:"text-xs text-gray-500",children:"Daily task - refreshes stale SDMS records"})]}),c==="sdms_cache"&&e("div",{className:"w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})]})]})]}),e("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Recent Sync Logs"}),r.length===0?e("div",{className:"text-center text-gray-400 py-8",children:e("p",{children:"No sync logs found"})}):e("div",{className:"overflow-x-auto max-h-80 overflow-y-auto",children:e("table",{className:"w-full text-xs",children:[e("thead",{className:"sticky top-0 bg-white",children:e("tr",{className:"text-left text-gray-500 border-b border-gray-100",children:[e("th",{className:"pb-2 font-medium",children:"Type"}),e("th",{className:"pb-2 font-medium",children:"Entity"}),e("th",{className:"pb-2 font-medium",children:"Op"}),e("th",{className:"pb-2 font-medium",children:"Time"})]})}),e("tbody",{children:r.map(u=>e("tr",{className:"border-b border-gray-50",children:[e("td",{className:"py-2 text-gray-600",children:u.sync_type}),e("td",{className:"py-2 text-gray-600 truncate max-w-[80px]",children:u.entity_id||"-"}),e("td",{className:"py-2",children:e(_a,{operation:u.operation})}),e("td",{className:"py-2 text-gray-500",children:wa(u.timecreated)})]},u.id))})]})})]})]})]})}function Sa({user:t,activePage:a,themeConfig:r,onMenuClick:l}){const n={home:"Dashboard",completion:"Completion Report",courses:"Courses Report",schools:"Schools Directory",school_detail:"School Detail",students:"Student List",teachers:"Teacher List",traffic:"Platform Traffic",accesslog:"Access Log",admin:"Admin Panel"}[a]||"Dashboard";return e("header",{className:"bg-white border-b border-gray-100 px-2 sm:px-4 lg:px-6 py-3 sm:py-4",children:e("div",{className:"flex items-center justify-between",children:[e("div",{className:"flex items-center gap-3",children:[e("button",{onClick:l,className:"lg:hidden p-2 -ml-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg","aria-label":"Toggle menu",children:e("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})}),e("h1",{className:"text-xl font-semibold text-gray-800",children:n})]}),e("div",{className:"flex items-center gap-4 lg:gap-6",children:[r.showNotifications&&e("button",{className:"relative text-gray-500 hover:text-gray-700",children:[e("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),e("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),e("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full"})]}),r.showUserProfile&&e("div",{className:"flex items-center gap-3",children:[e("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center text-white font-semibold text-sm overflow-hidden",children:t.avatar?e("img",{src:t.avatar,alt:t.fullname,className:"w-full h-full object-cover"}):e("span",{children:[t.firstname.charAt(0),t.lastname.charAt(0)]})}),e("div",{className:"hidden sm:block",children:[e("p",{className:"text-sm font-semibold text-gray-800",children:t.fullname}),e("p",{className:"text-xs text-gray-500",children:t.isAdmin?"Admin":t.roles.includes("teacher")?"Teacher":"User"})]})]})]})]})})}function Ca({user:t,stats:a,activePage:r,sidenavConfig:l,themeConfig:o,coursesReportData:n,schoolCode:c}){const[d,h]=x(!1);return e("div",{className:"flex h-screen bg-gray-50",children:[e(qt,{activePage:r,sidenavConfig:l,themeConfig:o,isOpen:d,onClose:()=>h(!1)}),e("div",{className:"flex-1 flex flex-col min-h-0",children:[e(Sa,{user:t,activePage:r,themeConfig:o,onMenuClick:()=>h(!d)}),e("main",{className:"flex-1 overflow-y-auto",children:[r==="home"&&e(Ft,{user:t,stats:a,themeConfig:o}),r==="completion"&&e(Kt,{}),r==="courses"&&n&&e(la,{data:n,themeConfig:o}),r==="schools"&&e(ia,{}),r==="school_detail"&&c&&e(ga,{schoolCode:c}),r==="students"&&e(Nt,{initialSchoolCode:c}),r==="teachers"&&e(Nt,{userType:"teacher",user:t,initialSchoolCode:c}),r==="traffic"&&e(fa,{}),r==="accesslog"&&e(ya,{}),r==="admin"&&e(ka,{})]})]})]})}const za=(t="#elby-dashboard-root")=>{const a=document.querySelector(t);if(!a){console.error(`Container not found: ${t}`);return}try{const r=a.getAttribute("data-user"),l=a.getAttribute("data-stats"),o=a.getAttribute("data-sidenav"),n=a.getAttribute("data-theme"),c=a.getAttribute("data-courses-report"),d=a.getAttribute("data-page"),h=r?JSON.parse(r):{id:0,fullname:"Guest",firstname:"Guest",lastname:"",email:"",avatar:"",roles:[]},s=l?JSON.parse(l):{totalCourses:0,totalUsers:0,totalEnrollments:0,totalActivities:0},m=o?JSON.parse(o):{title:"Dashboard",logoUrl:null},i=n?JSON.parse(n):{sidenavAccentColor:"#005198",statCard1Color:"#cffafe",statCard2Color:"#fef3c7",statCard3Color:"#f3e8ff",statCard4Color:"#dcfce7",chartPrimaryColor:"#22d3ee",chartSecondaryColor:"#a78bfa",showSearchBar:!0,showNotifications:!0,showUserProfile:!0,menuVisibility:{courses:!0,presence:!0,communication:!0,event:!0,pedagogy:!0,message:!0,completion:!0,settings:!0}},u=c?JSON.parse(c):null,v=a.getAttribute("data-school-code")||void 0,f=d||"home";console.log("Elby Dashboard initialized:",{user:h.fullname,activePage:f}),At(We(Ca,{user:h,stats:s,activePage:f,sidenavConfig:m,themeConfig:i,coursesReportData:u,schoolCode:v}),a)}catch(r){console.error("Error initializing Elby Dashboard:",r)}};He.init=za,Object.defineProperty(He,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=dashboard.js.map
